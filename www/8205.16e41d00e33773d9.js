"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8205],{7141:(Z,$,c)=>{c.d($,{S:()=>m});var b=c(3953);let m=(()=>{var I;class k{constructor(g,e){this.el=g,this.renderer=e,this.disabled=!1}ngAfterViewInit(){this.updateVisibility()}ngOnChanges(g){this.updateVisibility()}updateVisibility(){if(!this.disabled)return this.renderer.setStyle(this.el.nativeElement,"display","block"),void this.renderer.removeStyle(this.el.nativeElement,"height");this.disabled&&this.isEmpty(this.value)?(this.renderer.setStyle(this.el.nativeElement,"display","none"),this.renderer.setStyle(this.el.nativeElement,"height","0")):(this.renderer.setStyle(this.el.nativeElement,"display","block"),this.renderer.removeStyle(this.el.nativeElement,"height"))}isEmpty(g){return null==g||""===g||Array.isArray(g)&&0===g.length||"object"==typeof g&&0===Object.keys(g).length}}return(I=k).\u0275fac=function(g){return new(g||I)(b.rXU(b.aKT),b.rXU(b.sFG))},I.\u0275dir=b.FsC({type:I,selectors:[["","appHideIfNoData",""]],inputs:{value:[0,"appHideIfNoData","value"],disabled:"disabled"},standalone:!0,features:[b.OA$]}),k})()},8205:(Z,$,c)=>{c.r($),c.d($,{AgencyDetailsPageModule:()=>Pn});var b=c(177),m=c(9417),I=c(9465),k=c(5188),C=c(467),g=c(7376),e=c(3953),H=c(8397),K=c(4501),E=c(6039),G=c(1213),M=c(3955),L=c(2606),q=c(4874),z=c(6552),ee=c(9520),ne=c(4558);const te=["scrollContainer"];function oe(o,l){if(1&o&&(e.j41(0,"div",12)(1,"div",50)(2,"div",51),e.nrm(3,"span"),e.k0s()()()),2&o){let i;const t=l.$implicit,n=e.XpG();e.R7$(3),e.HbH(null==(i=n.utils.getLanguageInfo(t))?null:i.flagClass)}}function ie(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.instagramUrl))}),e.nrm(1,"i",53),e.k0s()}}function ae(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.facebookUrl))}),e.nrm(1,"i",54),e.k0s()}}function le(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.linkedinUrl))}),e.nrm(1,"i",55),e.k0s()}}function re(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.twitterUrl))}),e.nrm(1,"i",56),e.k0s()}}function se(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",57)(1,"div",14),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",58),e.nrm(5,"img",59),e.k0s(),e.j41(6,"div",60),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onDownloadCatalogue())}),e.EFF(7),e.nI1(8,"translate"),e.k0s()()}2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,2,"text.discover_agency")," "),e.R7$(5),e.SpI(" ",e.bMT(8,4,"text.download")," "))}function ce(o,l){if(1&o&&e.nrm(0,"app-card-system-user",36),2&o){const i=l.$implicit;e.Y8G("showCheckbox",!1)("user",i)}}function de(o,l){if(1&o&&(e.j41(0,"div",61)(1,"div",62)(2,"div",63),e.EFF(3),e.k0s(),e.j41(4,"div",64),e.EFF(5),e.k0s()(),e.nrm(6,"div",65),e.j41(7,"div",66)(8,"div",67),e.nrm(9,"i",68),e.j41(10,"span"),e.EFF(11),e.k0s()(),e.j41(12,"div",67),e.nrm(13,"i",69),e.j41(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"div",67),e.nrm(17,"i",70),e.j41(18,"span"),e.EFF(19),e.k0s()()()()),2&o){const i=l.$implicit;e.R7$(3),e.SpI(" ",(null==i?null:i.city)||"Valencia"," "),e.R7$(2),e.Lme(" ",null==i?null:i.address,", ",null==i?null:i.postalCode," "),e.R7$(6),e.JRh((null==i?null:i.phoneNumber)||"+48 608 188 424"),e.R7$(4),e.JRh((null==i?null:i.email)||"office.poland@luxinmo.pl"),e.R7$(4),e.JRh((null==i?null:i.web)||"www.luxinmo.com")}}let pe=(()=>{var o;class l{constructor(t,n,a){this.byvaroState=t,this.utils=n,this.api=a,this.agency=null,this.user=null,this.users=[],this.canEdit=!1,this.agencyCountry=null}ngOnInit(){var t=this;this.byvaroState.getState().subscribe(function(){var n=(0,C.A)(function*(a){var r,s;t.user=a.user,(null==a||null===(r=a.user)||void 0===r?void 0:r.agencyId)===(null===(s=t.agency)||void 0===s?void 0:s.id)&&(t.canEdit=!0)});return function(a){return n.apply(this,arguments)}}()),this.getData()}getData(){var t=this;return(0,C.A)(function*(){try{var n;t.agencyCountry=t.utils.getCountryInfo(null===(n=t.agency)||void 0===n?void 0:n.country)}catch(a){console.error(a)}})()}goToUrl(t){window.open(t,"_blank")}scrollLeft(){this.scrollContainer.nativeElement.scrollBy({left:-550,behavior:"smooth"})}scrollRight(){this.scrollContainer.nativeElement.scrollBy({left:550,behavior:"smooth"})}onDownloadCatalogue(){var t;console.log("DOWNLOAD CATALOGUE");const n=null===(t=this.agency)||void 0===t||null===(t=t.agencyFiles)||void 0===t?void 0:t.find(a=>"catalog"===a.category);n&&window.open(n.url,"_blank")}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(G.c),e.rXU(z.T),e.rXU(E.i))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-details-presentation"]],viewQuery:function(t,n){if(1&t&&e.GBs(te,5),2&t){let a;e.mGM(a=e.lsd())&&(n.scrollContainer=a.first)}},inputs:{agency:"agency"},decls:128,vars:65,consts:[[1,"crm-section",2,"gap","16px","padding","20px"],[1,"agency-banner"],[1,"agency-banner-img"],["alt","",3,"src"],[1,"agency-banner-bottom"],[1,"agency-banner-bottom-image"],[1,"agency-banner-bottom-info"],[2,"display","flex","flex-direction","column","gap","4px"],[1,"crm-block-photo-and-info-info-title"],[1,"crm-block-photo-and-info-info-footer"],[1,"fa-solid","fa-calendar"],[1,"crm-info-content-langs-langs",2,"overflow","hidden"],[1,"crm-item-option","crm-item-option-lang"],[1,"agency-block"],[1,"agency-block-title"],[1,"agency-block-rowdata"],[1,"agency-block-rowdata-text"],[2,"display","flex","align-items","center","gap","8px"],[1,"fa-solid","fa-location-dot"],[1,"fa-solid","fa-phone"],[1,"fa-solid","fa-envelope"],[1,"agency-block-rowdata-text",2,"width","fit-content"],["style","cursor: pointer;",3,"click",4,"ngIf"],[1,"agency-block","agency-block-empty"],[1,"agency-number-quantities"],[1,"agency-number-quantities-block"],[1,"agency-number-quantities-block-title"],[1,"agency-number-quantities-block-number"],[1,"agency-block-helper-text"],[1,"agency-block","agency-about-us"],[2,"display","flex","flex-direction","column","gap","16px","flex","1"],[1,"agency-about-us-block"],[1,"agency-block-text"],["class","agency-about-us-catalogue",4,"ngIf"],[1,"crm-section-inline-cards-wrapper"],[1,"crm-section-inline-cards"],[3,"showCheckbox","user"],[1,"agency-block-double"],[1,"agency-block","agency-block-empty",2,"gap","16px"],[1,"agency-offices-list"],["class","agency-office-card",4,"ngFor","ngForOf"],[1,"agency-portals-grid"],["src","https://logo.clearbit.com/habitaclia.com","alt","habitaclia"],["src","https://logo.clearbit.com/tucasa.com","alt","tucasa"],["src","https://logo.clearbit.com/wallapop.com","alt","wallapop"],["src","https://logo.clearbit.com/idealista.com","alt","idealista"],["src","https://logo.clearbit.com/fotocasa.es","alt","fotocasa"],["src","https://logo.clearbit.com/enalquiler.com","alt","enalquiler"],["src","https://logo.clearbit.com/yaencontre.com","alt","yaencontre"],["src","https://logo.clearbit.com/pisos.com","alt","pisos"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[2,"cursor","pointer",3,"click"],[1,"fa-brands","fa-instagram",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"fa-brands","fa-facebook",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"fa-brands","fa-linkedin",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"fa-brands","fa-twitter",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"agency-about-us-catalogue"],[1,"catalogue-image"],["src","assets/images/catalogue.png","alt",""],[1,"crm-button-secondary",3,"click"],[1,"agency-office-card"],[1,"agency-office-header"],[1,"agency-office-title"],[1,"agency-office-address"],[1,"agency-office-separator"],[1,"agency-office-contact"],[1,"agency-office-contact-item"],[1,"fas","fa-phone"],[1,"fas","fa-envelope"],[1,"fas","fa-globe"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.k0s(),e.j41(4,"div",4)(5,"div",5),e.nrm(6,"img",3),e.k0s(),e.j41(7,"div",6)(8,"div",7)(9,"div",8),e.EFF(10),e.k0s(),e.j41(11,"div",9),e.nrm(12,"i",10),e.EFF(13),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"div")(16,"div",11),e.Z7z(17,oe,4,2,"div",12,e.fX1),e.k0s()()()()(),e.j41(19,"div",13)(20,"div",14),e.EFF(21),e.k0s(),e.j41(22,"div",15)(23,"div",16)(24,"div",17),e.nrm(25,"i",18),e.EFF(26),e.k0s(),e.j41(27,"div"),e.EFF(28),e.k0s()(),e.j41(29,"div",16)(30,"div"),e.EFF(31),e.k0s(),e.j41(32,"div"),e.EFF(33),e.nI1(34,"translate"),e.k0s()(),e.j41(35,"div",16)(36,"div",17),e.nrm(37,"i",19),e.EFF(38),e.k0s(),e.j41(39,"div",17),e.nrm(40,"i",20),e.EFF(41),e.k0s()(),e.j41(42,"div",21)(43,"div",17),e.DNE(44,ie,2,0,"div",22)(45,ae,2,0,"div",22)(46,le,2,0,"div",22)(47,re,2,0,"div",22),e.k0s(),e.j41(48,"div"),e.EFF(49),e.k0s()()()(),e.j41(50,"div",23)(51,"div",24)(52,"div",25)(53,"div",26),e.EFF(54),e.nI1(55,"translate"),e.k0s(),e.j41(56,"div",27),e.EFF(57),e.nI1(58,"thousandSeparator"),e.k0s()(),e.j41(59,"div",25)(60,"div",26),e.EFF(61),e.nI1(62,"translate"),e.k0s(),e.j41(63,"div",27),e.EFF(64),e.nI1(65,"thousandSeparator"),e.k0s()(),e.j41(66,"div",25)(67,"div",26),e.EFF(68),e.nI1(69,"translate"),e.k0s(),e.j41(70,"div",27),e.EFF(71),e.k0s()(),e.j41(72,"div",25)(73,"div",26),e.EFF(74),e.nI1(75,"translate"),e.k0s(),e.j41(76,"div",27),e.EFF(77),e.k0s()(),e.j41(78,"div",25)(79,"div",26),e.EFF(80),e.nI1(81,"translate"),e.k0s(),e.j41(82,"div",27),e.EFF(83),e.k0s()()(),e.j41(84,"div",28),e.EFF(85),e.nI1(86,"translate"),e.k0s()(),e.j41(87,"div",29)(88,"div",30)(89,"div",31)(90,"div",14),e.EFF(91),e.nI1(92,"translate"),e.k0s(),e.j41(93,"div",32),e.EFF(94),e.k0s()(),e.j41(95,"div",31)(96,"div",14),e.EFF(97),e.nI1(98,"translate"),e.k0s(),e.j41(99,"div",32),e.EFF(100),e.k0s()()(),e.DNE(101,se,9,6,"div",33),e.k0s(),e.j41(102,"div",13)(103,"div",14),e.EFF(104),e.nI1(105,"translate"),e.k0s(),e.j41(106,"div",34)(107,"div",35),e.Z7z(108,ce,1,2,"app-card-system-user",36,e.fX1),e.k0s()()(),e.j41(110,"div",37)(111,"div",38)(112,"div",14),e.EFF(113,"Offices"),e.k0s(),e.j41(114,"div",39),e.DNE(115,de,20,6,"div",40),e.k0s()(),e.j41(116,"div",38)(117,"div",14),e.EFF(118,"Following real estate portals"),e.k0s(),e.j41(119,"div",41),e.nrm(120,"img",42)(121,"img",43)(122,"img",44)(123,"img",45)(124,"img",46)(125,"img",47)(126,"img",48)(127,"img",49),e.k0s()()()()),2&t&&(e.R7$(3),e.Y8G("src",(null==n.agency?null:n.agency.bannerUrl)||"assets/images/banner-agency-model.png",e.B4B),e.R7$(3),e.Y8G("src",(null==n.agency?null:n.agency.photoUrl)||"assets/images/agency-photo-model.png",e.B4B),e.R7$(4),e.SpI(" ",null==n.agency?null:n.agency.name," "),e.R7$(3),e.LHq(" ",e.bMT(14,39,"text.founded_in")," ",null==n.agency?null:n.agency.foundationYear," / ",null==n.agency?null:n.agency.city," / ",null==n.agencyCountry?null:n.agencyCountry.name," "),e.R7$(4),e.Dyx(null==n.agency?null:n.agency.languages),e.R7$(4),e.SpI(" ",(null==n.agency?null:n.agency.legalName)||"Luxinmo Real State SLU"," "),e.R7$(5),e.Lme(" ",(null==n.agencyCountry?null:n.agencyCountry.name)||"Espa\xf1a"," / ",(null==n.agency?null:n.agency.city)||"Valencia"," "),e.R7$(2),e.SpI(" ",(null==n.agency?null:n.agency.address)||"Calle de la Paz, 1"," "),e.R7$(3),e.SpI(" NIF/CIF: ",(null==n.agency?null:n.agency.nifCif)||""," "),e.R7$(2),e.Lme(" ",e.bMT(34,41,"text.postal_code"),": ",(null==n.agency?null:n.agency.postalCode)||""," "),e.R7$(5),e.SpI(" ",(null==n.agency||null==n.agency.phones?null:n.agency.phones[0])||""," "),e.R7$(3),e.SpI(" ",(null==n.agency||null==n.agency.emails?null:n.agency.emails[0])||""," "),e.R7$(3),e.Y8G("ngIf",null==n.agency?null:n.agency.instagramUrl),e.R7$(),e.Y8G("ngIf",null==n.agency?null:n.agency.facebookUrl),e.R7$(),e.Y8G("ngIf",null==n.agency?null:n.agency.linkedinUrl),e.R7$(),e.Y8G("ngIf",null==n.agency?null:n.agency.twitterUrl),e.R7$(2),e.SpI(" ",null==n.agency?null:n.agency.webUrl," "),e.R7$(5),e.SpI(" ",e.bMT(55,43,"text.annual_sales")," "),e.R7$(3),e.SpI(" +",e.bMT(58,45,null==n.agency?null:n.agency.annualSales)||"-"," "),e.R7$(4),e.SpI(" ",e.bMT(62,47,"text.annual_revenue")," "),e.R7$(3),e.SpI(" +",e.bMT(65,49,null==n.agency?null:n.agency.annualRevenue)||"-"," "),e.R7$(4),e.SpI(" ",e.bMT(69,51,"text.portfolio_size")," "),e.R7$(3),e.SpI(" ",(null==n.agency?null:n.agency.portfolioSize)||"-"," "),e.R7$(3),e.SpI(" ",e.bMT(75,53,"text.agents")," "),e.R7$(3),e.SpI(" ",(null==n.users?null:n.users.length)||"-"," "),e.R7$(3),e.SpI(" ",e.bMT(81,55,"text.offices")," "),e.R7$(3),e.SpI(" ",(null==n.agency||null==n.agency.agencyOffices?null:n.agency.agencyOffices.length)||"-"," "),e.R7$(2),e.SpI(" ",e.bMT(86,57,"text.info_provided_by_agency")," "),e.R7$(6),e.SpI(" ",e.bMT(92,59,"text.about_us")," "),e.R7$(3),e.SpI(" ",null==n.agency?null:n.agency.aboutUs," "),e.R7$(3),e.SpI(" ",e.bMT(98,61,"text.our_history")," "),e.R7$(3),e.SpI(" ",null==n.agency?null:n.agency.storyAboutUs," "),e.R7$(),e.Y8G("ngIf",(null==n.agency||null==n.agency.agencyFiles?null:n.agency.agencyFiles.length)>0),e.R7$(3),e.SpI(" ",e.bMT(105,63,"text.team")," "),e.R7$(4),e.Dyx(null==n.agency?null:n.agency.users),e.R7$(7),e.Y8G("ngForOf",null==n.agency?null:n.agency.agencyOffices))},dependencies:[b.Sq,b.bT,ee.k,ne.w,M.D9],styles:[".agency-block[_ngcontent-%COMP%]{padding:20px;border-radius:12px;background:#fff;max-width:1000px;border:none;gap:16px;display:flex;flex-direction:column}.agency-block-empty[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--crm-border-light-color);gap:0}.agency-block[_ngcontent-%COMP%]   .crm-section-inline-cards[_ngcontent-%COMP%]{display:flex;gap:16px;overflow-x:auto;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none;white-space:nowrap;max-width:100%;padding:8px 0;flex-wrap:nowrap}.agency-block[_ngcontent-%COMP%]   .crm-section-inline-cards[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.agency-block-helper-text[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:var(--crm-font-color-light);width:100%;text-align:right}.agency-block-title[_ngcontent-%COMP%]{font-size:var(--crm-font-size);font-weight:600}.agency-block-text[_ngcontent-%COMP%]{font-size:var(--crm-font-size);font-weight:400;color:var(--crm-font-color-light);line-height:1.5}.agency-number-quantities[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:60%}.agency-number-quantities-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.agency-number-quantities-block-title[_ngcontent-%COMP%]{font-size:12px}.agency-number-quantities-block-number[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.agency-block-rowdata[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.agency-block-rowdata-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:25%;font-size:var(--crm-font-size);font-weight:400;color:var(--crm-font-color-light)}.agency-block-rowdata-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.agency-banner[_ngcontent-%COMP%]{max-width:1000px}.agency-banner-img[_ngcontent-%COMP%]{max-width:1000px;border-top-right-radius:12px;border-top-left-radius:12px;height:220px}.agency-banner-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-top-right-radius:12px;border-top-left-radius:12px}.agency-banner-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border-bottom-right-radius:12px;border-bottom-left-radius:12px;padding-bottom:12px}.agency-banner-bottom-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex:1;padding:16px}.agency-banner-bottom-info[_ngcontent-%COMP%]   .crm-info-content-langs-langs[_ngcontent-%COMP%]{background:#ebebeb;border-radius:100px;padding:5px 8px}.agency-banner-bottom-info[_ngcontent-%COMP%]   .crm-info-content-langs-langs[_ngcontent-%COMP%]   .crm-item-option-flag[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:1.333333em;height:auto;font-size:13px}.agency-banner-bottom-image[_ngcontent-%COMP%]{width:110px;height:110px;border-radius:50%;border:2px solid #fff;margin-top:-50px;margin-left:24px;background:#fff}.agency-banner-bottom-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.agency-about-us[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-wrap:nowrap;flex-direction:row}.agency-about-us-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.agency-about-us-catalogue[_ngcontent-%COMP%]{border:1px solid var(--crm-border-light-color);padding:12px;border-radius:8px;max-width:230px;min-width:230px;flex:1;display:flex;flex-direction:column;gap:12px}.agency-about-us-catalogue[_ngcontent-%COMP%]   .crm-button-secondary[_ngcontent-%COMP%]{margin:auto}.catalogue-image[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;border-radius:8px;overflow:hidden;position:relative}.catalogue-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;object-fit:cover;max-width:180px}.promotion-card__content[_ngcontent-%COMP%]{border:none!important}.agency-block-double[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:nowrap;max-width:1000px}.agency-block-double[_ngcontent-%COMP%]   .agency-block[_ngcontent-%COMP%]{width:50%}.agency-offices-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.agency-office-card[_ngcontent-%COMP%]{max-width:280px;width:100%;background:#fff;border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:12px}.agency-office-card[_ngcontent-%COMP%]   .agency-office-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.agency-office-card[_ngcontent-%COMP%]   .agency-office-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--crm-font-color)}.agency-office-card[_ngcontent-%COMP%]   .agency-office-address[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:var(--crm-font-color-light);line-height:1.4}.agency-office-card[_ngcontent-%COMP%]   .agency-office-separator[_ngcontent-%COMP%]{border-top:1px solid #eaeaea;margin:4px 0}.agency-office-card[_ngcontent-%COMP%]   .agency-office-contact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.agency-office-card[_ngcontent-%COMP%]   .agency-office-contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--crm-font-color)}.agency-office-card[_ngcontent-%COMP%]   .agency-office-contact-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:var(--crm-font-color-light)}.agency-portals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:12px}.agency-portals-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:90px;height:auto;object-fit:contain;border-radius:8px;background:#f9f9f9;padding:6px;box-shadow:0 0 0 1px #eee}"]}),l})();var ue=c(5990),ge=c(9604),me=c(5180),ye=c(8323);let fe=(()=>{var o;class l{constructor(t){this.fb=t,this.initForm()}initForm(){this.agencyForm=this.fb.group({name:["",m.k0.required],facebookUrl:[""],instagramUrl:[""],linkedinUrl:[""],twitterUrl:[""],webUrl:[""],phones:this.fb.array([this.createPhoneGroup()]),emails:this.fb.array([this.createEmailGroup()]),aboutUs:[""],storyAboutUs:[""],legalName:[""],foundationYear:[""],nifCif:[""],annualSales:[null],annualRevenue:[null],portfolioSize:[null],country:[""],city:[""],address:[""],postalCode:[""],province:[""],extraHtmlWeb:[""]})}populateForm(t){var n,a,r,s,u,p,y,_,h,v,F,d,f,R,A,j,S,w,V,Y,X,B;console.log("populateForm",t),this.agencyForm.patchValue({name:null!==(n=t.name)&&void 0!==n?n:"",facebookUrl:null!==(a=t.facebookUrl)&&void 0!==a?a:"",instagramUrl:null!==(r=t.instagramUrl)&&void 0!==r?r:"",linkedinUrl:null!==(s=t.linkedinUrl)&&void 0!==s?s:"",twitterUrl:null!==(u=t.twitterUrl)&&void 0!==u?u:"",webUrl:null!==(p=t.webUrl)&&void 0!==p?p:"",aboutUs:null!==(y=t.aboutUs)&&void 0!==y?y:"",storyAboutUs:null!==(_=t.storyAboutUs)&&void 0!==_?_:"",legalName:null!==(h=t.legalName)&&void 0!==h?h:"",foundationYear:null!==(v=t.foundationYear)&&void 0!==v?v:null,nifCif:null!==(F=t.nifCif)&&void 0!==F?F:"",annualSales:null!==(d=t.annualSales)&&void 0!==d?d:null,annualRevenue:null!==(f=t.annualRevenue)&&void 0!==f?f:null,portfolioSize:null!==(R=t.portfolioSize)&&void 0!==R?R:null,country:null!==(A=t.country)&&void 0!==A?A:"",city:null!==(j=t.city)&&void 0!==j?j:"",address:null!==(S=t.address)&&void 0!==S?S:"",postalCode:null!==(w=t.postalCode)&&void 0!==w?w:"",province:null!==(V=t.province)&&void 0!==V?V:"",extraHtmlWeb:null!==(Y=t.extraHtmlWeb)&&void 0!==Y?Y:""}),this.phones.clear(),null===(X=t.phones)||void 0===X||X.forEach(T=>{this.phones.push(this.fb.group({phoneNumber:null!=T?T:""}))}),this.emails.clear(),null===(B=t.emails)||void 0===B||B.forEach(T=>{this.emails.push(this.fb.group({emailAddress:null!=T?T:""}))})}createPhoneGroup(){return this.fb.group({phoneNumber:["",[m.k0.pattern(/^\d+$/)]]})}createEmailGroup(){return this.fb.group({emailAddress:["",[m.k0.email]]})}get phones(){return this.agencyForm.get("phones")}get emails(){return this.agencyForm.get("emails")}addPhone(){this.phones.push(this.createPhoneGroup())}removePhone(t){this.phones.removeAt(t)}addEmail(){this.emails.push(this.createEmailGroup())}removeEmail(t){this.emails.removeAt(t)}onSelectCountry(t,n){var a;null===(a=this.phones.at(n).get("country"))||void 0===a||a.setValue(t)}}return(o=l).\u0275fac=function(t){return new(t||o)(e.KVO(m.ok))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();var _e=c(5970),ve=c(1129),be=c(1792),J=c(6279),he=c(7141);const Ce=["fileUploaderManagerComponent"],Fe=["bannerFileUploaderManagerComponent"],Ie=["catalogFileUploaderManagerComponent"],Me=["provinceInput"],Re=["cityInput"],ke=["fileUploaderOfficeManager"],D=o=>({"crm-section-disabled-inputs":o}),P=o=>({"crm-input-input-error":o}),O=o=>({field:o}),xe=o=>({edit:o}),N=o=>({item:o}),W=o=>({number:o}),x=()=>({standalone:!0});function Te(o,l){1&o&&(e.j41(0,"div",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.profile_picture")," "))}function Ae(o,l){1&o&&(e.j41(0,"div",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.agency_banner")," "))}function $e(o,l){1&o&&(e.j41(0,"div",50),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.catalog")," "))}function je(o,l){1&o&&(e.j41(0,"div",51),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.required")," "))}function Ee(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",56),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.onRemoveLanguage(n))}),e.nrm(1,"i",57),e.k0s()}}function Ge(o,l){if(1&o&&(e.j41(0,"div",20)(1,"div",52)(2,"div",53),e.nrm(3,"span"),e.k0s(),e.j41(4,"div",54),e.EFF(5),e.k0s()(),e.DNE(6,Ee,2,0,"div",55),e.k0s()),2&o){let i,t;const n=l.$implicit,a=e.XpG();e.Y8G("ngClass",e.eq3(5,xe,!a.disabled)),e.R7$(3),e.HbH(null==(i=a.getLanguageInfo(n))?null:i.flagClass),e.R7$(2),e.SpI(" ",null==(t=a.getLanguageInfo(n))?null:t.name," "),e.R7$(),e.vxM(a.disabled?-1:6)}}function De(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",58),e.bIt("click",function(n){e.eBV(i);const a=e.XpG();return e.Njj(a.onAddLanguage(n))}),e.nrm(1,"i",59),e.EFF(2),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.i5U(4,3,"text.add_item",e.eq3(6,N,e.bMT(3,1,"text.language")))," "))}function Pe(o,l){if(1&o&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI(" ",i.agencyForm.controls.aboutUs.value," ")}}function Oe(o,l){if(1&o&&(e.j41(0,"div",24),e.nrm(1,"textarea",60),e.nI1(2,"translate"),e.k0s()),2&o){const i=e.XpG();e.Y8G("appInputViewMode",i.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(2,2,"text.input_placeholder_about_us"))}}function Ne(o,l){if(1&o&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI(" ",i.agencyForm.controls.storyAboutUs.value," ")}}function Ue(o,l){if(1&o&&(e.j41(0,"div",24),e.nrm(1,"textarea",61),e.nI1(2,"translate"),e.k0s()),2&o){const i=e.XpG();e.Y8G("appInputViewMode",i.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(2,2,"text.input_placeholder_story_about_us"))}}function Se(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",62)(1,"div",52)(2,"div",53),e.nrm(3,"span"),e.k0s(),e.j41(4,"div",54),e.EFF(5),e.k0s()(),e.j41(6,"div",56),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.onRemoveNationality())}),e.nrm(7,"i",57),e.k0s()()}if(2&o){let i,t;const n=e.XpG(2);e.R7$(3),e.HbH(null==(i=n.getCountryInfo(null==(i=n.agencyForm.get("country"))?null:i.value))?null:i.flagClass),e.R7$(2),e.SpI(" ",null==(t=n.getCountryInfo(null==(t=n.agencyForm.get("country"))?null:t.value))?null:t.name," ")}}function we(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",58),e.bIt("click",function(n){e.eBV(i);const a=e.XpG(2);return e.Njj(a.onAddNationality(n))}),e.nrm(1,"i",59),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"text.select_country")," "))}function Ve(o,l){if(1&o&&e.DNE(0,Se,8,3,"div",62)(1,we,4,3,"button",21),2&o){let i;const t=e.XpG();e.vxM(null!=(i=t.agencyForm.get("country"))&&i.value?0:1)}}function Ye(o,l){if(1&o&&(e.j41(0,"div",63)(1,"div",52)(2,"div",53),e.nrm(3,"span"),e.k0s(),e.j41(4,"div",54),e.EFF(5),e.k0s()()()),2&o){let i,t;const n=e.XpG(2);e.R7$(3),e.HbH(null==(i=n.getCountryInfo(null==(i=n.agencyForm.get("country"))?null:i.value))?null:i.flagClass),e.R7$(2),e.SpI(" ",null==(t=n.getCountryInfo(null==(t=n.agencyForm.get("country"))?null:t.value))?null:t.name," ")}}function Xe(o,l){if(1&o&&e.DNE(0,Ye,6,3,"div",63),2&o){let i;const t=e.XpG();e.vxM(null!=(i=t.agencyForm.get("country"))&&i.value?0:-1)}}function Be(o,l){1&o&&(e.j41(0,"div",51),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.must_select_province")," "))}function He(o,l){1&o&&(e.j41(0,"div",51),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.must_select_city")," "))}function Le(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",70),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$index,a=e.XpG();return e.Njj(a.onRemovePhone(n))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.delete")," "))}function ze(o,l){1&o&&(e.j41(0,"div",51),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.required")," "))}function Je(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",39)(1,"div",13)(2,"div",14),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",64)(6,"div",65)(7,"app-flag-country-selector",66),e.bIt("emitCountrySelected",function(n){const a=e.eBV(i).$index,r=e.XpG();return e.Njj(r.onSelectCountry(n,a))}),e.k0s(),e.nrm(8,"input",67),e.nI1(9,"translate"),e.nI1(10,"translate"),e.k0s(),e.j41(11,"div",68),e.DNE(12,Le,3,3,"div",69),e.k0s()(),e.DNE(13,ze,3,3,"div",17),e.k0s()()}if(2&o){const i=l.$implicit,t=l.$index,n=e.XpG();e.Y8G("formGroup",i),e.R7$(3),e.SpI(" ",e.i5U(4,7,"text.phone_loop_label",e.eq3(15,W,t+1))," "),e.R7$(3),e.Y8G("appInputViewMode",n.disabled)("ngClass",e.eq3(17,P,n.isPhoneControlInvalid(t))),e.R7$(2),e.Y8G("placeholder",e.i5U(10,12,"text.input_placeholder",e.eq3(19,O,e.bMT(9,10,"text.phone")))),e.R7$(4),e.vxM(t>0?12:-1),e.R7$(),e.Y8G("ngIf",n.isPhoneControlInvalid(t))}}function We(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",40)(1,"div",71)(2,"button",58),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onAddPhone())}),e.nrm(3,"i",59),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s()()()}2&o&&(e.R7$(4),e.SpI(" ",e.i5U(6,3,"text.add_item",e.eq3(6,N,e.bMT(5,1,"text.phone")))," "))}function Qe(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",70),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$index,a=e.XpG();return e.Njj(a.onRemoveEmail(n))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.delete")," "))}function Ze(o,l){1&o&&(e.j41(0,"div",51),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.required")," "))}function Ke(o,l){if(1&o&&(e.j41(0,"div",39)(1,"div",13)(2,"div",14),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",72)(6,"div",73),e.nrm(7,"input",74),e.nI1(8,"translate"),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",68),e.DNE(11,Qe,3,3,"div",69),e.k0s()(),e.DNE(12,Ze,3,3,"div",17),e.k0s()()),2&o){const i=l.$implicit,t=l.$index,n=e.XpG();e.Y8G("formGroup",i),e.R7$(3),e.SpI(" ",e.i5U(4,7,"text.email_loop_label",e.eq3(15,W,t+1))," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("ngClass",e.eq3(17,P,n.isEmailControlInvalid(t))),e.R7$(),e.Y8G("placeholder",e.i5U(9,12,"text.input_placeholder",e.eq3(19,O,e.bMT(8,10,"text.email")))),e.R7$(4),e.vxM(t>0?11:-1),e.R7$(),e.Y8G("ngIf",n.isEmailControlInvalid(t))}}function qe(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",40)(1,"div",71)(2,"button",58),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onAddEmail())}),e.nrm(3,"i",59),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s()()()}2&o&&(e.R7$(4),e.SpI(" ",e.i5U(6,3,"text.add_item",e.eq3(6,N,e.bMT(5,1,"text.email")))," "))}function en(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",84),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$index,a=e.XpG();return e.Njj(a.onRemoveOffice(n))}),e.nrm(1,"i",57),e.k0s()}}function nn(o,l){if(1&o){const i=e.RV6();e.j41(0,"app-flag-country-selector",66),e.bIt("emitCountrySelected",function(n){e.eBV(i);const a=e.XpG().$index,r=e.XpG();return e.Njj(r.onSelectCountry(n,null,a))}),e.k0s()}}function tn(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",48)(1,"div",75)(2,"div",76),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",77),e.DNE(6,en,2,0,"button",78),e.k0s()(),e.j41(7,"div",79)(8,"div",80)(9,"div",22)(10,"div",14),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",25)(14,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.name,n)||(a.name=n),e.Njj(n)}),e.k0s()()(),e.j41(15,"div",22)(16,"div",14),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"div",25)(20,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.address,n)||(a.address=n),e.Njj(n)}),e.k0s()()(),e.j41(21,"div",22)(22,"div",14),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"div",25)(26,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.city,n)||(a.city=n),e.Njj(n)}),e.k0s()()(),e.j41(27,"div",22)(28,"div",14),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"div",25)(32,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.postalCode,n)||(a.postalCode=n),e.Njj(n)}),e.k0s()()(),e.j41(33,"div",22)(34,"div",14),e.EFF(35," Email "),e.k0s(),e.j41(36,"div",25)(37,"input",82),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.email,n)||(a.email=n),e.Njj(n)}),e.k0s()()(),e.j41(38,"div",22)(39,"div",14),e.EFF(40),e.nI1(41,"translate"),e.k0s(),e.j41(42,"div",25),e.DNE(43,nn,1,0,"app-flag-country-selector",83),e.j41(44,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.phoneNumber,n)||(a.phoneNumber=n),e.Njj(n)}),e.k0s()()(),e.j41(45,"div",22)(46,"div",14),e.EFF(47," Web "),e.k0s(),e.j41(48,"div",25)(49,"input",81),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.web,n)||(a.web=n),e.Njj(n)}),e.k0s()()()()()()}if(2&o){const i=l.$implicit,t=l.$index,n=e.XpG();e.R7$(3),e.Lme(" ",e.bMT(4,44,"text.office")," ",t+1," "),e.R7$(3),e.Y8G("ngIf",!n.disabled),e.R7$(3),e.Y8G("appHideIfNoData",i.name)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(12,46,"text.name")," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.name),e.Y8G("ngModelOptions",e.lJ4(56,x)),e.R7$(),e.Y8G("appHideIfNoData",i.address)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(18,48,"text.address")," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.address),e.Y8G("ngModelOptions",e.lJ4(57,x)),e.R7$(),e.Y8G("appHideIfNoData",i.city)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(24,50,"text.city")," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.city),e.Y8G("ngModelOptions",e.lJ4(58,x)),e.R7$(),e.Y8G("appHideIfNoData",i.postalCode)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(30,52,"text.postal_code")," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.postalCode),e.Y8G("ngModelOptions",e.lJ4(59,x)),e.R7$(),e.Y8G("appHideIfNoData",i.email)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.email),e.Y8G("ngModelOptions",e.lJ4(60,x)),e.R7$(),e.Y8G("appHideIfNoData",i.phoneNumber)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(41,54,"text.phone")," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("ngIf",!n.disabled),e.R7$(),e.R50("ngModel",i.phoneNumber),e.Y8G("ngModelOptions",e.lJ4(61,x)),e.R7$(),e.Y8G("appHideIfNoData",i.web)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.web),e.Y8G("ngModelOptions",e.lJ4(62,x))}}function on(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",40)(1,"div",71)(2,"button",58),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onAddOffice())}),e.nrm(3,"i",59),e.EFF(4),e.nI1(5,"translate"),e.k0s()()()}2&o&&(e.R7$(4),e.SpI(" ",e.bMT(5,1,"text.add_office")," "))}let an=(()=>{var o;class l{constructor(t,n,a,r,s,u){this.fb=t,this.agencyFormService=n,this.popoverService=a,this.utils=r,this.ngZone=s,this.translate=u,this.agency=null,this.disabled=!1,this.files=[],this.agencyOffices=[{name:"Oficina Central",address:"Calle 123, Madrid",web:"www.oficinacentral.com",email:"as@gmail.com",phoneNumber:"123456789"}],this.provinceValid=!1,this.cityValid=!1}get agencyForm(){return this.agencyFormService.agencyForm}get phonesControls(){return this.agencyFormService.phones.controls}get emailsControls(){return this.agencyFormService.emails.controls}ngOnInit(){this.agency&&(this.agencyFormService.populateForm(this.agency),this.agency.languages=this.agency.languages||[],this.agencyOffices=g.cloneDeep(this.agency.agencyOffices)||[],this.disabled?setTimeout(()=>{this.disabled=!1,setTimeout(()=>{this.disabled=!0,this.syncFiles()})}):this.syncFiles());const t=this.agencyForm.get("province"),n=this.agencyForm.get("city"),a=r=>s=>r()?null:{mustSelect:!0};t.setValidators([m.k0.required,a(()=>this.provinceValid)]),n.setValidators([m.k0.required,a(()=>this.cityValid)]),n.disable(),t.updateValueAndValidity(),n.updateValueAndValidity()}ngAfterViewInit(){const t=(r,s,u)=>{const p=new google.maps.places.Autocomplete(r,s);return p.addListener("place_changed",()=>this.ngZone.run(()=>u(p.getPlace()))),p};this.provinceAutocomplete=t(this.provinceInput.nativeElement,{types:["(regions)"],componentRestrictions:{country:"es"},fields:["address_component","geometry"]},r=>{var s,u;const p=null===(s=r.address_components)||void 0===s?void 0:s.find(v=>v.types.includes("administrative_area_level_2"));if(!p)return;this.provinceValid=!0;const y=this.agencyForm.get("province");y.setValue(p.long_name),y.updateValueAndValidity(),y.setErrors(null),y.markAsPristine(),y.markAsUntouched();const _=null===(u=r.geometry)||void 0===u?void 0:u.viewport;this.agencyForm.get("city").enable(),_&&this.cityAutocomplete.setBounds(_)}),this.cityAutocomplete=t(this.cityInput.nativeElement,{types:["locality"],componentRestrictions:{country:"es"},fields:["address_component"]},r=>{var s,u;const p=null===(s=r.address_components)||void 0===s?void 0:s.find(v=>v.types.includes("locality")),y=null===(u=r.address_components)||void 0===u?void 0:u.find(v=>v.types.includes("administrative_area_level_2")),_=this.agencyForm.get("province").value;if(!p||!y||y.long_name!==_){const v=this.agencyForm.get("city");return this.cityValid=!1,v.setValue(""),v.setErrors({mustSelect:!0}),void(this.cityInput.nativeElement.value="")}this.cityValid=!0;const h=this.agencyForm.get("city");h.setValue(p.long_name),h.updateValueAndValidity(),h.setErrors(null),h.markAsPristine(),h.markAsUntouched()});const n=this.agencyForm.get("province");n.value&&(this.provinceValid=!0,this.provinceInput.nativeElement.value=n.value,n.setErrors(null),n.markAsPristine(),this.agencyForm.get("city").enable());const a=this.agencyForm.get("city");a.value&&(this.cityValid=!0,this.cityInput.nativeElement.value=a.value,a.setErrors(null),a.markAsPristine())}resetCity(){const t=this.agencyForm.get("city");this.cityValid=!1,t.reset(),t.disable()}syncFiles(){setTimeout(()=>{var t;const n={multiple:!1,size:"medium",showRemove:!this.disabled,showName:!1,rounded:!1,allowUpload:!this.disabled,accept:"image/*",files:[]};this.fileUploaderManager.config=g.cloneDeep(n),this.bannerFileUploaderManagerComponent.config=g.cloneDeep({...n,rounded:!1}),this.fileUploaderManager.createProfileFilePic(this.agency),this.bannerFileUploaderManagerComponent.createAgencyBanner(this.agency),this.fileUploaderOfficeManagers.forEach((a,r)=>{a.config=g.cloneDeep(n),a.createOfficeImage(this.agencyOffices[r])}),this.catalogFileUploaderManagerComponent.config=g.cloneDeep({...n,filesCategory:"catalog",files:null===(t=this.agency)||void 0===t||null===(t=t.agencyFiles)||void 0===t?void 0:t.filter(a=>"catalog"===a.category),accept:"image/*,application/pdf"})})}getLanguageInfo(t){return this.utils.getLanguageInfo(t)}onAddLanguage(t){var n=this;return(0,C.A)(function*(){var a,r;const s=yield n.popoverService.onShowCountrySelectorPopover(t,{languageSelector:!0,showCountryCode:!1,selectedCodes:null===(a=n.agency)||void 0===a?void 0:a.languages});null!=s&&null!==(r=s.data)&&void 0!==r&&r.country&&n.agency.languages.push(s.data.country.code)})()}onRemoveLanguage(t){this.agency.languages=this.agency.languages.filter(n=>n!==t)}onAddPhone(){this.agencyFormService.addPhone()}onRemovePhone(t){this.agencyFormService.removePhone(t)}onAddEmail(){this.agencyFormService.addEmail()}onRemoveEmail(t){this.agencyFormService.removeEmail(t)}onSelectCountry(t,n,a){null!=a?this.agencyOffices[a].phoneNumber=t.phoneCode+" ":this.agencyFormService.onSelectCountry(t,n)}onAddOffice(){this.agencyOffices.push({name:"",address:"",web:"",email:"",phoneNumber:""}),setTimeout(()=>{this.fileUploaderOfficeManagers.last.config=g.cloneDeep({multiple:!1,size:"medium",showRemove:!this.disabled,showName:!1,rounded:!0,allowUpload:!this.disabled,accept:"image/*",files:[]})})}isControlInvalid(t){const n=this.agencyForm.get(t);return!(!n||!n.invalid||!n.dirty&&!n.touched)}isPhoneControlInvalid(t){const n=this.phonesControls[t].get("phoneNumber");return!(!n||!n.invalid||!n.dirty&&!n.touched)}isEmailControlInvalid(t){const n=this.emailsControls[t].get("emailAddress");return!(!n||!n.invalid||!n.dirty&&!n.touched)}getPhoneErrorMessage(t){var n,a;const r=this.phonesControls[t].get("phoneNumber");return null!=r&&null!==(n=r.errors)&&void 0!==n&&n.required?this.translate.instant("CONTACT_FORM.CONTACT_DATA.PHONE_ERROR_REQUIRED"):null!=r&&null!==(a=r.errors)&&void 0!==a&&a.pattern?this.translate.instant("CONTACT_FORM.CONTACT_DATA.PHONE_PATTERN"):""}getEmailErrorMessage(t){var n,a;const r=this.emailsControls[t].get("emailAddress");return null!=r&&null!==(n=r.errors)&&void 0!==n&&n.required?this.translate.instant("CONTACT_FORM.CONTACT_DATA.EMAIL_ERROR_REQUIRED"):null!=r&&null!==(a=r.errors)&&void 0!==a&&a.email?this.translate.instant("CONTACT_FORM.CONTACT_DATA.EMAIL_INVALID"):""}onRemoveOffice(t){this.agencyOffices.splice(t,1)}onAddNationality(t){var n=this;return(0,C.A)(function*(){var a,r;const s=yield n.popoverService.onShowCountrySelectorPopover(t,{languageSelector:!1,showCountryCode:!1,selectedCodes:[null===(a=n.agencyForm.get("country"))||void 0===a?void 0:a.value]});null!=s&&null!==(r=s.data)&&void 0!==r&&r.country&&n.agencyForm.get("country").setValue(s.data.country.code)})()}onRemoveNationality(){this.agencyForm.get("country").setValue("")}getCountryInfo(t){return this.utils.getCountryInfo(t)}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(m.ok),e.rXU(fe),e.rXU(_e.m),e.rXU(z.T),e.rXU(e.SKi),e.rXU(M.c$))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-form"]],viewQuery:function(t,n){if(1&t&&(e.GBs(Ce,5),e.GBs(Fe,5),e.GBs(Ie,5),e.GBs(Me,5),e.GBs(Re,5),e.GBs(ke,5)),2&t){let a;e.mGM(a=e.lsd())&&(n.fileUploaderManager=a.first),e.mGM(a=e.lsd())&&(n.bannerFileUploaderManagerComponent=a.first),e.mGM(a=e.lsd())&&(n.catalogFileUploaderManagerComponent=a.first),e.mGM(a=e.lsd())&&(n.provinceInput=a.first),e.mGM(a=e.lsd())&&(n.cityInput=a.first),e.mGM(a=e.lsd())&&(n.fileUploaderOfficeManagers=a)}},inputs:{agency:"agency",disabled:"disabled"},decls:194,vars:166,consts:[["fileUploaderManagerComponent",""],["bannerFileUploaderManagerComponent",""],["catalogFileUploaderManagerComponent",""],["provinceInput",""],["cityInput",""],["type","text","autocomplete","username",2,"display","none"],["type","password","autocomplete","new-password",2,"display","none"],["autocomplete","off","novalidate","",1,"crm-boxes-user-create",3,"formGroup"],[1,"crm-box"],[1,"crm-section","size-medium-small"],["class","crm-section-smaller-title",4,"ngIf"],[1,"crm-section-title"],[1,"crm-section-inputs",3,"ngClass"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass","appInputViewMode"],["type","text","formControlName","name",3,"placeholder"],["class","crm-input-error",4,"ngIf"],[1,"crm-input","crm-input-medium"],[1,"crm-section-items"],[1,"crm-item-option","crm-item-option-lang",3,"ngClass"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary"],[1,"crm-input",3,"appHideIfNoData","disabled"],[1,"crm-text",2,"font-style","normal","color","black"],[1,"crm-input-input","crm-input-input-textarea",3,"appInputViewMode"],[1,"crm-input-input",3,"appInputViewMode"],["type","text","formControlName","legalName",3,"placeholder"],["type","number","formControlName","foundationYear",3,"placeholder"],["type","text","formControlName","nifCif",3,"placeholder"],["type","number","formControlName","annualSales",3,"placeholder"],["type","number","formControlName","annualRevenue",3,"placeholder"],["type","number","formControlName","portfolioSize",3,"placeholder"],["id","provinceInput","type","text","formControlName","province","autocomplete","off","autocorrect","off","spellcheck","false",3,"input","placeholder","disabled"],["id","cityInput","type","text","formControlName","city","autocomplete","off","autocorrect","off","spellcheck","false",3,"input","placeholder","disabled"],["type","text","formControlName","address",3,"placeholder"],["type","text","formControlName","postalCode",3,"placeholder"],[1,"crm-input-textarea",3,"appInputViewMode"],["formControlName","extraHtmlWeb","placeholder","Introduce el HTML adicional"],[1,"crm-box","crm-section"],[3,"formGroup"],[1,"crm-section-buttons-right"],[1,"crm-section-inputs-double-input"],["type","text","formControlName","webUrl",3,"placeholder"],["type","text","formControlName","facebookUrl",3,"placeholder"],["type","text","formControlName","instagramUrl",3,"placeholder"],["type","text","formControlName","linkedinUrl",3,"placeholder"],["type","text","formControlName","twitterUrl",3,"placeholder"],[1,"crm-section-inline-cards"],[1,"crm-card"],["class","crm-section-buttons-right",4,"ngIf"],[1,"crm-section-smaller-title"],[1,"crm-input-error"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[1,"crm-item-option-label"],[1,"crm-item-option-remove"],[1,"crm-item-option-remove",3,"click"],[1,"fas","fa-trash"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fas","fa-add"],["rows","5","formControlName","aboutUs",3,"placeholder"],["rows","5","formControlName","storyAboutUs",3,"placeholder"],[1,"crm-item-option","crm-item-option-lang","edit"],[1,"crm-item-option","crm-item-option-lang"],[1,"crm-input-input-and-icon"],[1,"crm-input-input",3,"appInputViewMode","ngClass"],[3,"emitCountrySelected"],["type","text","formControlName","phoneNumber",3,"placeholder"],[1,"crm-input-input-and-icon-right"],[1,"crm-text","crm-text-underline","crm-text-underline-red"],[1,"crm-text","crm-text-underline","crm-text-underline-red",3,"click"],[1,"crm-section-buttons-group"],[1,"crm-input-input-and-icon",3,"appInputViewMode"],[1,"crm-input-input",3,"ngClass"],["type","email","formControlName","emailAddress",3,"placeholder"],[1,"crm-header-modal","crm-header-modal-no-padding",2,"margin-bottom","12px"],[1,"crm-card-title"],[1,"crm-buttons-group"],["class","crm-button-icon-solo red small",3,"click",4,"ngIf"],[1,"crm-card-content"],[1,"crm-section-inputs"],["type","text",3,"ngModelChange","ngModel","ngModelOptions"],["type","email",3,"ngModelChange","ngModel","ngModelOptions"],[3,"emitCountrySelected",4,"ngIf"],[1,"crm-button-icon-solo","red","small",3,"click"]],template:function(t,n){if(1&t){const a=e.RV6();e.nrm(0,"input",5)(1,"input",6),e.j41(2,"form",7)(3,"div",8)(4,"div",9),e.DNE(5,Te,3,3,"div",10),e.nrm(6,"app-file-uploader-manager",null,0),e.DNE(8,Ae,3,3,"div",10),e.nrm(9,"app-file-uploader-manager",null,1),e.DNE(11,$e,3,3,"div",10),e.nrm(12,"app-file-uploader-manager",null,2),e.j41(14,"div",11),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"div",12)(18,"div",13)(19,"div",14),e.EFF(20),e.nI1(21,"translate"),e.k0s(),e.j41(22,"div",15),e.nrm(23,"input",16),e.nI1(24,"translate"),e.nI1(25,"translate"),e.k0s(),e.DNE(26,je,3,3,"div",17),e.k0s(),e.j41(27,"div",18)(28,"div",14),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"div",19),e.Z7z(32,Ge,7,7,"div",20,e.fX1),e.DNE(34,De,5,8,"button",21),e.k0s()(),e.j41(35,"div",22)(36,"div",14),e.EFF(37),e.nI1(38,"translate"),e.k0s(),e.DNE(39,Pe,2,1,"div",23)(40,Oe,3,4,"div",24),e.k0s(),e.j41(41,"div",22)(42,"div",14),e.EFF(43),e.nI1(44,"translate"),e.k0s(),e.DNE(45,Ne,2,1,"div",23)(46,Ue,3,4,"div",24),e.k0s()(),e.j41(47,"div",11),e.EFF(48),e.nI1(49,"translate"),e.k0s(),e.j41(50,"div",12)(51,"div",13)(52,"div",14),e.EFF(53),e.nI1(54,"translate"),e.k0s(),e.j41(55,"div",25),e.nrm(56,"input",26),e.nI1(57,"translate"),e.k0s()(),e.j41(58,"div",13)(59,"div",14),e.EFF(60),e.nI1(61,"translate"),e.k0s(),e.j41(62,"div",25),e.nrm(63,"input",27),e.nI1(64,"translate"),e.k0s()(),e.j41(65,"div",13)(66,"div",14),e.EFF(67,"NIF/CIF"),e.k0s(),e.j41(68,"div",25),e.nrm(69,"input",28),e.nI1(70,"translate"),e.k0s()(),e.j41(71,"div",13)(72,"div",14),e.EFF(73),e.nI1(74,"translate"),e.k0s(),e.j41(75,"div",25),e.nrm(76,"input",29),e.nI1(77,"translate"),e.k0s()(),e.j41(78,"div",13)(79,"div",14),e.EFF(80),e.nI1(81,"translate"),e.k0s(),e.j41(82,"div",25),e.nrm(83,"input",30),e.nI1(84,"translate"),e.k0s()(),e.j41(85,"div",13)(86,"div",14),e.EFF(87),e.nI1(88,"translate"),e.k0s(),e.j41(89,"div",25),e.nrm(90,"input",31),e.nI1(91,"translate"),e.k0s()(),e.j41(92,"div",13)(93,"div",14),e.EFF(94),e.nI1(95,"translate"),e.k0s(),e.j41(96,"div",19),e.DNE(97,Ve,2,1)(98,Xe,1,1),e.k0s()(),e.j41(99,"div",13)(100,"div",14),e.EFF(101),e.nI1(102,"translate"),e.k0s(),e.j41(103,"div",25)(104,"input",32,3),e.nI1(106,"translate"),e.bIt("input",function(){return e.eBV(a),e.Njj(n.provinceValid=!1)}),e.k0s()(),e.DNE(107,Be,3,3,"div",17),e.k0s(),e.j41(108,"div",13)(109,"div",14),e.EFF(110),e.nI1(111,"translate"),e.k0s(),e.j41(112,"div",25)(113,"input",33,4),e.nI1(115,"translate"),e.bIt("input",function(){return e.eBV(a),e.Njj(n.cityValid=!1)}),e.k0s()(),e.DNE(116,He,3,3,"div",17),e.k0s(),e.j41(117,"div",13)(118,"div",14),e.EFF(119),e.nI1(120,"translate"),e.k0s(),e.j41(121,"div",25),e.nrm(122,"input",34),e.nI1(123,"translate"),e.k0s()(),e.j41(124,"div",13)(125,"div",14),e.EFF(126),e.nI1(127,"translate"),e.k0s(),e.j41(128,"div",25),e.nrm(129,"input",35),e.nI1(130,"translate"),e.k0s()(),e.j41(131,"div",13)(132,"div",14),e.EFF(133," Html adicional para la web "),e.k0s(),e.j41(134,"div",36),e.nrm(135,"textarea",37),e.k0s()()()()(),e.j41(136,"div",38)(137,"div",11),e.EFF(138),e.nI1(139,"translate"),e.k0s(),e.j41(140,"div",12),e.Z7z(141,Je,14,21,"div",39,e.fX1),e.DNE(143,We,7,8,"div",40),e.Z7z(144,Ke,13,21,"div",39,e.fX1),e.DNE(146,qe,7,8,"div",40),e.j41(147,"div",41)(148,"div",22)(149,"div",14),e.EFF(150," Web URL "),e.k0s(),e.j41(151,"div",25),e.nrm(152,"input",42),e.nI1(153,"translate"),e.k0s()()(),e.j41(154,"div",41)(155,"div",22)(156,"div",14),e.EFF(157," Facebook URL "),e.k0s(),e.j41(158,"div",25),e.nrm(159,"input",43),e.nI1(160,"translate"),e.k0s()(),e.j41(161,"div",22)(162,"div",14),e.EFF(163," Instagram URL "),e.k0s(),e.j41(164,"div",25),e.nrm(165,"input",44),e.nI1(166,"translate"),e.k0s()()(),e.j41(167,"div",41)(168,"div",22)(169,"div",14),e.EFF(170," LinkedIn URL "),e.k0s(),e.j41(171,"div",25),e.nrm(172,"input",45),e.nI1(173,"translate"),e.k0s()(),e.j41(174,"div",22)(175,"div",14),e.EFF(176," Twitter URL "),e.k0s(),e.j41(177,"div",25),e.nrm(178,"input",46),e.nI1(179,"translate"),e.k0s()()(),e.j41(180,"div",11),e.EFF(181),e.nI1(182,"translate"),e.k0s(),e.j41(183,"div",47),e.Z7z(184,tn,50,63,"div",48,e.fX1),e.k0s(),e.DNE(186,on,6,3,"div",49),e.k0s()(),e.nrm(187,"br")(188,"br")(189,"br")(190,"br")(191,"br")(192,"br")(193,"br"),e.k0s()}if(2&t){let a,r;e.R7$(2),e.Y8G("formGroup",n.agencyForm),e.R7$(3),e.Y8G("ngIf",(null==n.agency?null:n.agency.photoUrl)||!n.disabled),e.R7$(3),e.Y8G("ngIf",(null==n.agency?null:n.agency.bannerUrl)||!n.disabled),e.R7$(3),e.Y8G("ngIf",(null==n.agency||null==n.agency.agencyFiles?null:n.agency.agencyFiles.length)>0||!n.disabled),e.R7$(4),e.SpI(" ",e.bMT(16,85,"text.general_info")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(156,D,n.disabled)),e.R7$(3),e.SpI(" ",e.bMT(21,87,"text.name")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(158,P,n.isControlInvalid("name")))("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.i5U(25,91,"text.input_placeholder",e.eq3(160,O,e.bMT(24,89,"text.name")))),e.R7$(3),e.Y8G("ngIf",n.isControlInvalid("name")),e.R7$(3),e.SpI(" ",e.bMT(30,94,"text.languages")," "),e.R7$(3),e.Dyx(null==n.agency?null:n.agency.languages),e.R7$(2),e.vxM(n.disabled?-1:34),e.R7$(),e.Y8G("appHideIfNoData",n.agencyForm.controls.aboutUs.value)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(38,96,"text.about_us_text")," "),e.R7$(2),e.vxM(n.disabled?39:40),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.storyAboutUs.value)("disabled",n.disabled),e.R7$(2),e.SpI(" ",e.bMT(44,98,"text.our_story_text")," "),e.R7$(2),e.vxM(n.disabled?45:46),e.R7$(3),e.SpI(" ",e.bMT(49,100,"text.additional_info")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(162,D,n.disabled)),e.R7$(3),e.JRh(e.bMT(54,102,"text.legal_name")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(57,104,"text.input_placeholder_legal_name")),e.R7$(4),e.JRh(e.bMT(61,106,"text.foundation_year")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(64,108,"text.input_placeholder_foundations_year")),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(70,110,"text.input_placeholder_nif_cif")),e.R7$(4),e.JRh(e.bMT(74,112,"text.annual_sales")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(77,114,"text.input_placeholder_annuals_sales")),e.R7$(4),e.JRh(e.bMT(81,116,"text.annual_revenue")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(84,118,"text.input_placeholder_annuals_revenue")),e.R7$(4),e.JRh(e.bMT(88,120,"text.portfolio_sizee")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(91,122,"text.input_placeholder_portfolio_size")),e.R7$(4),e.SpI(" ",e.bMT(95,124,"text.country")," "),e.R7$(3),e.vxM(n.disabled?98:97),e.R7$(4),e.JRh(e.bMT(102,126,"text.province")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(106,128,"text.input_placeholder_province"))("disabled",n.disabled),e.R7$(3),e.Y8G("ngIf",null==(a=n.agencyForm.get("province"))?null:a.hasError("mustSelect")),e.R7$(3),e.JRh(e.bMT(111,130,"text.city")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled||!n.provinceValid),e.R7$(),e.Y8G("placeholder",e.bMT(115,132,"text.input_placeholder_city"))("disabled",n.disabled||!n.provinceValid),e.R7$(3),e.Y8G("ngIf",null==(r=n.agencyForm.get("city"))?null:r.hasError("mustSelect")),e.R7$(3),e.JRh(e.bMT(120,134,"text.address")),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(123,136,"text.input_placeholder_address")),e.R7$(4),e.SpI("",e.bMT(127,138,"text.postal_code"),"C\xf3digo Postal"),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(130,140,"text.input_placeholder_city")),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(4),e.SpI(" ",e.bMT(139,142,"text.contact_info")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(164,D,n.disabled)),e.R7$(),e.Dyx(n.phonesControls),e.R7$(2),e.vxM(n.disabled?-1:143),e.R7$(),e.Dyx(n.emailsControls),e.R7$(2),e.vxM(n.disabled?-1:146),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.webUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(153,144,"CONTACT_FORM.CONTACT_DATA.URL_FACEBOOK_PLACEHOLDER")),e.R7$(3),e.Y8G("appHideIfNoData",n.agencyForm.controls.facebookUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(160,146,"CONTACT_FORM.CONTACT_DATA.URL_FACEBOOK_PLACEHOLDER")),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.instagramUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(166,148,"CONTACT_FORM.CONTACT_DATA.URL_INSTAGRAM_PLACEHOLDER")),e.R7$(3),e.Y8G("appHideIfNoData",n.agencyForm.controls.linkedinUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(173,150,"CONTACT_FORM.CONTACT_DATA.URL_LINKEDIN_PLACEHOLDER")),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.twitterUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(179,152,"CONTACT_FORM.CONTACT_DATA.URL_LINKEDIN_PLACEHOLDER")),e.R7$(3),e.SpI(" ",e.bMT(182,154,"text.offices")," "),e.R7$(3),e.Dyx(n.agencyOffices),e.R7$(2),e.Y8G("ngIf",!n.disabled)}},dependencies:[b.YU,b.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.j4,m.JD,m.vS,ve.Z,be.M,J.F,he.S,M.D9]}),l})();const ln=["agencyForm"];function rn(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.onSaveUser())}),e.nrm(1,"i",7),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"text.save")," "))}function sn(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.onEditUser())}),e.nrm(1,"i",9),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"text.edit")," "))}function cn(o,l){if(1&o&&e.DNE(0,rn,4,3,"button",4)(1,sn,4,3,"button",5),2&o){const i=e.XpG();e.vxM(i.editing?0:1)}}let dn=(()=>{var o;class l{constructor(t,n,a,r){this.api=t,this.toastService=n,this.state=a,this.translate=r,this.agency=null,this.reloadData=new e.bkB,this.files=[],this.editing=!1}ngOnInit(){this.getState(),console.log("LA AGENCIA EN EL INFO",this.agency)}getState(){this.state.getState().subscribe(t=>{this.currentUser=t.user})}onSaveUser(){var t=this;return(0,C.A)(function*(){var n,a,r,s,u;let p={...t.agency,...t.agencyForm.agencyForm.value};p=yield t.agencyForm.fileUploaderManager.processProfilePic(p),p=yield t.agencyForm.bannerFileUploaderManagerComponent.processAgencyBanner(p),p.phones=p.phones.map(d=>d.phoneNumber),p.emails=p.emails.map(d=>d.emailAddress),p.agencyOffices=yield t.updateAgencyOffices(g.cloneDeep(t.agencyForm.agencyOffices)),null===(n=p)||void 0===n||delete n.promotions,null===(a=p)||void 0===a||delete a.agencyFiles,null===(r=p)||void 0===r||delete r.users,null===(s=p)||void 0===s||delete s.documents;let y=g.cloneDeep(p);y.extraHtmlWeb=t.agencyForm.agencyForm.value.extraHtmlWeb,y.extraHtmlWeb=y.extraHtmlWeb?btoa(y.extraHtmlWeb):"";const _=yield t.api.updateAgencyById(p.id,y);let h=g.cloneDeep(null===(u=t.agencyForm)||void 0===u||null===(u=u.catalogFileUploaderManagerComponent)||void 0===u||null===(u=u.config)||void 0===u?void 0:u.files)||[];for(let d of h){if(null!=d&&d.new){var v,F;const f={agencyId:null===(v=t.agency)||void 0===v?void 0:v.id,name:"",category:d.category,label:d.label,orderIndex:null==d?void 0:d.orderIndex},R=yield t.api.uploadFile(d.fileBlob),A=null==R||null===(F=R.success)||void 0===F||null===(F=F.data)||void 0===F?void 0:F.fileName;f.name=A,yield t.api.createAgencyFiles(f)}if(null!=d&&d.deleted&&(yield t.api.deleteAgencyFilesById(null==d?void 0:d.id)),null!=d&&d.moved&&(null==d||!d.deleted)&&(null==d||!d.new)){let f=g.cloneDeep(d);delete f.moved,delete f.fileBase64,delete f.fileBlob,delete f.new,delete f.deleted,delete f.size,delete f.type,yield t.api.updateAgencyFilesById(null==f?void 0:f.id,f)}}null!=_&&_.success?t.toastService.showSuccessToast(t.translate.instant("text.agency_update_success")):t.toastService.showErrorToast(t.translate.instant("text.agency_update_error")),t.editing=!1,t.agencyForm.fileUploaderManager.setEditingMode(!1),t.agencyForm.bannerFileUploaderManagerComponent.setEditingMode(!1),t.agencyForm.fileUploaderOfficeManagers.forEach((d,f)=>{d.setEditingMode(!1)}),t.agencyForm.catalogFileUploaderManagerComponent.setEditingMode(!1),t.reloadData.emit()})()}updateAgencyOffices(t){return(0,C.A)(function*(){return t})()}onEditUser(){this.editing=!0,this.agencyForm.fileUploaderManager.setEditingMode(!0),this.agencyForm.bannerFileUploaderManagerComponent.setEditingMode(!0),this.agencyForm.fileUploaderOfficeManagers.forEach((t,n)=>{t.setEditingMode(!0)}),this.agencyForm.catalogFileUploaderManagerComponent.setEditingMode(!0)}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(E.i),e.rXU(H.f),e.rXU(G.c),e.rXU(M.c$))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-details-info"]],viewQuery:function(t,n){if(1&t&&e.GBs(ln,5),2&t){let a;e.mGM(a=e.lsd())&&(n.agencyForm=a.first)}},inputs:{agency:"agency"},outputs:{reloadData:"reloadData"},decls:6,vars:3,consts:[["agencyForm",""],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[3,"agency","disabled"],[1,"crm-button"],[1,"crm-button-secondary","crm-button-secondary-primary"],[1,"crm-button",3,"click"],[1,"fa","fa-check"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fa","fa-edit"]],template:function(t,n){1&t&&(e.j41(0,"div",1),e.nrm(1,"div"),e.j41(2,"div",2),e.DNE(3,cn,2,1),e.k0s()(),e.nrm(4,"app-agency-form",3,0)),2&t&&(e.R7$(3),e.vxM("agency"===(null==n.currentUser?null:n.currentUser.accountType)?3:-1),e.R7$(),e.Y8G("agency",n.agency)("disabled",!n.editing))},dependencies:[an,M.D9]}),l})();const pn=o=>({"crm-block-body-blue-content-no-padding":o}),U=o=>({fatherObj:o,type:"agency"}),un=()=>({type:"agencyFolder"});function gn(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",5)(1,"app-agency-details-presentation",7),e.bIt("reloadData",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.ngOnInit())}),e.k0s()()}if(2&o){const i=e.XpG(2);e.R7$(),e.Y8G("agency",i.agency)}}function mn(o,l){if(1&o&&e.nrm(0,"app-dashboard",8),2&o){const i=e.XpG(3);e.Y8G("isMainPage",!1)("isAgency",!0)("options",i.agencyDashboardOptions)}}function yn(o,l){if(1&o){const i=e.RV6();e.j41(0,"app-agency-details-info",7),e.bIt("reloadData",function(){e.eBV(i);const n=e.XpG(3);return e.Njj(n.ngOnInit())}),e.k0s()}if(2&o){const i=e.XpG(3);e.Y8G("agency",i.agency)}}function fn(o,l){if(1&o&&e.nrm(0,"app-users-list",10),2&o){const i=e.XpG(3);e.Y8G("options",e.eq3(1,U,i.agency))}}function _n(o,l){if(1&o&&e.nrm(0,"app-operations-list",10),2&o){const i=e.XpG(3);e.Y8G("options",e.eq3(1,U,i.agency))}}function vn(o,l){if(1&o&&e.nrm(0,"app-file-explorer",11),2&o){const i=e.XpG(3);e.Y8G("options",e.lJ4(2,un))("directoryBaseElement",i.agencyFolder)}}function bn(o,l){if(1&o&&e.nrm(0,"app-registers-list",10),2&o){const i=e.XpG(3);e.Y8G("options",e.eq3(1,U,i.agency))}}function hn(o,l){if(1&o&&(e.j41(0,"div",6),e.DNE(1,mn,1,3,"app-dashboard",8)(2,yn,1,1,"app-agency-details-info",9)(3,fn,1,3,"app-users-list",10)(4,_n,1,3,"app-operations-list",10)(5,vn,1,3,"app-file-explorer",11)(6,bn,1,3,"app-registers-list",10),e.k0s()),2&o){const i=e.XpG(2);e.Y8G("ngClass",e.eq3(7,pn,"users"===i.activeTab||"operations"===i.activeTab||"registers"===i.activeTab)),e.R7$(),e.vxM("agency_dashboard"===i.activeTab?1:-1),e.R7$(),e.vxM("info"===i.activeTab?2:-1),e.R7$(),e.vxM("users"===i.activeTab?3:-1),e.R7$(),e.vxM("operations"===i.activeTab?4:-1),e.R7$(),e.vxM("files"===i.activeTab?5:-1),e.R7$(),e.vxM("registers"===i.activeTab?6:-1)}}function Cn(o,l){if(1&o&&e.DNE(0,gn,2,1,"div",5)(1,hn,7,9,"div",6),2&o){const i=e.XpG();e.vxM("presentation"===i.activeTab?0:1)}}const Fn=[{path:"",component:(()=>{var o;class l{constructor(t,n,a,r,s,u,p){this.activatedRoute=t,this.toastService=n,this.headerService=a,this.router=r,this.api=s,this.byvaroState=u,this.translate=p,this.agencyParameterId=null,this.agency=null,this.activeTab="info",this.agencyTabs=[],this.baseTabs=[{id:"3",title:"presentation",active:!0},{id:"7",title:"agency_dashboard",active:!0},{id:"1",title:"info",active:!1},{id:"2",title:"users",active:!1},{id:"4",title:"operations",active:!1},{id:"5",title:"files",active:!1},{id:"6",title:"registers",active:!1}],this.agencyDashboardOptions={},this.currentUser=null,this.agencyFolder=null}ngOnInit(){var t=this;return(0,C.A)(function*(){if(t.agencyParameterId=t.activatedRoute.snapshot.paramMap.get("id"),t.agencyDashboardOptions={agencyId:t.agencyParameterId},t.byvaroState.getState().subscribe(r=>{t.currentUser=r.user}),"mine"===t.agencyParameterId){var n;t.agencyTabs=t.baseTabs;const r=yield t.api.getCurrentAgency();if(null!=r&&null!==(n=r.success)&&void 0!==n&&n.data){var a;t.agency=r.success.data;let u={},p=null,y={page:0,itemsPerPage:50};const _=yield t.api.getUser(u,p,y);null!=_&&null!==(a=_.success)&&void 0!==a&&a.data&&(t.agency.users=_.success.data)}}else t.agencyTabs=t.baseTabs.filter(r=>"1"!==r.id),yield t.getData();t.agencyFolder={type:"agency_folder",name:"Agencia",parent:t.agency}})()}ionViewWillEnter(){this.headerService.setConfig({title:"agency_details"})}getData(){var t=this;return(0,C.A)(function*(){if(t.agency=yield t.getAgencyById(),console.log("agency",t.agency),!t.agency)return t.toastService.showToast({text:t.translate.instant("text.agency_not_found"),icon:"fas fa-exclamation-triangle",theme:"red",time:3e3}),void t.router.navigate(["/promoters"])})()}getAgencyById(){var t=this;return(0,C.A)(function*(){var n,a;if(!t.agencyParameterId)return null;const r=yield t.api.getAgency({id:{equals:t.agencyParameterId}},null,null,{promotions:{apply:!0}});r.error&&t.toastService.showToast({text:t.translate.instant("text.agency_read_error"),icon:"fas fa-exclamation-triangle",theme:"red",time:3e3});const[s]=null==r||null===(n=r.success)||void 0===n?void 0:n.data,u=yield t.api.getUsersOfAccount(s.id);return s.users=(null===(a=u.success)||void 0===a?void 0:a.data)||[],s})()}onEditAgency(){var t=this;return(0,C.A)(function*(){var n;const a=g.cloneDeep(t.agency);null==a||delete a.promotions,null==a||delete a.users,null==a||delete a.agencyFiles,null==a||delete a.agencyInvitationToPromotions,console.log("agencyToEdit",a),a.officesCount=(null===(n=a.offices)||void 0===n?void 0:n.length)||0,(yield t.api.updateAgencyById(t.agencyParameterId,a)).success?t.toastService.showToast({text:t.translate.instant("text.updated_successfully"),theme:"success",time:2e3}):t.toastService.showToast({text:t.translate.instant("text.agency_update_errors"),icon:"fas fa-exclamation-triangle",theme:"red",time:3e3})})()}onTabClicked(t){this.activeTab=t}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(k.nX),e.rXU(H.f),e.rXU(K.d),e.rXU(k.Ix),e.rXU(E.i),e.rXU(G.c),e.rXU(M.c$))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-details"]],decls:6,vars:2,consts:[[1,"crm-block-body"],[1,"crm-block-body-fixed"],[1,"crm-block-details-header"],[1,"crm-block-details-bottom"],[3,"tabClicked","tabs"],[1,"crm-block-body-blue-content",2,"padding","0"],[1,"crm-block-body-blue-content",3,"ngClass"],[3,"reloadData","agency"],[3,"isMainPage","isAgency","options"],[3,"agency"],[3,"options"],[3,"options","directoryBaseElement"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-tabs",4),e.bIt("tabClicked",function(r){return n.onTabClicked(r)}),e.k0s()()()(),e.DNE(5,Cn,2,1),e.k0s()),2&t&&(e.R7$(4),e.Y8G("tabs",n.agencyTabs),e.R7$(),e.vxM(null!=n.agency&&n.agency.id?5:-1))},dependencies:[b.YU,L.O,q.s,pe,ue.Q,ge.b,me.c,ye.G,dn]}),l})()}];let In=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[k.iI.forChild(Fn),k.iI]}),l})();var Q=c(2652),Mn=c(6812);let Rn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[b.MD,m.X1,m.YN,M.h,Mn.u,I.bv,Q.T,J.F]}),l})();var kn=c(4831),xn=c(3263),Tn=c(9662),An=c(7991);let $n=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[b.MD,I.bv,m.X1,xn.l,Tn.Y,An.S,M.h]}),l})();var jn=c(5166),En=c(8284),Gn=c(1362),Dn=c(1414);let Pn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[b.MD,m.YN,I.bv,In,L.O,Q.T,M.h,Rn,kn.UsersListPageModule,$n,jn.OperationsListPageModule,En.o,Gn.RegistersListPageModule,Dn.DashboardPageModule]}),l})()}}]);