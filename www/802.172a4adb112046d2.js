"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[802],{802:(Y,S,r)=>{r.r(S),r.d(S,{AgenciesListPageModule:()=>R});var y=r(177),x=r(9417),k=r(9465),A=r(517),n=r(8564),m=r(3953);const L=[{path:"",component:n.F}];let T=(()=>{var s;class u{}return(s=u).\u0275fac=function(P){return new(P||s)},s.\u0275mod=m.$C({type:s}),s.\u0275inj=m.G2t({imports:[A.iI.forChild(L),A.iI]}),u})(),M=(()=>{var s;class u{}return(s=u).\u0275fac=function(P){return new(P||s)},s.\u0275mod=m.$C({type:s}),s.\u0275inj=m.G2t({imports:[y.MD,x.YN,x.X1,k.bv]}),u})();var O=r(5603);let R=(()=>{var s;class u{}return(s=u).\u0275fac=function(P){return new(P||s)},s.\u0275mod=m.$C({type:s}),s.\u0275inj=m.G2t({imports:[y.MD,x.YN,k.bv,T,M,O.P]}),u})()},8564:(Y,S,r)=>{r.d(S,{F:()=>fn});var y=r(467),x=r(1413),k=r(7944),A=r(7376),n=r(3953),m=r(517),L=r(8397),T=r(4501),M=r(9465),O=r(6039),R=r(1213),s=r(177),u=r(6552);function C(e,a){if(1&e&&n.nrm(0,"span",26),2&e){let t;const o=n.XpG().$implicit,i=n.XpG(3);n.HbH(null==(t=i.utils.getLanguageInfo(o))?null:t.flagClass)}}function P(e,a){if(1&e&&(n.qex(0),n.DNE(1,C,1,2,"span",25),n.bVm()),2&e){const t=a.index;n.R7$(),n.Y8G("ngIf",t<3)}}function B(e,a){if(1&e&&(n.j41(0,"span",27),n.EFF(1),n.k0s()),2&e){const t=n.XpG(3);n.R7$(),n.SpI(" +",t.agency.languages.length-3," ")}}function z(e,a){if(1&e&&(n.j41(0,"div",22),n.DNE(1,P,2,1,"ng-container",23)(2,B,2,1,"span",24),n.k0s()),2&e){const t=n.XpG(2);n.R7$(),n.Y8G("ngForOf",t.agency.languages),n.R7$(),n.Y8G("ngIf",t.agency.languages.length>3)}}function U(e,a){1&e&&(n.j41(0,"div",28),n.EFF(1," Sin idiomas "),n.k0s())}function w(e,a){1&e&&(n.j41(0,"button",19),n.EFF(1," Pendiente "),n.nrm(2,"i",29),n.k0s())}function W(e,a){1&e&&(n.j41(0,"button",20),n.EFF(1," Colaborador "),n.nrm(2,"i",30),n.k0s())}function H(e,a){if(1&e){const t=n.RV6();n.j41(0,"button",31),n.bIt("click",function(i){n.eBV(t);const c=n.XpG(2);return n.Njj(c.onInviteAgencyClick(i))}),n.nrm(1,"i",32),n.EFF(2," Invitar agencia "),n.k0s()}}function Z(e,a){if(1&e){const t=n.RV6();n.j41(0,"div",3),n.bIt("click",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.onNavigateToAgency())}),n.j41(1,"div",4),n.nrm(2,"img",5),n.j41(3,"div",6)(4,"div",7)(5,"span",8),n.EFF(6),n.k0s()(),n.j41(7,"div",9),n.EFF(8),n.k0s(),n.DNE(9,z,3,2,"div",10)(10,U,2,0,"ng-template",null,0,n.C5r),n.k0s()(),n.j41(12,"div",11),n.EFF(13),n.k0s(),n.nrm(14,"div",12),n.j41(15,"div",13)(16,"div",14),n.nrm(17,"i",15),n.j41(18,"span"),n.EFF(19),n.k0s()(),n.j41(20,"div",14),n.nrm(21,"i",16),n.j41(22,"span"),n.EFF(23),n.k0s()(),n.j41(24,"div",14),n.nrm(25,"i",17),n.j41(26,"span"),n.EFF(27,"Operaciones"),n.k0s()()(),n.j41(28,"div",18),n.DNE(29,w,3,0,"button",19)(30,W,3,0,"button",20)(31,H,3,0,"button",21),n.k0s()()}if(2&e){const t=n.sdS(11),o=n.XpG();n.R7$(2),n.FS9("alt",null==o.agency?null:o.agency.name),n.Y8G("src",(null==o.agency?null:o.agency.photoUrl)||"assets/images/building.png",n.B4B),n.R7$(4),n.JRh(null==o.agency?null:o.agency.name),n.R7$(2),n.Lme(" ",(null==o.agency?null:o.agency.city)||"Valencia"," / ",(null==o.agency?null:o.agency.country)||"Spain"," "),n.R7$(),n.Y8G("ngIf",(null==o.agency||null==o.agency.languages?null:o.agency.languages.length)>0)("ngIfElse",t),n.R7$(4),n.Lme(" Promociones compartidas: ",(null==o.agency||null==o.agency.promotions?null:o.agency.promotions.length)||0," / ",o.promoterPromotions||0," "),n.R7$(6),n.SpI("Oificinas: ",(null==o.agency||null==o.agency.offices?null:o.agency.offices.length)||0,""),n.R7$(4),n.SpI("Agentes: ",(null==o.agency?null:o.agency.agentsCount)||0,""),n.R7$(6),n.vxM("pending"===(null==o.options?null:o.options.invitationStatus)?29:"collaborator"===(null==o.options?null:o.options.invitationStatus)?30:31)}}function J(e,a){1&e&&(n.j41(0,"div",2)(1,"div",4),n.nrm(2,"div",33),n.j41(3,"div",6),n.nrm(4,"div",34)(5,"div",35)(6,"div",36),n.k0s()(),n.nrm(7,"div",37)(8,"div",38),n.j41(9,"div",13),n.nrm(10,"div",39)(11,"div",39)(12,"div",39),n.k0s(),n.nrm(13,"div",40),n.k0s())}let K=(()=>{var e;class a{constructor(o,i){this.router=o,this.utils=i,this.promoterPromotions=0,this.inviteAgencyClick=new n.bkB}ngOnInit(){console.log(this.options)}onInviteAgencyClick(o){o.stopPropagation(),o.preventDefault(),this.inviteAgencyClick.emit({agency:this.agency,options:this.options})}onNavigateToAgency(){this.router.navigate([`/agencies/${this.agency.id}`])}}return(e=a).\u0275fac=function(o){return new(o||e)(n.rXU(m.Ix),n.rXU(u.T))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-card-agency"]],inputs:{agency:"agency",isSkeleton:"isSkeleton",options:"options",promoterPromotions:"promoterPromotions"},outputs:{inviteAgencyClick:"inviteAgencyClick"},decls:2,vars:1,consts:[["noLangs",""],[1,"collaboration-card"],[1,"collaboration-card","collaboration-card--skeleton"],[1,"collaboration-card",3,"click"],[1,"collaboration-card__header"],[1,"collaboration-card__logo",3,"src","alt"],[1,"collaboration-card__info"],[1,"collaboration-card__top-row"],[1,"collaboration-card__name"],[1,"collaboration-card__location"],["class","collaboration-card__languages",4,"ngIf","ngIfElse"],[1,"collaboration-card__shared"],[1,"collaboration-card__divider"],[1,"collaboration-card__meta"],[1,"collaboration-card__meta-item"],[1,"fas","fa-building"],[1,"fas","fa-user"],[1,"fas","fa-chart-line"],[1,"collaboration-card__footer",2,"margin-top","8px"],[1,"collaboration-card__button","collaboration-card__button--pending"],[1,"collaboration-card__button","collaboration-card__button--collaborator"],[1,"crm-button",2,"width","100%","justify-content","center"],[1,"collaboration-card__languages"],[4,"ngFor","ngForOf"],["class","collaboration-card__flag-plus",4,"ngIf"],["class","collaboration-card__flag",3,"class",4,"ngIf"],[1,"collaboration-card__flag"],[1,"collaboration-card__flag-plus"],[1,"collaboration-card__languages-empty"],[1,"fas","fa-clock"],[1,"fas","fa-check-circle"],[1,"crm-button",2,"width","100%","justify-content","center",3,"click"],[1,"fas","fa-add"],[1,"collaboration-card__logo","skeleton-block"],[1,"collaboration-card__top-row","skeleton-block"],[1,"collaboration-card__location","skeleton-block"],[1,"collaboration-card__languages","skeleton-block"],[1,"collaboration-card__shared","skeleton-block"],[1,"collaboration-card__divider","skeleton-block"],[1,"collaboration-card__meta-item","skeleton-block"],[1,"collaboration-card__footer","skeleton-block"]],template:function(o,i){1&o&&n.DNE(0,Z,32,12,"div",1)(1,J,14,0,"div",2),2&o&&n.vxM(i.isSkeleton?1:0)},dependencies:[s.Sq,s.bT],styles:[".collaboration-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #eaeaea;border-radius:12px;padding:16px;width:340px;box-sizing:border-box;display:flex;flex-direction:column;cursor:pointer;position:relative}.collaboration-card__header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.collaboration-card__logo[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;object-fit:cover;flex-shrink:0}.collaboration-card__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.collaboration-card__top-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.collaboration-card__name[_ngcontent-%COMP%]{font-size:15px;font-weight:600;margin-bottom:4px;color:#111}.collaboration-card__verified[_ngcontent-%COMP%]{font-size:14px;color:#1890ff;display:inline-flex;align-items:center}.collaboration-card__location[_ngcontent-%COMP%]{font-size:14px;color:#888}.collaboration-card__languages[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.collaboration-card__languages[_ngcontent-%COMP%]   .collaboration-card__flag[_ngcontent-%COMP%]{width:20px;height:14px;border-radius:2px;background-size:cover;background-position:center}.collaboration-card__languages[_ngcontent-%COMP%]   .collaboration-card__flag-plus[_ngcontent-%COMP%]{font-size:13px;color:#666}.collaboration-card__languages-empty[_ngcontent-%COMP%]{font-size:13px;color:#999}.collaboration-card__shared[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#333;font-weight:500}.collaboration-card__divider[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#eaeaea;border:none;margin:12px 0}.collaboration-card__meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:12px}.collaboration-card__meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#666}.collaboration-card__meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px}.collaboration-card__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:8px;margin-top:auto}.collaboration-card__chip[_ngcontent-%COMP%]{font-size:13px;padding:4px 8px;border-radius:6px;display:inline-flex;align-items:center;gap:4px}.collaboration-card__chip--warning[_ngcontent-%COMP%]{background-color:#fff8e6;color:#e69900;border:1px solid #ffe5b4}.collaboration-card__button[_ngcontent-%COMP%]{font-size:14px;border-radius:4px;padding:6px 12px;outline:none;cursor:pointer;display:inline-flex;align-items:center;gap:8px;border:1px solid transparent}.collaboration-card__button--collaborator[_ngcontent-%COMP%]{background-color:#ecf2ff;color:#3a50e4}.collaboration-card__button--pending[_ngcontent-%COMP%]{background-color:#fbf4ec;color:#e49d3a}.collaboration-card__button--invite[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff}.collaboration-card--skeleton[_ngcontent-%COMP%]{pointer-events:none}.collaboration-card--skeleton[_ngcontent-%COMP%]   .skeleton-block[_ngcontent-%COMP%]{background-color:#eee;border-radius:4px;width:100%;height:16px}.collaboration-card--skeleton__logo.skeleton-block[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%}.collaboration-card--skeleton__divider.skeleton-block[_ngcontent-%COMP%]{height:1px;margin:12px 0}.collaboration-card--skeleton__footer.skeleton-block[_ngcontent-%COMP%]{height:24px;width:100px}"]}),a})();var Q=r(6580);const q=e=>({"crm-block-body-fixed":e}),nn=e=>({"crm-button-secondary-primary":e}),X=(e,a,t,o,i)=>({pageStartIndex:e,pageEndIndex:a,totalCount:t,paginationPage:o,sortField:i}),on=e=>({active:e}),tn=(e,a)=>({"background-color":e,border:a});function en(e,a){if(1&e){const t=n.RV6();n.j41(0,"button",16),n.bIt("click",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.onInviteAgencies())}),n.nrm(1,"i",17),n.EFF(2," Invitar agencia "),n.k0s()}}function an(e,a){1&e&&(n.nrm(0,"i",18),n.EFF(1," Cerrar filtros "))}function ln(e,a){1&e&&(n.nrm(0,"i",19),n.EFF(1," Filtros activados "))}function rn(e,a){1&e&&(n.nrm(0,"i",19),n.EFF(1," Filtrar "))}function sn(e,a){if(1&e&&n.DNE(0,ln,2,0)(1,rn,2,0),2&e){const t=n.XpG();n.vxM(t.filters?0:1)}}function cn(e,a){if(1&e){const t=n.RV6();n.j41(0,"app-list-pagination-selectors",20),n.bIt("goPreviousPage",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.onGoPreviousPage())})("goNextPage",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.onGoNextPage())})("sort",function(i){n.eBV(t);const c=n.XpG();return n.Njj(c.onSort(i))}),n.k0s()}if(2&e){const t=n.XpG();n.Y8G("listPaginationConfig",n.s1E(1,X,t.updatePagination().startIndex,t.updatePagination().endIndex,t.allSystemAgenciesCount,t.pagination.page+1,null!=t.sort&&t.sort.field?(null==t.sort?null:t.sort.field)+" "+(null==t.sort?null:t.sort.order):"Fecha de creaci\xf3n"))}}function gn(e,a){if(1&e){const t=n.RV6();n.j41(0,"div",13)(1,"app-list-pagination-selectors",20),n.bIt("goPreviousPage",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.onGoPreviousPage())})("goNextPage",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.onGoNextPage())})("sort",function(i){n.eBV(t);const c=n.XpG();return n.Njj(c.onSort(i))}),n.k0s()()}if(2&e){const t=n.XpG();n.R7$(),n.Y8G("listPaginationConfig",n.s1E(1,X,t.updatePagination().startIndex,t.updatePagination().endIndex,t.allSystemAgenciesCount,t.pagination.page+1,null!=t.sort&&t.sort.field?(null==t.sort?null:t.sort.field)+" "+(null==t.sort?null:t.sort.order):"Fecha de creaci\xf3n"))}}function dn(e,a){1&e&&(n.j41(0,"div",15),n.nrm(1,"app-card-agency",21)(2,"app-card-agency",21)(3,"app-card-agency",21),n.k0s()),2&e&&(n.R7$(),n.Y8G("isSkeleton",!0),n.R7$(),n.Y8G("isSkeleton",!0),n.R7$(),n.Y8G("isSkeleton",!0))}function pn(e,a){if(1&e&&n.EFF(0),2&e){const t=n.XpG().$implicit;n.SpI(" (",null==t?null:t.count,") ")}}function un(e,a){if(1&e){const t=n.RV6();n.j41(0,"div",25),n.bIt("click",function(){const i=n.eBV(t).$implicit,c=n.XpG(2);return n.Njj(c.onClickAgencyRelation(i))}),n.j41(1,"div",26),n.EFF(2),n.DNE(3,pn,1,1),n.nrm(4,"div",27),n.k0s()()}if(2&e){const t=a.$implicit;n.Y8G("ngClass",n.eq3(4,on,null==t?null:t.isSelected)),n.R7$(2),n.SpI(" ",null==t?null:t.title," "),n.R7$(),n.vxM(null!==(null==t?null:t.count)?3:-1),n.R7$(),n.Y8G("ngStyle",n.l_i(6,tn,null==t?null:t.color,"1px solid "+(null==t?null:t.color)))}}function _n(e,a){if(1&e){const t=n.RV6();n.j41(0,"app-card-agency",28),n.bIt("inviteAgencyClick",function(i){n.eBV(t);const c=n.XpG(2);return n.Njj(c.onInviteAgencyClick(i))}),n.k0s()}if(2&e){const t=a.$implicit,o=n.XpG(2);n.Y8G("promoterPromotions",o.promoterPromotions)("agency",t)("options",t.agencyCardOptions)}}function mn(e,a){if(1&e&&(n.j41(0,"div",22),n.Z7z(1,un,5,9,"div",23,n.fX1),n.k0s(),n.j41(3,"div",15),n.Z7z(4,_n,1,3,"app-card-agency",24,n.fX1),n.k0s()),2&e){const t=n.XpG();n.R7$(),n.Dyx(t.agencyRelations),n.R7$(3),n.Dyx(t.agencies)}}let fn=(()=>{var e;class a{constructor(o,i,c,g,d,p){this.router=o,this.toastService=i,this.headerService=c,this.modalCtrl=g,this.api=d,this.state=p,this.promotion=null,this.agenciesAlreadyLinked=[],this.agenciesNotLinked=[],this.agencies=[],this.allSystemAgenciesCount=0,this.searchString="",this.searchSubject=new x.B,this.agencyCardOptions={type:"globalAgencies"},this.aside={type:"filters",visible:!1},this.agencyRelations=[{id:"agencias-colaboradoras",title:"Agencias colaboradoras",subtitle:"",color:"#4CAF50",isSelected:null,count:0},{id:"agencias-no-colaboradoras",title:"Agencias no colaboradoras",subtitle:"",color:"#FF9800",isSelected:null,count:null}],this.filters=null,this.sort=null,this.pagination={page:0,itemsPerPage:25},this.promoterPromotions=0,this.loadingList=!1}ngOnInit(){this.getState(),this.getData()}ionViewWillEnter(){this.promotion?this.agencyCardOptions.type="promotionAgencies":this.headerService.setConfig({title:"agencies"})}getState(){this.state.getState().subscribe(o=>{this.currentUser=o.user,this.currentPromoter=o.promoter})}onInviteAgencies(){var o=this;return(0,y.A)(function*(){yield(yield o.modalCtrl.create({component:k.v,cssClass:"modal-invite-agency"})).present()})()}onSearchInputChange(o){this.searchSubject.next(o.target.value)}onSearchChanged(o){this.searchString=o}onToggleAside(){this.aside.visible=!this.aside.visible}onGoNextPage(){(this.pagination.page+1)*this.pagination.itemsPerPage<this.allSystemAgenciesCount&&(this.pagination.page++,this.getData())}onGoPreviousPage(){this.pagination.page>0&&(this.pagination.page--,this.getData())}onInviteAgencyClick(o){var i=this;return(0,y.A)(function*(){const{agency:c,options:g}=o;if("globalAgencies"===g.type)yield(yield i.modalCtrl.create({component:k.v,cssClass:"modal-invite-agency",componentProps:{agencyCardOpen:c}})).present();else if("promotionAgencies"===g.type){const d=g.promotion;let p={status:"pending",type:"register",agencyEmail:c.email,agencyId:c.id};const f=(yield i.api.createAgencyInvitationToPromotions(p)).success.data,v=[d.id],h=yield i.api.addPromotionsToAgencyInvitationToPromotions(v,f.id);if(h.error)return void i.toastService.showErrorToast("Ha ocurrido un error al invitar la agencia."+h.error.errorMessage);i.toastService.showSuccessToast("Agencia invitada correctamente"),i.getData()}})()}onClickAgencyRelation(o){o.isSelected=!o.isSelected,this.getData()}updatePagination(){return{startIndex:this.pagination.page*this.pagination.itemsPerPage+1,endIndex:Math.min((this.pagination.page+1)*this.pagination.itemsPerPage,this.allSystemAgenciesCount)}}getData(){var o=this;return(0,y.A)(function*(){var i,c,g,d,p,I,f;let v,h;o.loadingList=!0,console.log("this.currentPromoter",o.currentPromoter),o.currentPromoter||(yield new Promise(l=>{setTimeout(l,100)}),o.getData()),o.promotion&&(o.agencyCardOptions.type="promotionAgencies");const j=o.agencyRelations.find(l=>"agencias-colaboradoras"===l.id).isSelected,F=o.agencyRelations.find(l=>"agencias-no-colaboradoras"===l.id).isSelected;if(!0===j||null===j&&null===F||!1===j&&!1===F){var G;let l={promoters:{apply:!0,filter:{id:{equals:null===(G=o.currentPromoter)||void 0===G?void 0:G.id}},onlyCount:!1}};var N;if(o.promotion&&(l={...l,promotions:{apply:!0,filter:{id:{equals:o.promotion.id}},onlyCount:!1}}),v=yield o.api.getAgency({},o.sort,o.pagination,l),v.error)return o.toastService.showToast({text:"Ha ocurrido un error al cargar las agencias, "+(null===(N=v.error)||void 0===N?void 0:N.errorMessage),theme:"red",icon:"fas fa-exclamation-triangle",time:1e4}),void(o.loadingList=!1);o.agencyRelations.map(b=>{var _;"agencias-colaboradoras"===b.id&&(b.count=null===(_=v)||void 0===_||null===(_=_.success)||void 0===_?void 0:_.metadata)})}if(!0===F||null===j&&null===F||!1===j&&!1===F){let l={};var E;l=o.promotion?{promotions:{apply:!0,filter:{id:{equals:o.promotion.id}},onlyCount:!1,negativeFiler:!0},agencyInvitationToPromotions:{apply:!0,mode:"include",filter:{status:{equals:"pending"}},onlyCount:!1}}:{promoters:{apply:!0,filter:{id:{equals:null===(E=o.currentPromoter)||void 0===E?void 0:E.id}},onlyCount:!1,negativeFiler:!0}},h=yield o.api.getAgency({},o.sort,o.pagination,l)}let $=(null===(i=v)||void 0===i||null===(i=i.success)||void 0===i?void 0:i.data)||[];$=$.map(l=>(l.isLinked=!0,l.agencyCardOptions=A.cloneDeep(o.agencyCardOptions),o.promotion&&(l.agencyCardOptions.promotion=o.promotion,l.agencyCardOptions.invitationStatus="collaborator"),l));let D=(null===(c=h)||void 0===c||null===(c=c.success)||void 0===c?void 0:c.data)||[];D=D.map(l=>{if(l.agencyCardOptions=A.cloneDeep(o.agencyCardOptions),o.promotion){l.agencyCardOptions.promotion=o.promotion;for(const b of l.agencyInvitationToPromotions)b.promotions.find(_=>_.id===o.promotion.id)&&"pending"===b.status&&(l.agencyCardOptions.invitationStatus="pending")}return l}),o.agencies=$.concat((null===(g=h)||void 0===g||null===(g=g.success)||void 0===g?void 0:g.data)||[]),o.allSystemAgenciesCount=((null===(d=v)||void 0===d||null===(d=d.success)||void 0===d||null===(d=d.metadata)||void 0===d?void 0:d.count)||0)+((null===(p=h)||void 0===p||null===(p=p.success)||void 0===p||null===(p=p.metadata)||void 0===p?void 0:p.count)||0),o.pagination.page=0,o.updatePagination(),o.loadingList=!1,console.log("this.agencies",o.agencies);const V=yield o.api.getPromotions({},null,{page:0,itemsPerPage:1e3},null);console.log("ELL RESULT DE OTTES LES PROMOCIONS",V),o.promoterPromotions=V.success.data.length;let vn={promoters:{apply:!0,filter:{id:{equals:null===(I=o.currentPromoter)||void 0===I?void 0:I.id}},onlyCount:!1},promotions:{apply:!0,filter:{},onlyCount:!1}};const bn=(null===(f=yield o.api.getAgency({},o.sort,o.pagination,vn))||void 0===f||null===(f=f.success)||void 0===f?void 0:f.data)||[];o.agencies=o.agencies.map(l=>{const b=bn.find(_=>_.id===l.id);return b&&(l.promotions=b.promotions),l})})()}onSort(o){return(0,y.A)(function*(){})()}}return(e=a).\u0275fac=function(o){return new(o||e)(n.rXU(m.Ix),n.rXU(L.f),n.rXU(T.d),n.rXU(M.W3),n.rXU(O.i),n.rXU(R.c))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-agencies-list"]],inputs:{promotion:"promotion"},decls:28,vars:13,consts:[[3,"fullscreen","scrollY"],[1,"crm-block-content"],[1,"crm-block-body"],[3,"ngClass"],[1,"crm-header-modal"],[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar"],[1,"fas","fa-search"],["type","text","placeholder","Buscar agencia",3,"input"],[1,"crm-buttons-group"],[1,"crm-button"],[1,"crm-button-secondary",3,"click","ngClass"],[3,"listPaginationConfig"],[1,"crm-block-body-fixed","crm-block-body-fixed-padding-bigger"],[1,"crm-block-body-blue-content"],[1,"crm-section-inline-cards"],[1,"crm-button",3,"click"],[1,"fas","fa-envelope"],[1,"fa","fa-times"],[1,"fa","fa-filter"],[3,"goPreviousPage","goNextPage","sort","listPaginationConfig"],[3,"isSkeleton"],[1,"crm-section-operations-list-buttons",2,"padding","0"],[1,"crm-operations-list-pipe-button",3,"ngClass"],[3,"promoterPromotions","agency","options"],[1,"crm-operations-list-pipe-button",3,"click","ngClass"],[1,"crm-operations-list-pipe-button-subtitle"],[1,"crm-dot","success",3,"ngStyle"],[3,"inviteAgencyClick","promoterPromotions","agency","options"]],template:function(o,i){1&o&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),n.nrm(7,"i",7),n.j41(8,"input",8),n.bIt("input",function(g){return i.onSearchInputChange(g)}),n.k0s()()(),n.j41(9,"div",9),n.DNE(10,en,3,0,"button",10),n.j41(11,"button",11),n.bIt("click",function(){return i.onToggleAside()}),n.DNE(12,an,2,0)(13,sn,2,1),n.k0s()()(),n.DNE(14,cn,1,7,"app-list-pagination-selectors",12),n.k0s(),n.DNE(15,gn,2,7,"div",13),n.j41(16,"div",14),n.DNE(17,dn,4,3,"div",15)(18,mn,6,0),n.nrm(19,"br")(20,"br")(21,"br")(22,"br")(23,"br")(24,"br")(25,"br")(26,"br")(27,"br"),n.k0s()()()()),2&o&&(n.Y8G("fullscreen",!0)("scrollY",!1),n.R7$(3),n.Y8G("ngClass",n.eq3(9,q,!i.promotion)),n.R7$(7),n.vxM(i.promotion?-1:10),n.R7$(),n.Y8G("ngClass",n.eq3(11,nn,!(null!=i.aside&&i.aside.visible)&&i.filters)),n.R7$(),n.vxM(null!=i.aside&&i.aside.visible?12:13),n.R7$(2),n.vxM(i.promotion?-1:14),n.R7$(),n.vxM(i.promotion?15:-1),n.R7$(2),n.vxM(i.loadingList?17:18))},dependencies:[s.YU,s.B3,M.W9,K,Q.k]}),a})()}}]);