"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8021],{8021:(K,v,l)=>{l.r(v),l.d(v,{RegisterPageModule:()=>W});var u=l(177),a=l(9417),d=l(9465),g=l(5188),p=l(467),e=l(3953),_=l(6039),F=l(8397);const c=i=>({"crm-input-input-error":i}),R=()=>["/auth/login"];function E(i,o){if(1&i&&(e.j41(0,"div",30)(1,"div",31),e.nrm(2,"img",32),e.k0s(),e.j41(3,"div",33)(4,"div")(5,"div",34),e.EFF(6),e.k0s(),e.j41(7,"div",35),e.EFF(8," la promoci\xf3n contiene 12 propiedades "),e.k0s()(),e.j41(9,"div")(10,"div",36),e.EFF(11),e.nI1(12,"date"),e.k0s()()()(),e.nrm(13,"div",37)(14,"div",38)),2&i){const r=o.$implicit;e.R7$(2),e.Y8G("src",(null==r||null==r.promotionFiles?null:r.promotionFiles.length)>0?null==r?null:r.promotionFiles[0].url:"assets/images/building.png",e.B4B),e.R7$(4),e.SpI(" Promoci\xf3n ",null==r?null:r.projectName," "),e.R7$(5),e.SpI(" Creado el ",e.i5U(12,3,null==r?null:r.createdAt,"dd/MM/yyyy")," ")}}function I(i,o){if(1&i&&(e.j41(0,"div",5),e.EFF(1," Reg\xedstrate para poder acceder a las siguientes promociones:"),e.k0s(),e.j41(2,"div",29),e.Z7z(3,E,15,6,null,null,e.fX1),e.k0s(),e.nrm(5,"br")),2&i){const r=e.XpG();e.R7$(3),e.Dyx(r.promotionsInvited)}}function h(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function b(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,h,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("companyName").hasError("required"))}}function k(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function y(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,k,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("name").hasError("required"))}}function P(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function G(i,o){1&i&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function C(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,P,2,0,"ng-container",40)(2,G,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("email").hasError("required")),e.R7$(),e.Y8G("ngIf",r.registerForm.get("email").hasError("email"))}}function N(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function j(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,N,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("phoneNumber").hasError("required"))}}function $(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function T(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,$,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.registerForm.get("accountType").hasError("required"))}}function x(i,o){if(1&i&&(e.j41(0,"div",8)(1,"div",9),e.EFF(2,"\xbfEres una agencia o una promotora?"),e.k0s(),e.j41(3,"div",10)(4,"select",41)(5,"option",42),e.EFF(6,"Promotora"),e.k0s(),e.j41(7,"option",43),e.EFF(8,"Agencia"),e.k0s()()(),e.DNE(9,T,2,1,"div",12),e.k0s()),2&i){const r=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(2,c,r.isControlInvalid("accountType"))),e.R7$(6),e.Y8G("ngIf",r.isControlInvalid("accountType"))}}function q(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function Y(i,o){1&i&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function w(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,q,2,0,"ng-container",40)(2,Y,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("password").hasError("required")),e.R7$(),e.Y8G("ngIf",r.registerForm.get("password").hasError("minlength"))}}function M(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function D(i,o){1&i&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function X(i,o){1&i&&(e.qex(0),e.EFF(1,"Las contrase\xf1as no coinciden"),e.bVm())}function V(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,M,2,0,"ng-container",40)(2,D,2,0,"ng-container",40)(3,X,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("confirmPassword").hasError("required")),e.R7$(),e.Y8G("ngIf",r.registerForm.get("confirmPassword").hasError("minlength")),e.R7$(),e.Y8G("ngIf",r.registerForm.hasError("passwordMismatch"))}}function S(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function J(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,S,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG();e.R7$(),e.Y8G("ngIf",r.registerForm.get("isResponsable").hasError("required"))}}function A(i,o){1&i&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function U(i,o){1&i&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function L(i,o){if(1&i&&(e.j41(0,"div",39),e.DNE(1,A,2,0,"ng-container",40)(2,U,2,0,"ng-container",40),e.k0s()),2&i){const r=e.XpG(2);e.R7$(),e.Y8G("ngIf",r.registerForm.get("responsableEmail").hasError("required")),e.R7$(),e.Y8G("ngIf",r.registerForm.get("responsableEmail").hasError("email"))}}function B(i,o){if(1&i&&(e.j41(0,"div",8)(1,"div",9),e.EFF(2,"Nombre del responsable"),e.k0s(),e.j41(3,"div",10),e.nrm(4,"input",44),e.k0s()(),e.j41(5,"div",8)(6,"div",9),e.EFF(7,"Email del responsable"),e.k0s(),e.j41(8,"div",10),e.nrm(9,"input",45),e.k0s(),e.DNE(10,L,3,2,"div",12),e.k0s()),2&i){const r=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(3,c,r.isControlInvalid("responsableName"))),e.R7$(5),e.Y8G("ngClass",e.eq3(5,c,r.isControlInvalid("responsableEmail"))),e.R7$(2),e.Y8G("ngIf",r.isControlInvalid("responsableEmail"))}}function z(i,o){if(1&i&&(e.j41(0,"div",39),e.qex(1),e.EFF(2),e.bVm(),e.k0s()),2&i){const r=e.XpG();e.R7$(2),e.JRh(r.globalErrorString)}}const O=[{path:"",component:(()=>{var i;class o{constructor(t,n,s,m){this.router=t,this.activeRouter=n,this.api=s,this.toastService=m,this.agencyInvitationRegister=null,this.globalErrorString=""}ngOnInit(){var t=this;return(0,p.A)(function*(){t.initializeForm(),t.activeRouter.queryParams.subscribe(function(){var n=(0,p.A)(function*(s){if(s.agencyInvitationToPromotionsId&&s.email&&!t.agencyInvitationRegister){t.agencyInvitationRegister={agencyInvitationToPromotionsId:s.agencyInvitationToPromotionsId,agencyEmail:s.email};const m=yield t.api.getPromotionsFromAgencyRegister(t.agencyInvitationRegister.agencyInvitationToPromotionsId,t.agencyInvitationRegister.agencyEmail);t.promotionsInvited=m.success.data,localStorage.setItem("agencyInvitationToPromotionsId",t.agencyInvitationRegister.agencyInvitationToPromotionsId),t.registerForm.patchValue({email:t.agencyInvitationRegister.agencyEmail,accountType:"agency"})}});return function(s){return n.apply(this,arguments)}}())})()}initializeForm(){this.registerForm=new a.gE({companyName:new a.MJ("",[a.k0.required]),name:new a.MJ("",[a.k0.required]),email:new a.MJ("",[a.k0.required,a.k0.email]),phoneNumber:new a.MJ("",[a.k0.required]),accountType:new a.MJ("",[a.k0.required]),password:new a.MJ("",[a.k0.required,a.k0.minLength(8)]),confirmPassword:new a.MJ("",[a.k0.required,a.k0.minLength(8)]),isResponsable:new a.MJ("",[a.k0.required]),responsableEmail:new a.MJ("",[a.k0.email]),responsableName:new a.MJ("")},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(t){var n,s;const m=null===(n=t.get("password"))||void 0===n?void 0:n.value,f=null===(s=t.get("confirmPassword"))||void 0===s?void 0:s.value;return m&&f&&m!==f?{passwordMismatch:!0}:null}isControlInvalid(t){const n=this.registerForm.get(t);return n&&n.invalid&&(n.touched||n.dirty)}onSubmit(){var t=this;return(0,p.A)(function*(){if(t.registerForm.valid){const n=t.registerForm.value;console.log("Form submitted successfully:",n);const s=yield t.api.register(n.email,n);null!=s&&s.success?(localStorage.setItem("tempUserRegister",JSON.stringify(n)),t.router.navigate(["/auth/confirm-email"])):(t.globalErrorString=s.error.errorMessage,t.toastService.showToast({text:"Ha ocurrido un error",theme:"red",time:2e3}))}else console.log("Form is invalid"),t.registerForm.markAllAsTouched(),t.toastService.showToast({text:"El formulario no es v\xe1lido",theme:"red",time:2e3})})()}}return(i=o).\u0275fac=function(t){return new(t||i)(e.rXU(g.Ix),e.rXU(g.nX),e.rXU(_.i),e.rXU(F.f))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-register"]],decls:74,vars:34,consts:[[1,"crm-box","crm-section","crm-section-center-content","crm-section-margin-top",2,"margin-top","80px"],[1,"crm-header-icon","no-padding","no-line","bottom-margin"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-user-plus"],[1,"crm-header-icon-title"],[1,"crm-header-icon-right"],[1,"crm-section-inputs",3,"ngSubmit","formGroup"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Introduce el nombre comercial de la empresa","formControlName","companyName"],["class","crm-input-error",4,"ngIf"],[1,"crm-section-title"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","name"],["type","email","placeholder","Introduce el email del responsable","formControlName","email"],["type","tel","placeholder","Introduce el tel\xe9fono del responsable","formControlName","phoneNumber"],["class","crm-input",4,"ngIf"],["type","password","placeholder","Introduce la contrase\xf1a","formControlName","password"],["type","password","placeholder","Repite la contrase\xf1a","formControlName","confirmPassword"],[1,"crm-input","crm-input-radio-box"],["formControlName","isResponsable",1,"crm-input-radios"],[1,"crm-input-radio"],[3,"value"],[1,"crm-input-radio-label"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[1,"crm-button","crm-button-secondary",3,"routerLink"],["type","submit",1,"crm-button","crm-button-primary"],[1,"crm-block-details-header-left"],[1,"crm-block-photo-and-info"],[1,"crm-block-photo-and-info-img","crm-block-photo-and-info-img-promotion"],["alt","",3,"src"],[1,"crm-block-photo-and-info-info"],[1,"crm-block-photo-and-info-info-title"],[1,"crm-block-photo-and-info-info-subtitle"],[1,"crm-block-photo-and-info-info-footer"],[1,"crm-vertical-separator"],[1,"crm-block-info-horizontal"],[1,"crm-input-error"],[4,"ngIf"],["formControlName","accountType"],["value","promoter"],["value","agency"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","responsableName"],["type","email","placeholder","Introduce el email del responsable","formControlName","responsableEmail"]],template:function(t,n){1&t&&(e.j41(0,"ion-content")(1,"div",0),e.DNE(2,I,6,0),e.j41(3,"div",1)(4,"div",2)(5,"div",3),e.nrm(6,"i",4),e.k0s(),e.j41(7,"div",5),e.EFF(8," Registro para promotor/agencia "),e.k0s()(),e.nrm(9,"div",6),e.k0s(),e.j41(10,"form",7),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(11,"div",8)(12,"div",9),e.EFF(13,"Nombre comercial empresa"),e.k0s(),e.j41(14,"div",10),e.nrm(15,"input",11),e.k0s(),e.DNE(16,b,2,1,"div",12),e.k0s(),e.j41(17,"div",13),e.EFF(18," Datos necesarios "),e.k0s(),e.j41(19,"div",8)(20,"div",9),e.EFF(21,"Nombre"),e.k0s(),e.j41(22,"div",10),e.nrm(23,"input",14),e.k0s(),e.DNE(24,y,2,1,"div",12),e.k0s(),e.j41(25,"div",8)(26,"div",9),e.EFF(27,"Email"),e.k0s(),e.j41(28,"div",10),e.nrm(29,"input",15),e.k0s(),e.DNE(30,C,3,2,"div",12),e.k0s(),e.j41(31,"div",8)(32,"div",9),e.EFF(33,"N\xfamero de tel\xe9fono"),e.k0s(),e.j41(34,"div",10),e.nrm(35,"input",16),e.k0s(),e.DNE(36,j,2,1,"div",12),e.k0s(),e.DNE(37,x,10,4,"div",17),e.j41(38,"div",8)(39,"div",9),e.EFF(40,"Contrase\xf1a"),e.k0s(),e.j41(41,"div",10),e.nrm(42,"input",18),e.k0s(),e.DNE(43,w,3,2,"div",12),e.k0s(),e.j41(44,"div",8)(45,"div",9),e.EFF(46,"Repetir contrase\xf1a"),e.k0s(),e.j41(47,"div",10),e.nrm(48,"input",19),e.k0s(),e.DNE(49,V,4,3,"div",12),e.k0s(),e.j41(50,"div",8)(51,"div",20)(52,"div",9),e.EFF(53," \xbfEres el due\xf1o/responsable de la empresa? "),e.k0s(),e.j41(54,"ion-radio-group",21)(55,"div",22),e.nrm(56,"ion-radio",23),e.j41(57,"div",24),e.EFF(58," S\xed "),e.k0s()(),e.j41(59,"div",22),e.nrm(60,"ion-radio",23),e.j41(61,"div",24),e.EFF(62," No "),e.k0s()()()(),e.DNE(63,J,2,1,"div",12),e.k0s(),e.DNE(64,B,11,7),e.j41(65,"div",25),e.nrm(66,"div"),e.j41(67,"div",26)(68,"button",27),e.EFF(69,"Iniciar sesi\xf3n"),e.k0s(),e.j41(70,"button",28),e.EFF(71,"Registrarse"),e.k0s()()(),e.nrm(72,"br"),e.DNE(73,z,3,1,"div",12),e.k0s()()()),2&t&&(e.R7$(2),e.vxM(n.agencyInvitationRegister&&(null==n.promotionsInvited?null:n.promotionsInvited.length)>0?2:-1),e.R7$(8),e.Y8G("formGroup",n.registerForm),e.R7$(4),e.Y8G("ngClass",e.eq3(21,c,n.isControlInvalid("companyName"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("companyName")),e.R7$(6),e.Y8G("ngClass",e.eq3(23,c,n.isControlInvalid("name"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("name")),e.R7$(4),e.Y8G("ngClass",e.eq3(25,c,n.isControlInvalid("email"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("email")),e.R7$(4),e.Y8G("ngClass",e.eq3(27,c,n.isControlInvalid("phoneNumber"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("phoneNumber")),e.R7$(),e.Y8G("ngIf",!n.agencyInvitationRegister),e.R7$(4),e.Y8G("ngClass",e.eq3(29,c,n.isControlInvalid("password"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("password")),e.R7$(4),e.Y8G("ngClass",e.eq3(31,c,n.isControlInvalid("confirmPassword")||n.registerForm.hasError("passwordMismatch"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("confirmPassword")||n.registerForm.hasError("passwordMismatch")),e.R7$(7),e.Y8G("value",!0),e.R7$(4),e.Y8G("value",!1),e.R7$(3),e.Y8G("ngIf",n.isControlInvalid("isResponsable")),e.R7$(),e.vxM(!1===n.registerForm.value.isResponsable?64:-1),e.R7$(4),e.Y8G("routerLink",e.lJ4(33,R)),e.R7$(5),e.Y8G("ngIf",n.globalErrorString))},dependencies:[u.YU,u.bT,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,d.W9,d.KO,d.f0,d.Je,d.N7,g.Wk,a.j4,a.JD,u.vh]}),o})()}];let H=(()=>{var i;class o{}return(i=o).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[g.iI.forChild(O),g.iI]}),o})(),W=(()=>{var i;class o{}return(i=o).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.MD,a.YN,d.bv,H,a.X1]}),o})()}}]);