"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1112],{1112:(ve,E,g)=>{g.r(E),g.d(E,{CalendarScreenPageModule:()=>ge});var x=g(177),S=g(9417),_=g(9465),j=g(5188),b=g(467),h=g(9703);const c=void 0,D=["es",[["a.\xa0m.","p.\xa0m."],c,c],c,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],c,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],c,[["a. C.","d. C."],c,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",c,c,c],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[c,"$"],BRL:[c,"R$"],BYN:[c,"\u0440."],CAD:[c,"$"],CNY:[c,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[c,"\xa3"],HKD:[c,"$"],ILS:[c,"\u20aa"],INR:[c,"\u20b9"],JPY:[c,"\xa5"],KRW:[c,"\u20a9"],MXN:[c,"$"],NZD:[c,"$"],PHP:[c,"\u20b1"],RON:[c,"L"],THB:["\u0e3f"],TWD:[c,"NT$"],USD:["US$","$"],XAF:[],XCD:[c,"$"],XOF:[]},"ltr",function V(i){const r=i,n=Math.floor(Math.abs(i)),t=i.toString().replace(/^[^.]*\.?/,"").length,a=parseInt(i.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===r?1:0===a&&0!==n&&n%1e6==0&&0===t||!(a>=0&&a<=5)?4:5}];var e=g(3953),F=g(4501),R=g(6039),T=g(1213),I=g(638),G=g(8397);const P=i=>({"disabled-expandable-visits-header":i}),M=(i,r)=>({"expand-visits":i,"collapse-visits":r}),$=(i,r)=>[i,r],N=(i,r,n)=>({"active-view":i,"left-view-button":r,"right-view-button":n}),O=(i,r)=>({"expanded-visits-container-arrow":i,"collapsed-visits-container-arrow":r});function Y(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",30),e.bIt("click",function(){const a=e.eBV(n).$implicit,o=e.XpG(2);return e.Njj(o.setView(a))}),e.j41(1,"p"),e.EFF(2),e.k0s()()}if(2&i){const n=r.$implicit,t=e.XpG(2);e.Y8G("ngClass",e.sMw(2,N,n===t.view,n===t.CalendarView.Month,n===t.CalendarView.Week)),e.R7$(2),e.JRh(n===t.CalendarView.Month?"Mes":"Semana")}}function z(i,r){if(1&i){const n=e.RV6();e.j41(0,"mwl-calendar-month-view",31),e.bIt("dayClicked",function(a){e.eBV(n);const o=e.XpG(2);return e.Njj(o.dayClicked(a.day))}),e.k0s()}if(2&i){e.XpG();const n=e.sdS(15),t=e.XpG();e.Y8G("viewDate",t.viewDate)("locale",t.locale)("events",t.events)("cellTemplate",n)}}function A(i,r){1&i&&(e.j41(0,"div",41),e.nrm(1,"div",42),e.j41(2,"p"),e.EFF(3,"Visitado"),e.k0s()())}function X(i,r){if(1&i&&(e.j41(0,"div",43),e.nrm(1,"div",42),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&i){const n=e.XpG().$implicit;e.R7$(3),e.JRh("rejected"==n.meta.status?"Rechazado":"Anulado")}}function H(i,r){1&i&&(e.j41(0,"div",44)(1,"p"),e.EFF(2,"Nueva visita"),e.k0s(),e.j41(3,"div",45),e.nrm(4,"i",46),e.k0s()())}function U(i,r){if(1&i&&(e.j41(0,"div",47),e.nrm(1,"div",42),e.j41(2,"p"),e.EFF(3,"Visita: "),e.j41(4,"span"),e.EFF(5),e.k0s()()()),2&i){const n=e.XpG().$implicit,t=e.XpG(3);e.R7$(5),e.JRh(t.setCalendarEventTime(n.start))}}function B(i,r){1&i&&(e.j41(0,"div",48)(1,"div",49),e.nrm(2,"i",50),e.k0s(),e.j41(3,"p"),e.EFF(4,"Evaluar visita"),e.k0s()())}function J(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,A,4,0,"div",36)(2,X,4,1,"div",37)(3,H,5,0,"div",38)(4,U,6,1,"div",39)(5,B,5,0,"div",40),e.k0s()),2&i){const n=r.$implicit;e.R7$(),e.Y8G("ngIf","completed"==n.meta.status),e.R7$(),e.Y8G("ngIf","rejected"==n.meta.status||"canceled"==n.meta.status),e.R7$(),e.Y8G("ngIf","accepted"==n.meta.status),e.R7$(),e.Y8G("ngIf","pending"==n.meta.status),e.R7$(),e.Y8G("ngIf","evaluating"==n.meta.status)}}function W(i,r){if(1&i&&(e.j41(0,"div",32)(1,"div",33),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"div",34),e.DNE(5,J,6,5,"div",35),e.k0s()()),2&i){const n=r.day;e.R7$(2),e.JRh(e.i5U(3,2,n.date,"d")),e.R7$(3),e.Y8G("ngForOf",n.events)}}function L(i,r){if(1&i&&e.nrm(0,"mwl-calendar-week-view",51),2&i){const n=e.XpG(2);e.Y8G("viewDate",n.viewDate)("locale",n.locale)("events",n.events)}}function K(i,r){1&i&&e.EFF(0," Viene de un registro ")}function Z(i,r){if(1&i){const n=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){e.eBV(n);const a=e.XpG().$implicit,o=e.XpG(3);return e.Njj(o.onHandleVisit(a.meta.visit))}),e.EFF(1," Gestionar "),e.k0s()}}function Q(i,r){if(1&i&&(e.j41(0,"ion-item")(1,"ion-label")(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nrm(6,"br"),e.EFF(7),e.nrm(8,"br"),e.EFF(9),e.nI1(10,"date"),e.nrm(11,"br"),e.EFF(12),e.nrm(13,"br"),e.EFF(14),e.nrm(15,"br"),e.DNE(16,K,1,0)(17,Z,2,0,"button",53),e.k0s()()),2&i){const n=r.$implicit,t=e.XpG(3);e.R7$(3),e.SpI("Contacto: ",n.meta.contactName,""),e.R7$(2),e.SpI(" Promotora: ",n.meta.promoterName,""),e.R7$(2),e.SpI(" Propiedad: ",n.meta.propertyName,""),e.R7$(2),e.SpI(" Hora: ",e.i5U(10,7,n.start,"HH:mm"),""),e.R7$(3),e.SpI(" Notas: ",n.meta.notes,""),e.R7$(2),e.SpI(" Estado: ",n.meta.status,""),e.R7$(2),e.vxM(n.meta.visit.operationRegisterId?16:null!=n&&null!=n.meta&&null!=n.meta.visit&&n.meta.visit.operationRegisterId||"pending"!==n.meta.status&&n.meta.status||"promoter"!==t.currentUser.accountType?-1:17)}}function q(i,r){if(1&i&&(e.j41(0,"div",52)(1,"h3"),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"ion-list"),e.DNE(5,Q,18,10,"ion-item",35),e.k0s()()),2&i){const n=e.XpG(2);e.R7$(2),e.SpI("Visitas de ",e.ii3(3,2,n.selectedDay.date,"longDate","","es"),""),e.R7$(3),e.Y8G("ngForOf",n.selectedDay.events)}}function ee(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"p"),e.EFF(4),e.k0s()(),e.j41(5,"div",19)(6,"div",20),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.prev())}),e.nrm(7,"i",21),e.k0s(),e.j41(8,"div",22),e.DNE(9,Y,3,6,"div",23),e.k0s(),e.j41(10,"div",24),e.bIt("click",function(){e.eBV(n);const a=e.XpG();return e.Njj(a.next())}),e.nrm(11,"i",25),e.k0s()()(),e.j41(12,"div",26),e.DNE(13,z,1,4,"mwl-calendar-month-view",27)(14,W,6,5,"ng-template",null,0,e.C5r)(16,L,1,3,"mwl-calendar-week-view",28),e.k0s(),e.DNE(17,q,6,7,"div",29),e.k0s()}if(2&i){const n=e.XpG();e.R7$(4),e.JRh(n.formatCurrentDate(n.today)),e.R7$(5),e.Y8G("ngForOf",e.l_i(5,$,n.CalendarView.Month,n.CalendarView.Week)),e.R7$(4),e.Y8G("ngIf",n.view===n.CalendarView.Month),e.R7$(3),e.Y8G("ngIf",n.view===n.CalendarView.Week),e.R7$(),e.Y8G("ngIf",n.selectedDay)}}function te(i,r){if(1&i&&e.nrm(0,"i",55),2&i){const n=e.XpG();e.Y8G("ngClass",e.l_i(1,O,n.showAcceptedVisits,!n.showAcceptedVisits))}}function ne(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",56),e.bIt("click",function(){const a=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.openCalendarEventAction(a.meta.visit,a.start))}),e.j41(1,"p"),e.EFF(2,"Nueva Visita"),e.k0s(),e.j41(3,"div",57)(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"div",58),e.nrm(7,"i",46),e.k0s()()()}if(2&i){const n=r.$implicit,t=e.XpG();e.R7$(5),e.JRh(t.formatCalendarEventDate(n.start))}}function ie(i,r){if(1&i&&e.nrm(0,"i",55),2&i){const n=e.XpG();e.Y8G("ngClass",e.l_i(1,O,n.showPendingVisits,!n.showPendingVisits))}}function ae(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",59),e.bIt("click",function(){const a=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.openCalendarEventAction(a.meta.visit,a.start))}),e.j41(1,"div",60),e.nrm(2,"div",61),e.j41(3,"p"),e.EFF(4),e.k0s()(),e.j41(5,"div",62)(6,"p"),e.EFF(7),e.k0s(),e.nrm(8,"img",63),e.k0s()()}if(2&i){const n=r.$implicit,t=e.XpG();e.R7$(4),e.SpI("Visita: ",t.formatCalendarEventDate(n.start),""),e.R7$(3),e.JRh(t.formatEventTime(n.start,n.end))}}function re(i,r){if(1&i&&e.nrm(0,"i",55),2&i){const n=e.XpG();e.Y8G("ngClass",e.l_i(1,O,n.showEvaluatingVisits,!n.showEvaluatingVisits))}}function oe(i,r){if(1&i){const n=e.RV6();e.j41(0,"div",64)(1,"div",60)(2,"div",65),e.nrm(3,"i",50),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"div",62)(7,"p"),e.EFF(8),e.k0s(),e.nrm(9,"img",63),e.k0s(),e.j41(10,"div",66),e.bIt("click",function(){const a=e.eBV(n).$implicit,o=e.XpG();return e.Njj(o.openCalendarEventAction(a.meta.visit,a.start))}),e.j41(11,"p"),e.EFF(12,"Evaluar"),e.k0s()()()}if(2&i){const n=r.$implicit,t=e.XpG();e.R7$(5),e.SpI("Visita: ",t.formatCalendarEventDate(n.start),""),e.R7$(3),e.JRh(t.formatEventTime(n.start,n.end))}}(0,x.EO)(D);const le=[{path:"",component:(()=>{var i;class r{constructor(t,a,o,s,d){this.headerService=t,this.api=a,this.byvaroState=o,this.modalsService=s,this.toastService=d,this.view=h.St.Month,this.CalendarView=h.St,this.viewDate=new Date,this.locale="es",this.today=new Date,this.rawEvents=[],this.events=[],this.acceptedVisits=[],this.pendingConfirmation=[],this.pendingEvaluation=[],this.selectedDay=null,this.loading=!0,this.showAcceptedVisits=!0,this.showPendingVisits=!0,this.showEvaluatingVisits=!0,this.selectedPendingVisitContact=""}openCalendarEventAction(t,a){var o=this;return(0,b.A)(function*(){yield o.modalsService.onShowCalendarEventActionModal(t,a)})()}toggleAcceptedVisits(){this.showAcceptedVisits=!this.showAcceptedVisits}togglePendingVisits(){this.showPendingVisits=!this.showPendingVisits}toggleEvaluatingVisits(){this.showEvaluatingVisits=!this.showEvaluatingVisits}formatValue(t){let a="";return a=t<10?"0"+t:t.toString(),a}formatCurrentDate(t){let a="";return a=this.formatValue(t.getDate())+" "+t.toLocaleString(this.locale,{month:"short"})+" "+t.getFullYear().toString(),a}formatCalendarEventDate(t){let a="",o=t.toString().split("T")[0],s=o.split("-")[0],d=o.split("-")[1];return a=o.split("-")[2]+"/"+d+"/"+s,a}formatEventTime(t,a){let o="",s=t.toString().split("T")[1],d=s.split(":")[0],v=s.split(":")[1],p=a.toISOString().split("T")[1];return o=d+":"+v+" - "+p.split(":")[0]+":"+p.split(":")[1],o}setCalendarEventTime(t){let a="",o=t.toString().split("T")[1],s=o.split(":")[0],d=o.split(":")[1],v=parseInt(s)+1;return a=24==v?s+":"+d+" - 00:"+d:s+":"+d+" - "+v.toString()+":"+d,a}ngOnInit(){var t=this;return(0,b.A)(function*(){t.headerService.setConfig({title:"calendar"}),t.byvaroState.getState().subscribe(function(){var a=(0,b.A)(function*(o){null!=o&&o.user&&(t.currentUser=o.user,console.log("currentUser",t.currentUser),yield t.getData())});return function(o){return a.apply(this,arguments)}}()),t.byvaroState.getRefreshVisitData().subscribe(a=>{a&&(t.getData(),t.byvaroState.setRefreshVisitData(!1))})})()}ionViewWillEnter(){this.currentUser&&this.getData()}getData(){var t=this;return(0,b.A)(function*(){var a,o;t.loading=!0,t.selectedDay=null;const s={date:{gte:new Date((new Date).getFullYear(),(new Date).getMonth(),1),lte:new Date((new Date).getFullYear(),(new Date).getMonth()+1,1)}},p=yield t.api.getVisit(s,{field:"date",order:"asc"},{page:0,itemsPerPage:1e3});t.rawEvents=null==p||null===(a=p.success)||void 0===a?void 0:a.data,console.log("events",null==p||null===(o=p.success)||void 0===o?void 0:o.data),t.events=t.rawEvents.map(l=>{var u,C,f,w;return{start:l.date,end:l.notes&&l.notes.includes("D\xeda")?void 0:new Date(new Date(l.date).getTime()+36e5),title:l.notes,allDay:l.notes.includes("D\xeda"),color:t.getEventColor(l.status),meta:{id:l.id,notes:l.notes,contactName:null===(u=l.contact)||void 0===u?void 0:u.name,promoterName:(null===(C=l.promoter)||void 0===C?void 0:C.name)||(null===(f=l.agency)||void 0===f?void 0:f.name),propertyName:null===(w=l.property)||void 0===w?void 0:w.reference,status:l.status,visit:l}}}),t.loading=!1,t.pendingConfirmation=t.events.filter(l=>"pending"==l.meta.status),t.acceptedVisits=t.events.filter(l=>"accepted"==l.meta.status),t.pendingEvaluation=t.events.filter(l=>"evaluating"==l.meta.status),t.showPendingVisits=0!=t.pendingConfirmation.length,t.showAcceptedVisits=0!=t.acceptedVisits.length,t.showEvaluatingVisits=0!=t.pendingEvaluation.length})()}getEventColor(t){switch(t){case"accepted":case"pending":return{primary:"#3A50E4",secondary:"#EBEBEB"};case"rejected":case"canceled":return{primary:"#F44336",secondary:"#FFCDD2"};case"completed":return{primary:"#00C751",secondary:"#C8F7DC"};default:return{primary:"#9E9E9E",secondary:"#E0E0E0"}}}onHandleVisit(t){var a=this;return(0,b.A)(function*(){var o;console.log("onHandleVisit",t);const s=yield a.modalsService.onShowAcceptRegisterModal(null,t);if(null!=s&&null!==(o=s.data)&&void 0!==o&&o.confirmed){var d;if(null!=s&&null!==(d=s.data)&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.confirmVisit){var v,p,l,u;const y={status:"accepted",notes:(null==s||null===(v=s.data)||void 0===v||null===(v=v.data)||void 0===v?void 0:v.notes)||t.notes};"promoter"===(null===(p=a.currentUser)||void 0===p?void 0:p.accountType)?y.promoterResponsableUserId=a.currentUser.id:"agency"===(null===(l=a.currentUser)||void 0===l?void 0:l.accountType)&&(y.responsableUserId=a.currentUser.id);const m=yield a.api.updateVisitById(t.id,y);var C;if(null!=m&&null!==(u=m.error)&&void 0!==u&&u.errorMessage)return a.toastService.showErrorToast("Error al aceptar la visita. "+(null==m||null===(C=m.error)||void 0===C?void 0:C.errorMessage)),null}else{var f,w;const y={status:"rejected",notes:(null==s||null===(f=s.data)||void 0===f||null===(f=f.data)||void 0===f?void 0:f.notes)||t.notes},m=yield a.api.updateVisitById(t.id,y);var k;if(null!=m&&null!==(w=m.error)&&void 0!==w&&w.errorMessage)return a.toastService.showErrorToast("Error al aceptar la visita. "+(null==m||null===(k=m.error)||void 0===k?void 0:k.errorMessage)),null}a.getData()}})()}dayClicked(t){this.selectedDay=this.selectedDay&&this.selectedDay.date.getTime()===t.date.getTime()?null:t,console.log(this.selectedDay)}setView(t){this.view=t}prev(){this.changeDate(-1)}next(){this.changeDate(1)}changeDate(t){this.viewDate=this.view===h.St.Month?new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+t,1):new Date(this.viewDate.setDate(this.viewDate.getDate()+7*t))}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(F.d),e.rXU(R.i),e.rXU(T.c),e.rXU(I.M),e.rXU(G.f))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-calendar-screen"]],decls:32,vars:33,consts:[["customMonthCell",""],[3,"fullscreen","scrollY"],[1,"crm-block-content","calendar-space"],["class","crm-block-body-blue-content",4,"ngIf"],[1,"monthly-events-side-panel"],[1,"scrollable-events-list"],[1,"crm-input","agent-filter"],[1,"crm-input-label"],["toggleIcon","chevron-down-outline","justify","end","interface","popover","name","agentFilter",1,"crm-select-item"],[1,"expandable-container"],[1,"expandable-container-header",3,"click","ngClass"],["class","fas fa-chevron-down fa-2xs",3,"ngClass",4,"ngIf"],[1,"scrollable-visits-container",3,"ngClass"],["class","new-visit-calendar-card",3,"click",4,"ngFor","ngForOf"],["class","pending-visits-calendar-card",3,"click",4,"ngFor","ngForOf"],["class","evaluating-visits-calendar-card",4,"ngFor","ngForOf"],[1,"crm-block-body-blue-content"],[1,"toolbar"],[1,"current-date-container"],[1,"calendar-buttons-container"],[1,"nav-button","prev-button",3,"click"],[1,"fas","fa-chevron-left","fa-sm"],[1,"view-toggle"],["class","view-toggle-button",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"nav-button","next-button",3,"click"],[1,"fas","fa-chevron-right","fa-sm"],[1,"calendar-container"],[3,"viewDate","locale","events","cellTemplate","dayClicked",4,"ngIf"],[3,"viewDate","locale","events",4,"ngIf"],["class","event-dropdown",4,"ngIf"],[1,"view-toggle-button",3,"click","ngClass"],[3,"dayClicked","viewDate","locale","events","cellTemplate"],[1,"custom-cell"],[1,"day-number"],[1,"event-list"],[4,"ngFor","ngForOf"],["class","completed-visit-event",4,"ngIf"],["class","rejected-visit-event",4,"ngIf"],["class","new-visit-event",4,"ngIf"],["class","pending-visit-event",4,"ngIf"],["class","evaluating-visit-event",4,"ngIf"],[1,"completed-visit-event"],[1,"event-marker"],[1,"rejected-visit-event"],[1,"new-visit-event"],[1,"new-visit-event-calendar-icon"],[1,"far","fa-bell","fa-2xs"],[1,"pending-visit-event"],[1,"evaluating-visit-event"],[1,"evaluate-visit-event-icon"],[1,"fas","fa-exclamation","fa-2xs"],[3,"viewDate","locale","events"],[1,"event-dropdown"],[1,"crm-button","crm-button-warning",2,"margin-top","16px","min-width","90px","justify-content","center"],[1,"crm-button","crm-button-warning",2,"margin-top","16px","min-width","90px","justify-content","center",3,"click"],[1,"fas","fa-chevron-down","fa-2xs",3,"ngClass"],[1,"new-visit-calendar-card",3,"click"],[1,"new-visit-date-container"],[1,"new-visit-notification-icon"],[1,"pending-visits-calendar-card",3,"click"],[1,"pending-visit-info-container"],[1,"pending-visit-icon"],[1,"pending-visit-time-container"],["src","assets/images/avatar.png","alt","user icon"],[1,"evaluating-visits-calendar-card"],[1,"evaluating-visit-icon"],[1,"evaluate-visit-button",3,"click"]],template:function(t,a){1&t&&(e.j41(0,"ion-content",1)(1,"div",2),e.DNE(2,ee,18,8,"div",3),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),e.EFF(7,"Filtrar por comercial"),e.k0s(),e.j41(8,"ion-list")(9,"ion-item"),e.nrm(10,"ion-select",8),e.k0s()()(),e.j41(11,"div",9)(12,"div",10),e.bIt("click",function(){return a.toggleAcceptedVisits()}),e.j41(13,"p"),e.EFF(14),e.k0s(),e.DNE(15,te,1,4,"i",11),e.k0s(),e.j41(16,"div",12),e.DNE(17,ne,8,1,"div",13),e.k0s()(),e.j41(18,"div",9)(19,"div",10),e.bIt("click",function(){return a.togglePendingVisits()}),e.j41(20,"p"),e.EFF(21),e.k0s(),e.DNE(22,ie,1,4,"i",11),e.k0s(),e.j41(23,"div",12),e.DNE(24,ae,9,2,"div",14),e.k0s()(),e.j41(25,"div",9)(26,"div",10),e.bIt("click",function(){return a.toggleEvaluatingVisits()}),e.j41(27,"p"),e.EFF(28),e.k0s(),e.DNE(29,re,1,4,"i",11),e.k0s(),e.j41(30,"div",12),e.DNE(31,oe,13,2,"div",15),e.k0s()()()()()()),2&t&&(e.Y8G("fullscreen",!0)("scrollY",!0),e.R7$(2),e.Y8G("ngIf",!a.loading),e.R7$(10),e.Y8G("ngClass",e.eq3(18,P,0==a.acceptedVisits.length)),e.R7$(2),e.SpI("Visitas programadas (",a.acceptedVisits.length,")"),e.R7$(),e.Y8G("ngIf",a.acceptedVisits.length>0),e.R7$(),e.Y8G("ngClass",e.l_i(20,M,a.showAcceptedVisits,!a.showAcceptedVisits)),e.R7$(),e.Y8G("ngForOf",a.acceptedVisits),e.R7$(2),e.Y8G("ngClass",e.eq3(23,P,0==a.pendingConfirmation.length)),e.R7$(2),e.SpI("Pendientes de confirmar (",a.pendingConfirmation.length,")"),e.R7$(),e.Y8G("ngIf",a.pendingConfirmation.length>0),e.R7$(),e.Y8G("ngClass",e.l_i(25,M,a.showPendingVisits,!a.showPendingVisits)),e.R7$(),e.Y8G("ngForOf",a.pendingConfirmation),e.R7$(2),e.Y8G("ngClass",e.eq3(28,P,0==a.pendingEvaluation.length)),e.R7$(2),e.SpI("Pendientes de evaluar (",a.pendingEvaluation.length,")"),e.R7$(),e.Y8G("ngIf",a.pendingEvaluation.length>0),e.R7$(),e.Y8G("ngClass",e.l_i(30,M,a.showEvaluatingVisits,!a.showEvaluatingVisits)),e.R7$(),e.Y8G("ngForOf",a.pendingEvaluation))},dependencies:[x.YU,x.Sq,x.bT,_.W9,_.uz,_.he,_.nf,_.Nm,_.Je,h.jD,h.tG,x.vh],styles:['@charset "UTF-8";[_nghost-%COMP%]     .cal-month-view{padding:0}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333;border:1px solid #ebebeb;padding:8px;background:#fff;text-align:left;font-weight:400;text-transform:uppercase}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell:hover{background:#fff}[_nghost-%COMP%]     .cal-month-view .cal-day-number{float:left;margin:12px 0 0 12px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;color:#333;font-size:18px;opacity:1}[_nghost-%COMP%]     .cal-month-view .cal-day-badge{display:none}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#bbb}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today{background-color:#fff;border-radius:6px;box-shadow:0 0 0 2px #3a50e4;border:none}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .cal-day-number{color:#3a50e4;font-size:18px;font-weight:700}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .ds-calendar-cell-title{color:#3a50e4;font-weight:700}[_nghost-%COMP%]     .cal-month-view .cal-cell-top{min-height:auto;max-height:auto}[_nghost-%COMP%]     .cal-week-view{padding:0}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333;border-bottom:1px solid #ebebeb;border-right:1px solid #ebebeb;padding:8px;background:#fff;text-transform:uppercase;font-weight:400;text-align:left}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell:hover{background:#fff}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell:last-child{border-right:none}[_nghost-%COMP%]     .cal-week-view .cal-time-label{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;color:#333;padding:4px 8px;border-right:1px solid #ebebeb;background:#fff}[_nghost-%COMP%]     .cal-week-view .cal-time-segment{border-top:1px solid #ebebeb}[_nghost-%COMP%]     .cal-week-view .cal-body .cal-day-column{border-right:1px solid #ebebeb}[_nghost-%COMP%]     .cal-week-view .cal-body .cal-day-column:last-child{border-right:none}[_nghost-%COMP%]     .cal-week-view .cal-day-column.cal-today{background-color:#fff;box-shadow:inset 0 0 0 2px #3a50e4}.crm-block-body-blue-content[_ngcontent-%COMP%]{height:100%}.calendar-space[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.monthly-events-side-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:325px;height:100vh;background-color:#fff}.scrollable-events-list[_ngcontent-%COMP%]{width:100%;height:95%;overflow-y:auto}.expandable-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;height:-moz-fit-content;height:fit-content;margin:0 auto 25px;border-radius:8px;border:1px solid var(--crm-grey-color-light)}.expandable-container-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;margin-top:15px;margin-bottom:15px}.expandable-container-header[_ngcontent-%COMP%]:hover{cursor:pointer}.expandable-container-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:var(--crm-font-size-small);font-family:var(--crm-font-family);color:var(--crm-font-color-light);margin:0 0 0 15px}.expandable-container-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-font-color-light);margin-right:15px}.agent-filter[_ngcontent-%COMP%]{width:85%;margin:25px auto}.agent-filter[_ngcontent-%COMP%]   .crm-input-label[_ngcontent-%COMP%]{font-size:10px}.crm-select-item[_ngcontent-%COMP%]{font-size:var(--crm-input-input-font-size)}.crm-select-item[_ngcontent-%COMP%]   ion-select-option[_ngcontent-%COMP%]{font-size:var(--crm-input-input-font-size)}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px auto}.view-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;width:-moz-fit-content;width:fit-content;border:1px solid var(--crm-grey-color-light);border-radius:100px;height:35px;margin:0 15px}.view-toggle-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:225px;height:28px;border-radius:100px}.view-toggle-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-font-color-light);font-size:var(--crm-font-size-big);font-weight:500}.view-toggle-button[_ngcontent-%COMP%]:hover{cursor:pointer}.left-view-button[_ngcontent-%COMP%]{margin-left:3px}.right-view-button[_ngcontent-%COMP%]{margin-right:3px}.active-view[_ngcontent-%COMP%]{background-color:var(--crm-primary-color);pointer-events:none}.active-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--crm-white-color)}.current-date-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto 15px}.current-date-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.calendar-buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center}.nav-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:25px}.nav-button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--crm-primary-color-light)}.prev-button[_ngcontent-%COMP%]{border-radius:12px 0 0 12px}.next-button[_ngcontent-%COMP%]{border-radius:0 12px 12px 0}.scrollable-visits-container[_ngcontent-%COMP%]{width:100%;overflow-y:auto}.expand-visits[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;height:170px;transition:.3s}.collapse-visits[_ngcontent-%COMP%]{transform:translateY(-20px);opacity:0;visibility:hidden;height:0;transition:.3s}.expanded-visits-container-arrow[_ngcontent-%COMP%]{transform:rotate(0);transition:.25s}.collapsed-visits-container-arrow[_ngcontent-%COMP%]{transform:rotate(180deg);transition:.25s}.new-visit-calendar-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:0 auto 15px;border-radius:8px;background-color:#ecf2ff}.new-visit-calendar-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--crm-font-family);color:var(--crm-primary-color);font-size:var(--crm-font-size-small);font-weight:500;margin:10px 0 0 10px}.new-visit-calendar-card[_ngcontent-%COMP%]:hover{cursor:pointer}.new-visit-date-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:10px;margin-bottom:10px}.new-visit-date-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 10px;font-family:var(--crm-font-family);color:var(--crm-primary-color);font-size:var(--crm-font-size-small);font-weight:500}.new-visit-notification-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:100%;width:22px;height:22px;background-color:var(--crm-primary-color);margin-right:10px}.new-visit-notification-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.disabled-expandable-visits-header[_ngcontent-%COMP%]{pointer-events:none}.pending-visits-calendar-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:0 auto 15px;border-top:1px solid var(--crm-grey-color-light);border-bottom:1px solid var(--crm-grey-color-light)}.pending-visits-calendar-card[_ngcontent-%COMP%]:hover{cursor:pointer}.pending-visit-info-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin:15px 0}.pending-visit-info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-size:var(--crm-font-size-small)}.pending-visit-icon[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:100%;background-color:#3a50e4;margin-right:5px;margin-left:5px}.evaluating-visit-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:100%;margin-right:5px;margin-left:5px;border:1.25px solid var(--crm-primary-color)}.evaluating-visit-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-primary-color)}.pending-visit-time-container[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:space-between;margin-bottom:15px}.pending-visit-time-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 20px;font-family:var(--crm-font-family);color:var(--crm-black-color);font-size:var(--crm-font-size-small)}.pending-visit-time-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:100%;margin-right:10px;border:1px solid var(--crm-font-color-light)}.evaluate-visit-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:90%;height:40px;border-radius:8px;background-color:var(--crm-primary-color);margin:0 auto 15px}.evaluate-visit-button[_ngcontent-%COMP%]:hover{cursor:pointer}.evaluate-visit-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--crm-font-family);color:var(--crm-white-color);font-size:var(--crm-font-size-big)}.evaluating-visits-calendar-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin:0 auto 15px;border-top:1px solid var(--crm-grey-color-light);border-bottom:1px solid var(--crm-grey-color-light)}.custom-cell[_ngcontent-%COMP%]{padding:4px;height:100%;display:flex;flex-direction:column}.day-number[_ngcontent-%COMP%]{margin-bottom:4px}.event-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.new-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:95%;height:25px;margin:3px auto;background-color:#ecf2ff;border-radius:8px}.new-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 0 5px;font-family:var(--crm-font-family);color:var(--crm-primary-color);font-weight:500;font-size:10px}.new-visit-event-calendar-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;background-color:var(--crm-primary-color);border-radius:100%}.new-visit-event-calendar-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.completed-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;margin:3px 0}.completed-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-weight:500;font-size:10px}.completed-visit-event[_ngcontent-%COMP%]   .event-marker[_ngcontent-%COMP%]{display:flex;width:10px;height:10px;border-radius:100%;background-color:#00c751;margin-right:3px}.rejected-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;margin:3px 0}.rejected-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-weight:500;font-size:10px}.rejected-visit-event[_ngcontent-%COMP%]   .event-marker[_ngcontent-%COMP%]{display:flex;width:10px;height:10px;border-radius:100%;background-color:#f44336;margin-right:3px}.pending-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;margin:3px 0}.pending-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-black-color);font-weight:500;font-size:10px}.pending-visit-event[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--crm-font-color-light)}.pending-visit-event[_ngcontent-%COMP%]   .event-marker[_ngcontent-%COMP%]{display:flex;width:10px;height:10px;border-radius:100%;background-color:#3a50e4;margin-right:3px}.evaluating-visit-event[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--crm-primary-background);border-radius:8px;height:25px;border:1px solid var(--crm-grey-color-light)}.evaluating-visit-event[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-family:var(--crm-font-family);color:var(--crm-primary-color);font-weight:500;font-size:10px}.evaluate-visit-event-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:15px;height:15px;border-radius:100%;border:1px solid var(--crm-primary-color);margin-right:3px;margin-left:3px}.evaluate-visit-event-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-primary-color)}']}),r})()}];let ce=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[j.iI.forChild(le),j.iI]}),r})();var se=g(1163),de=g(3732);let ge=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[x.MD,S.YN,_.bv,ce,h.rO.forRoot({provide:h.MJ,useFactory:se.a}),de.D]}),r})()}}]);