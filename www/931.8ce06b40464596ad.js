"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[931],{6906:(w,f,c)=>{c.d(f,{CP:()=>y,I:()=>h,Rl:()=>m,qA:()=>T});let y=["#686868","#00C751","#C98BDB","#C0AC4C","#3A50E4","#F14E1C"],h={"#686868":"#F0F0F0","#00C751":"#E5F9EE","#C98BDB":"#FAF3FB","#C0AC4C":"#FFFBE8","#3A50E4":"#ECF2FF","#F14E1C":"#FEEDE8"};const m=[{key:"sole_administrator",label:"Administrador \xfanico"},{key:"joint_and_several_administrator",label:"Administrador solidario"},{key:"joint_administrator",label:"Administrador mancomunado"},{key:"delegated_director",label:"Consejero delegado"},{key:"general_attorney",label:"Apoderado general"},{key:"special_attorney",label:"Apoderado especial"},{key:"chairman_of_board",label:"Presidente del Consejo"}],T={sole_administrator:"Administrador \xfanico",joint_and_several_administrator:"Administrador solidario",joint_administrator:"Administrador mancomunado",delegated_director:"Consejero delegado",general_attorney:"Apoderado general",special_attorney:"Apoderado especial",chairman_of_board:"Presidente del Consejo"}},4954:(w,f,c)=>{c.d(f,{R:()=>n});var e=c(3953),y=c(8359),h=c(467),m=c(1413),T=c(152),p=c(5558),b=c(6039);let k=(()=>{var s;class r{constructor(i){this.api=i,this.searchTermSubject=new m.B,this.searchResults$=this.searchTermSubject.pipe((0,T.B)(300),(0,p.n)(d=>this.performSearch(d)))}search(i){this.searchTermSubject.next(i)}performSearch(i){var d=this;return(0,h.A)(function*(){var u;i=(i=i.trim()).toLowerCase();const C=yield d.api.getUser({OR:[{name:{contains:i,mode:"insensitive"}},{email:{contains:i,mode:"insensitive"}}]},null,{page:0,itemsPerPage:10});return(null==C||null===(u=C.success)||void 0===u?void 0:u.data)||[]})()}}return(s=r).\u0275fac=function(i){return new(i||s)(e.KVO(b.i))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),r})();var _=c(177),v=c(9417);const A=["wrapper"];function I(s,r){if(1&s){const o=e.RV6();e.j41(0,"div",9),e.bIt("click",function(d){const u=e.eBV(o).$implicit,C=e.XpG(2);return e.Njj(C.onUserSelect(u,d))}),e.j41(1,"div",10)(2,"div",11),e.nrm(3,"img",12),e.k0s(),e.j41(4,"div",13)(5,"div",14),e.EFF(6),e.k0s(),e.j41(7,"div",15),e.EFF(8),e.k0s()()(),e.nrm(9,"div",16),e.k0s()}if(2&s){const o=r.$implicit;e.R7$(3),e.Y8G("src",null==o?null:o.photoUrl,e.B4B),e.R7$(3),e.SpI(" ",null==o?null:o.name," "),e.R7$(2),e.SpI(" ",null==o?null:o.email," ")}}function t(s,r){1&s&&(e.j41(0,"div",17),e.EFF(1," No hay resultados "),e.k0s())}function a(s,r){if(1&s&&(e.j41(0,"div",6),e.Z7z(1,I,10,3,"div",7,e.fX1),e.DNE(3,t,2,0,"div",8),e.k0s()),2&s){const o=e.XpG();e.R7$(),e.Dyx(o.searchResults),e.R7$(2),e.Y8G("ngIf",0===o.searchResults.length)}}let n=(()=>{var s;class r{constructor(i,d){this.renderer=i,this.searchbarService=d,this.userSelected=new e.bkB,this.clickOutSide=new e.bkB,this.searchTerm="",this.dropdownOpen=!1,this.searchResults=[],this.clicked=!1,this.globalClickUnlistener=null,this.documentClickListenerCleanup=null,this.searchSubscription=new y.yU}ngOnInit(){this.searchSubscription=this.searchbarService.searchResults$.subscribe(i=>{this.searchResults=i})}ngAfterViewInit(){this.documentClickListenerCleanup=this.renderer.listen("document","click",i=>{!this.wrapperRef.nativeElement.contains(i.target)&&this.clicked&&this.clickOutSide.emit(),this.clicked=!0})}onInputClick(i){i.stopPropagation(),this.dropdownOpen||this.openDropdown()}onSearchTermChange(i){this.searchTerm=i,this.searchbarService.search(i)}onUserSelect(i,d){d.stopPropagation(),this.closeDropdown(),this.userSelected.emit(i)}openDropdown(){this.dropdownOpen=!0,this.attachDocumentClickListener()}closeDropdown(){this.dropdownOpen=!1,this.detachDocumentClickListener()}attachDocumentClickListener(){this.globalClickUnlistener=this.renderer.listen("document","click",i=>{i.target.closest(".agents-searchbar-container")||(this.closeDropdown(),this.clickOutSide.emit())})}detachDocumentClickListener(){this.globalClickUnlistener&&(this.globalClickUnlistener(),this.globalClickUnlistener=null)}ngOnDestroy(){this.detachDocumentClickListener(),this.searchSubscription.unsubscribe(),this.documentClickListenerCleanup&&(this.documentClickListenerCleanup(),this.documentClickListenerCleanup=null)}}return(s=r).\u0275fac=function(i){return new(i||s)(e.rXU(e.sFG),e.rXU(k))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-agents-searchbar"]],viewQuery:function(i,d){if(1&i&&e.GBs(A,5),2&i){let u;e.mGM(u=e.lsd())&&(d.wrapperRef=u.first)}},outputs:{userSelected:"userSelected",clickOutSide:"clickOutSide"},decls:6,vars:2,consts:[["wrapper",""],[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar","crm-input-input-searchbar-square","agents-searchbar-container",3,"click"],[1,"fas","fa-search"],["type","text","placeholder","Nombre",3,"ngModelChange","ngModel"],["class","dropdown-options",4,"ngIf"],[1,"dropdown-options"],[1,"crm-item-searchbar-agent-result"],["class","no-results",4,"ngIf"],[1,"crm-item-searchbar-agent-result",3,"click"],[1,"crm-item-searchbar-agent-result-left"],[1,"crm-item-searchbar-agent-result-left-image"],["alt","",3,"src"],[1,"crm-item-searchbar-agent-result-left-info"],[1,"crm-item-searchbar-agent-result-left-info-name"],[1,"crm-item-searchbar-agent-result-left-info-email"],[1,"crm-item-searchbar-agent-result-right"],[1,"no-results"]],template:function(i,d){if(1&i){const u=e.RV6();e.j41(0,"div",1)(1,"div",2,0),e.bIt("click",function(g){return e.eBV(u),e.Njj(d.onInputClick(g))}),e.nrm(3,"i",3),e.j41(4,"input",4),e.mxI("ngModelChange",function(g){return e.eBV(u),e.DH7(d.searchTerm,g)||(d.searchTerm=g),e.Njj(g)}),e.bIt("ngModelChange",function(g){return e.eBV(u),e.Njj(d.onSearchTermChange(g))}),e.k0s(),e.DNE(5,a,4,1,"div",5),e.k0s()()}2&i&&(e.R7$(4),e.R50("ngModel",d.searchTerm),e.R7$(),e.Y8G("ngIf",d.dropdownOpen))},dependencies:[_.bT,v.me,v.BC,v.vS],styles:[".agents-searchbar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.dropdown-options[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;z-index:9999;background-color:#fff;padding:8px 0;border-radius:8px;border:1px solid var(--crm-border-light-color);max-height:200px;overflow-y:auto;font-size:14px}.option[_ngcontent-%COMP%]{padding:8px;display:flex;align-items:center;cursor:pointer;font-size:14px}.option[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.no-results[_ngcontent-%COMP%]{padding:8px;color:#888}"]}),r})()},5696:(w,f,c)=>{c.d(f,{y:()=>a});var e=c(3953),y=c(8359),h=c(467),m=c(1413),T=c(152),p=c(5558),b=c(6039);let k=(()=>{var n;class s{constructor(o){this.api=o,this.searchTermSubject=new m.B,this.searchResults$=this.searchTermSubject.pipe((0,T.B)(300),(0,p.n)(i=>this.performSearch(i)))}search(o){this.searchTermSubject.next(o)}performSearch(o){var i=this;return(0,h.A)(function*(){var d;o=(o=o.trim()).toLowerCase();const u=yield i.api.getContacts({OR:[{name:{contains:o,mode:"insensitive"}}]},null,{page:0,itemsPerPage:10});return(null==u||null===(d=u.success)||void 0===d?void 0:d.data)||[]})()}}return(n=s).\u0275fac=function(o){return new(o||n)(e.KVO(b.i))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),s})();var _=c(177),v=c(9417);function A(n,s){if(1&n){const r=e.RV6();e.j41(0,"div",8),e.bIt("click",function(i){const d=e.eBV(r).$implicit,u=e.XpG(2);return e.Njj(u.onContactSelect(d,i))}),e.j41(1,"div",9)(2,"div",10),e.nrm(3,"img",11),e.k0s(),e.j41(4,"div",12)(5,"div",13),e.EFF(6),e.k0s(),e.j41(7,"div",14),e.EFF(8),e.k0s()()(),e.j41(9,"div",15),e.EFF(10),e.k0s()()}if(2&n){const r=s.$implicit;e.R7$(3),e.Y8G("src",(null==r?null:r.photoUrl)||"assets/images/avatar.png",e.B4B),e.R7$(3),e.SpI(" ",null==r?null:r.name," "),e.R7$(2),e.SpI(" ",null==r||null==r.emails?null:r.emails[0]," "),e.R7$(2),e.SpI(" ",null==r?null:r.reference," ")}}function I(n,s){1&n&&(e.j41(0,"div",16),e.EFF(1," No hay resultados "),e.k0s())}function t(n,s){if(1&n&&(e.j41(0,"div",5),e.Z7z(1,A,11,4,"div",6,e.fX1),e.DNE(3,I,2,0,"div",7),e.k0s()),2&n){const r=e.XpG();e.R7$(),e.Dyx(r.searchResults),e.R7$(2),e.Y8G("ngIf",0===r.searchResults.length)}}let a=(()=>{var n;class s{constructor(o,i){this.renderer=o,this.searchbarService=i,this.contactSelected=new e.bkB,this.searchTerm="",this.dropdownOpen=!1,this.searchResults=[],this.globalClickUnlistener=null,this.searchSubscription=new y.yU}ngOnInit(){this.searchSubscription=this.searchbarService.searchResults$.subscribe(o=>{this.searchResults=o})}onInputClick(o){o.stopPropagation(),this.dropdownOpen||this.openDropdown()}onSearchTermChange(o){this.searchTerm=o,this.searchbarService.search(o)}onContactSelect(o,i){i.stopPropagation(),this.closeDropdown(),this.contactSelected.emit(o)}openDropdown(){this.dropdownOpen=!0,this.attachDocumentClickListener()}closeDropdown(){this.dropdownOpen=!1,this.detachDocumentClickListener()}attachDocumentClickListener(){this.globalClickUnlistener=this.renderer.listen("document","click",o=>{o.target.closest(".agents-searchbar-container")||this.closeDropdown()})}detachDocumentClickListener(){this.globalClickUnlistener&&(this.globalClickUnlistener(),this.globalClickUnlistener=null)}ngOnDestroy(){this.detachDocumentClickListener(),this.searchSubscription.unsubscribe()}}return(n=s).\u0275fac=function(o){return new(o||n)(e.rXU(e.sFG),e.rXU(k))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-contacts-searchbar"]],inputs:{searchTerm:"searchTerm"},outputs:{contactSelected:"contactSelected"},decls:5,vars:2,consts:[[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar","crm-input-input-searchbar-square","agents-searchbar-container",3,"click"],[1,"fas","fa-search"],["type","text","placeholder","Nombre",3,"ngModelChange","ngModel"],["class","dropdown-options mt-[5px]",4,"ngIf"],[1,"dropdown-options","mt-[5px]"],[1,"crm-item-searchbar-agent-result"],["class","no-results",4,"ngIf"],[1,"crm-item-searchbar-agent-result",3,"click"],[1,"crm-item-searchbar-agent-result-left"],[1,"crm-item-searchbar-agent-result-left-image"],["alt","",3,"src"],[1,"crm-item-searchbar-agent-result-left-info"],[1,"crm-item-searchbar-agent-result-left-info-name","!text-[14px]"],[1,"crm-item-searchbar-agent-result-left-info-email","!text-[12px]"],[1,"crm-item-searchbar-agent-result-right","!text-[13px]","text-secondary"],[1,"no-results"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1),e.bIt("click",function(u){return i.onInputClick(u)}),e.nrm(2,"i",2),e.j41(3,"input",3),e.mxI("ngModelChange",function(u){return e.DH7(i.searchTerm,u)||(i.searchTerm=u),u}),e.bIt("ngModelChange",function(u){return i.onSearchTermChange(u)}),e.k0s(),e.DNE(4,t,4,1,"div",4),e.k0s()()),2&o&&(e.R7$(3),e.R50("ngModel",i.searchTerm),e.R7$(),e.Y8G("ngIf",i.dropdownOpen))},dependencies:[_.bT,v.me,v.BC,v.vS],styles:[".agents-searchbar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.dropdown-options[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;z-index:9999;background-color:#fff;padding:8px 0;border-radius:8px;border:1px solid var(--crm-border-light-color);max-height:150px;overflow-y:auto;font-size:14px}.option[_ngcontent-%COMP%]{padding:8px;display:flex;align-items:center;cursor:pointer;font-size:14px}.option[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.no-results[_ngcontent-%COMP%]{padding:8px;color:#888}"]}),s})()},8129:(w,f,c)=>{c.d(f,{K:()=>y});var e=c(3953);let y=(()=>{var h;class m{constructor(p,b){this.el=p,this.renderer=b,this.isLoading=!1}ngOnChanges(p){"isLoading"in p&&this.updateButtonState()}updateButtonState(){const p=this.el.nativeElement;if(this.isLoading){p.getAttribute("data-original-content")||this.renderer.setAttribute(p,"data-original-content",p.innerHTML),this.renderer.setProperty(p,"disabled",!0),this.renderer.setStyle(p,"opacity","0.6"),this.renderer.setStyle(p,"pointer-events","none"),this.renderer.setStyle(p,"cursor","not-allowed");const b=this.renderer.createElement("ion-spinner"),k=this.renderer.createText(" Cargando...");this.renderer.setProperty(p,"innerHTML",""),this.renderer.appendChild(p,b),this.renderer.appendChild(p,k)}else{this.renderer.setProperty(p,"disabled",!1),this.renderer.removeStyle(p,"opacity"),this.renderer.removeStyle(p,"pointer-events"),this.renderer.removeStyle(p,"cursor");const b=p.getAttribute("data-original-content");b&&(this.renderer.setProperty(p,"innerHTML",b),this.renderer.removeAttribute(p,"data-original-content"))}}}return(h=m).\u0275fac=function(p){return new(p||h)(e.rXU(e.aKT),e.rXU(e.sFG))},h.\u0275dir=e.FsC({type:h,selectors:[["","appLoadingButton",""]],inputs:{isLoading:[0,"appLoadingButton","isLoading"]},standalone:!0,features:[e.OA$]}),m})()},9333:(w,f,c)=>{c.d(f,{F:()=>_});var e=c(467);const y=[{id:"1",name:"Juan P\xe9rez",emails:["juan.perez@example.com"],phones:["+34 600 123 456"],address:"Calle Mayor 123, 28013 Madrid, Espa\xf1a",reference:"Ref001",origin:"Idealista",photoUrl:"https://randomuser.me/api/portraits/men/1.jpg",photoName:"juan_perez.jpg",createdAt:new Date("2024-01-15T10:00:00"),updatedAt:new Date("2024-04-20T15:30:00"),tags:[{id:"tag1",value:"Interested",text:"Interested in product"},{id:"tag2",value:"Follow-Up",text:"Requires follow-up"}]},{id:"2",name:"Mar\xeda L\xf3pez",emails:["maria.lopez@example.com"],phones:["+34 600 789 012"],address:"Avenida de la Constituci\xf3n 45, 41004 Sevilla, Espa\xf1a",reference:"Ref002",origin:"Fotocasa",photoUrl:"https://randomuser.me/api/portraits/women/2.jpg",photoName:"maria_lopez.png",createdAt:new Date("2023-11-10T09:30:00"),updatedAt:new Date("2024-03-18T11:45:00"),tags:[{id:"tag3",value:"VIP",text:"VIP customer"}]},{id:"3",name:"Carlos Garc\xeda",emails:["carlos.garcia@example.com","cgarcia@personalmail.com"],phones:["+34 600 345 678"],address:"Calle de la Luna 78, 08002 Barcelona, Espa\xf1a",reference:"Ref003",origin:"Manual",photoUrl:"https://randomuser.me/api/portraits/men/3.jpg",photoName:"carlos_garcia.jpg",createdAt:new Date("2024-02-05T14:20:00"),updatedAt:new Date("2024-05-10T16:00:00"),tags:[{id:"tag4",value:"Needs Info",text:"Needs more information"},{id:"tag5",value:"Interested",text:"Interested in product"}]},{id:"4",name:"Luc\xeda Fern\xe1ndez",emails:["lucia.fernandez@example.com"],phones:["+34 600 901 234","+34 600 567 890"],address:"Paseo de Gracia 256, 08007 Barcelona, Espa\xf1a",reference:"Ref004",origin:"Habitaclia",photoUrl:"https://randomuser.me/api/portraits/women/4.jpg",photoName:"lucia_fernandez.png",createdAt:new Date("2023-12-22T08:15:00"),updatedAt:new Date("2024-06-25T13:50:00"),tags:[{id:"tag6",value:"Repeat Client",text:"Repeat client"}]},{id:"5",name:"Pedro Mart\xednez",emails:["pedro.martinez@example.com"],phones:["+34 600 234 567"],address:"Calle de Alcal\xe1 89, 28014 Madrid, Espa\xf1a",reference:"Ref005",origin:"Idealista",photoUrl:"https://randomuser.me/api/portraits/men/5.jpg",photoName:"pedro_martinez.jpg",createdAt:new Date("2024-03-12T12:00:00"),updatedAt:new Date("2024-07-30T10:25:00"),tags:[{id:"tag7",value:"New",text:"New contact"},{id:"tag8",value:"Potential",text:"Potential client"}]},{id:"6",name:"Ana Torres",emails:["ana.torres@example.com"],phones:["+34 600 678 901"],address:"Gran V\xeda 45, 28013 Madrid, Espa\xf1a",reference:"Ref006",origin:"Manual",photoUrl:"https://randomuser.me/api/portraits/women/6.jpg",photoName:"ana_torres.jpg",createdAt:new Date("2024-04-01T11:00:00"),updatedAt:new Date("2024-08-15T14:30:00"),tags:[{id:"tag9",value:"VIP",text:"VIP customer"},{id:"tag10",value:"Loyal",text:"Loyal customer"}]}];var h=c(7376),m=c(3953),T=c(8397),p=c(6039),b=c(6552),k=c(8147);let _=(()=>{var v;class A{constructor(t,a,n,s){this.toastService=t,this.api=a,this.utils=n,this.translate=s,this.mockContacts=y,this.possibleValues={contactType:["potential_client","client"],origin:["Idealista","Fotocasa","Manual","Habitaclia"],nationality:["spain","france","germany"],gender:["male","female","other"]}}getContacts(t,a,n,s){var r=this;return(0,e.A)(function*(){const o=yield r.api.getContacts(t,a||{field:"createdAt",order:"desc"},n||{page:0,itemsPerPage:50},s||{tag:{apply:!0,filter:null,onlyCount:!1},operations:{apply:!0,filter:null,onlyCount:!1},contactsRelated:{apply:!0,filter:{},onlyCount:!1},contactsRelation:{apply:!0,filter:{},onlyCount:!1},responsableUsers:{apply:!0,filter:{},onlyCount:!1}});return console.log("ELS CONTACTS",o),o.success})()}createOrUpdateContactFromForm(t,a){var n=this;return(0,e.A)(function*(){try{const g=t.contactForm;if(g.markAllAsTouched(),g.valid){var s,r,o,i;let j=h.cloneDeep(g.value),S=n.buildContactFromForm(j);if(S=yield t.fileUploaderManager.processProfilePic(S),S=n.utils.parseProperties(S),S.languages=(null==t||null===(s=t.contact)||void 0===s?void 0:s.languages)||[],S.nationality=(null==t||null===(r=t.contact)||void 0===r?void 0:r.nationality)||null,console.log("EL CONTACT",h.cloneDeep(S)),a)yield n.api.updateContactById(a,S);else{var d;const l=yield n.api.createContact(S);a=null==l||null===(d=l.success)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.id}const R=(null==t||null===(o=t.contact)||void 0===o?void 0:o.responsableUsers)||[];for(let l of R)null!=l&&l.removed&&(yield n.api.removeUserFromContact(a,l.id)),null!=l&&l.new&&(yield n.api.addUserToContact(a,l.id));const O=(null==t||null===(i=t.contact)||void 0===i?void 0:i.contactsRelation)||[];for(let l of O){var u,C;if(console.log("LA CONTACT RELATION",l),null!=l&&l.removed)yield n.api.removeContactRelation(a,null==l||null===(u=l.contactRelated)||void 0===u?void 0:u.id);if(null!=l&&l.new)yield n.api.addContactRelation(a,null==l||null===(C=l.contactRelated)||void 0===C?void 0:C.id,null==l?void 0:l.relationType);null!=l&&l.edited&&(yield n.api.editContactRelation(null==l?void 0:l.id,null==l?void 0:l.relationType))}return n.toastService.showToast({text:n.translate.instant("contacts.service.saved"),time:2e3,theme:"success"}),!0}return n.toastService.showToast({text:n.translate.instant("contacts.service.invalid_fields"),time:3e3,theme:"red"}),!1}catch(g){return console.error(g),!1}})()}deleteContact(t){var a=this;return(0,e.A)(function*(){yield a.api.deleteContactById(t),yield a.toastService.showToast({text:a.translate.instant("contacts.service.deleted"),theme:"success",time:3e3}),a.getContacts()})()}getContactById(t){var a=this;return(0,e.A)(function*(){var n;let s=null===(n=yield a.api.getContactById(t))||void 0===n||null===(n=n.success)||void 0===n?void 0:n.data;return s||a.toastService.showToast({text:a.translate.instant("contacts.service.not_found"),icon:"fas fa-exclamation-triangle",theme:"red",time:3e3}),s})()}removeAllContactTags(t){var a=this;return(0,e.A)(function*(){return yield a.api.removeAllContactTags(t)})()}updateContactsTags(t,a){var n=this;return(0,e.A)(function*(){for(let s of t){yield n.removeAllContactTags(s.id);for(let r of a)yield n.api.addTagToContact(s.id,r.id)}})()}buildContactFromForm(t){const a={id:"",name:t.name,contactType:t.contactType,dniPassport:t.dniPassport,nationality:t.nationality,origin:t.origin,birthdate:t.birthdate,gender:t.gender,alias:t.alias,address:t.address,phones:t.contactPhones.map(n=>n.phoneNumber),emails:t.contactEmails.map(n=>n.emailAddress),urlFacebook:t.urlFacebook,urlInstagram:t.urlInstagram,urlLinkedIn:t.urlLinkedIn,photoName:t.photoName,photoUrl:t.photoUrl,reference:t.reference};return a.phones=a.phones.filter(n=>n),a.emails=a.emails.filter(n=>n),a}replaceContactsTags(t,a){return t=JSON.parse(JSON.stringify(t)),a=JSON.parse(JSON.stringify(a)),t.map(n=>a.find(r=>r.id===n.id)||n)}createJoinTablesForTags(t){let a={};if(t.tags&&t.tags.length>0){const n=t.tags.map(s=>s.id).filter(s=>void 0!==s);n.length>0&&(a.tag={apply:!0,filter:{id:{in:n}},onlyCount:!1})}return a}transformFilterDataToFilterI(t,a=""){const n={};if(null!=t&&t.name&&(n.name={contains:t.name,mode:"insensitive"}),null!=t&&t.dniPassport&&(n.dniPassport={contains:t.dniPassport,mode:"insensitive"}),null!=t&&t.alias&&(n.alias={contains:t.alias,mode:"insensitive"}),null!=t&&t.address&&(n.address={contains:t.address,mode:"insensitive"}),null!=t&&t.urlFacebook&&(n.urlFacebook={contains:t.urlFacebook,mode:"insensitive"}),null!=t&&t.urlInstagram&&(n.urlInstagram={contains:t.urlInstagram,mode:"insensitive"}),null!=t&&t.urlLinkedIn&&(n.urlLinkedIn={contains:t.urlLinkedIn,mode:"insensitive"}),null!=t&&t.emailAddress&&(n.emails={has:t.emailAddress}),null!=t&&t.phoneNumber&&(n.phones={has:t.phoneNumber}),null!=t&&t.contactType&&t.contactType.length>0){const s=t.contactType.filter(r=>this.possibleValues.contactType.includes(r));s.length>0&&(n.contactType={in:s})}if(null!=t&&t.origin&&t.origin.length>0&&(n.origin={in:t.origin}),null!=t&&t.nationality&&t.nationality.length>0){const s=t.nationality.filter(r=>this.possibleValues.nationality.includes(r));s.length>0&&(n.nationality={in:s})}if(null!=t&&t.gender&&t.gender.length>0){const s=t.gender.filter(r=>this.possibleValues.gender.includes(r));s.length>0&&(n.gender={in:s})}if((null!=t&&t.birthdateFrom||null!=t&&t.birthdateTo)&&(n.birthdate={},t.birthdateFrom&&(n.birthdate.gte=new Date(t.birthdateFrom)),t.birthdateTo&&(n.birthdate.lte=new Date(t.birthdateTo))),(null!=t&&t.createdAtFrom||null!=t&&t.createdAtTo)&&(n.createdAt={},t.createdAtFrom&&(n.createdAt.gte=new Date(t.createdAtFrom)),t.createdAtTo&&(n.createdAt.lte=new Date(t.createdAtTo))),null!=t&&t.associatedUser&&(n.associatedUser={name:{contains:t.associatedUser,mode:"insensitive"}}),a&&""!==a.trim()){const s=this.possibleValues.contactType.filter(i=>i.toLowerCase().includes(a.toLowerCase())),r=this.possibleValues.origin.filter(i=>i.toLowerCase().includes(a.toLowerCase())),o={OR:[{name:{contains:a,mode:"insensitive"}},{dniPassport:{contains:a,mode:"insensitive"}},{alias:{contains:a,mode:"insensitive"}},{address:{contains:a,mode:"insensitive"}},{urlFacebook:{contains:a,mode:"insensitive"}},{urlInstagram:{contains:a,mode:"insensitive"}},{urlLinkedIn:{contains:a,mode:"insensitive"}},{nationality:{contains:a,mode:"insensitive"}},{gender:{contains:a,mode:"insensitive"}},{emails:{has:a}},{phones:{has:a}},...s.length>0?[{contactType:{in:s}}]:[],...r.length>0?[{origin:{in:r}}]:[]]};return Object.keys(n).length>0?{AND:[n,o]}:o}return n}}return(v=A).\u0275fac=function(t){return new(t||v)(m.KVO(T.f),m.KVO(p.i),m.KVO(b.T),m.KVO(k.c$))},v.\u0275prov=m.jDH({token:v,factory:v.\u0275fac,providedIn:"root"}),A})()},8392:(w,f,c)=>{c.d(f,{R:()=>e});const e={contactType:[{value:"client",label:"Cliente"},{value:"potential_client",label:"Cliente potencial"},{value:"owner",label:"Propietario"},{value:"external_broker",label:"Broker externo"},{value:"referred",label:"Referido"},{value:"investor",label:"Inversor"}],origin:[{value:"registered_agency",label:"Registrado por agencia"},{value:"a_place_in_the_sun",label:"A Place in the Sun"},{value:"facebook_ads",label:"Facebook Ads"},{value:"fotocasa",label:"Fotocasa"},{value:"google_ads",label:"Google Ads"},{value:"green_acres",label:"Green-Acres"},{value:"habitaclia",label:"Habitaclia"},{value:"james_edition",label:"JamesEdition"},{value:"immobilienscout24",label:"ImmobilienScout24"},{value:"immonet",label:"Immonet"},{value:"immowelt",label:"ImmoWelt"},{value:"idealista",label:"Idealista"},{value:"instagram_ads",label:"Instagram Ads"},{value:"kyero",label:"Kyero"},{value:"linkedin_ads",label:"LinkedIn Ads"},{value:"list_globally",label:"ListGlobally"},{value:"luxury_estate",label:"LuxuryEstate"},{value:"newsletter",label:"Newsletter"},{value:"network_de_agentes_o_brokers",label:"Network de agentes o brokers"},{value:"networking_en_eventos",label:"Networking en eventos"},{value:"pisos_com",label:"Pisos.com"},{value:"prop_go_luxury",label:"PropGoLuxury"},{value:"referido_por_redes_sociales",label:"Referido por redes sociales"},{value:"recomendacion_de_cliente",label:"Recomendaci\xf3n de cliente"},{value:"recomendacion_interna",label:"Recomendaci\xf3n interna (de otros departamentos o contactos)"},{value:"rightmove",label:"Rightmove"},{value:"think_spain",label:"ThinkSpain"},{value:"visitas_presenciales_en_ferias_internacionales",label:"Visitas presenciales en ferias internacionales"},{value:"web_propio",label:"Web propio"},{value:"yaencontre",label:"Yaencontre"},{value:"youtube_ads",label:"YouTube Ads"},{value:"zoopla",label:"Zoopla"}]}}}]);