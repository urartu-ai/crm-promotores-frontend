"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8021],{8021:(ie,v,c)=>{c.r(v),c.d(v,{RegisterPageModule:()=>ne});var u=c(177),t=c(9417),m=c(9465),g=c(5188),p=c(467),e=c(3953),_=c(6039),F=c(8397);const l=r=>({"crm-input-input-error":r}),R=()=>["/auth/login"];function E(r,o){if(1&r&&(e.j41(0,"div",33)(1,"div",34),e.nrm(2,"img",35),e.k0s(),e.j41(3,"div",36)(4,"div")(5,"div",37),e.EFF(6),e.k0s(),e.j41(7,"div",38),e.EFF(8," la promoci\xf3n contiene 12 propiedades "),e.k0s()(),e.j41(9,"div")(10,"div",39),e.EFF(11),e.nI1(12,"date"),e.k0s()()()(),e.nrm(13,"div",40)(14,"div",41)),2&r){const n=o.$implicit;e.R7$(2),e.Y8G("src",(null==n||null==n.promotionFiles?null:n.promotionFiles.length)>0?null==n?null:n.promotionFiles[0].url:"assets/images/building.png",e.B4B),e.R7$(4),e.SpI(" Promoci\xf3n ",null==n?null:n.projectName," "),e.R7$(5),e.SpI(" Creado el ",e.i5U(12,3,null==n?null:n.createdAt,"dd/MM/yyyy")," ")}}function b(r,o){if(1&r&&(e.j41(0,"div",5),e.EFF(1," Reg\xedstrate para poder acceder a las siguientes promociones:"),e.k0s(),e.j41(2,"div",32),e.Z7z(3,E,15,6,null,null,e.fX1),e.k0s(),e.nrm(5,"br")),2&r){const n=e.XpG();e.R7$(3),e.Dyx(n.promotionsInvited)}}function I(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function h(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,I,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.registerForm.get("accountType").hasError("required"))}}function k(r,o){if(1&r&&(e.j41(0,"div",9)(1,"div",10),e.EFF(2,"\xbfEres una agencia o una promotora?"),e.k0s(),e.j41(3,"div",11)(4,"select",42)(5,"option",43),e.EFF(6,"Promotora"),e.k0s(),e.j41(7,"option",44),e.EFF(8,"Agencia"),e.k0s()()(),e.DNE(9,h,2,1,"div",13),e.k0s()),2&r){const n=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(2,l,n.isControlInvalid("accountType"))),e.R7$(6),e.Y8G("ngIf",n.isControlInvalid("accountType"))}}function C(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function P(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,C,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("companyName").hasError("required"))}}function G(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function y(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,G,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("isResponsable").hasError("required"))}}function N(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function j(r,o){1&r&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function q(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,N,2,0,"ng-container",46)(2,j,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.registerForm.get("responsableEmail").hasError("required")),e.R7$(),e.Y8G("ngIf",n.registerForm.get("responsableEmail").hasError("email"))}}function $(r,o){if(1&r&&(e.j41(0,"div",9)(1,"div",10),e.EFF(2,"Nombre del representante legal"),e.k0s(),e.j41(3,"div",11),e.nrm(4,"input",47),e.k0s()(),e.j41(5,"div",9)(6,"div",10),e.EFF(7,"Email del responsable"),e.k0s(),e.j41(8,"div",11),e.nrm(9,"input",48),e.k0s(),e.DNE(10,q,3,2,"div",13),e.k0s()),2&r){const n=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(3,l,n.isControlInvalid("responsableName"))),e.R7$(5),e.Y8G("ngClass",e.eq3(5,l,n.isControlInvalid("responsableEmail"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("responsableEmail"))}}function T(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function x(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,T,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("responsableAddress").hasError("required"))}}function Y(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function w(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,Y,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("responsableCif").hasError("required"))}}function D(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function M(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,D,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("responsablePhone").hasError("required"))}}function X(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function V(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,X,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("name").hasError("required"))}}function J(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function S(r,o){1&r&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function A(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,J,2,0,"ng-container",46)(2,S,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("email").hasError("required")),e.R7$(),e.Y8G("ngIf",n.registerForm.get("email").hasError("email"))}}function L(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function U(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,L,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("phoneNumber").hasError("required"))}}function B(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function z(r,o){1&r&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function O(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,B,2,0,"ng-container",46)(2,z,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("password").hasError("required")),e.R7$(),e.Y8G("ngIf",n.registerForm.get("password").hasError("minlength"))}}function H(r,o){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function W(r,o){1&r&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function K(r,o){1&r&&(e.qex(0),e.EFF(1,"Las contrase\xf1as no coinciden"),e.bVm())}function Z(r,o){if(1&r&&(e.j41(0,"div",45),e.DNE(1,H,2,0,"ng-container",46)(2,W,2,0,"ng-container",46)(3,K,2,0,"ng-container",46),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.Y8G("ngIf",n.registerForm.get("confirmPassword").hasError("required")),e.R7$(),e.Y8G("ngIf",n.registerForm.get("confirmPassword").hasError("minlength")),e.R7$(),e.Y8G("ngIf",n.registerForm.hasError("passwordMismatch"))}}function Q(r,o){if(1&r&&(e.j41(0,"div",45),e.qex(1),e.EFF(2),e.bVm(),e.k0s()),2&r){const n=e.XpG();e.R7$(2),e.JRh(n.globalErrorString)}}const ee=[{path:"",component:(()=>{var r;class o{constructor(s,i,a,d){this.router=s,this.activeRouter=i,this.api=a,this.toastService=d,this.agencyInvitationRegister=null,this.globalErrorString=""}ngOnInit(){var s=this;return(0,p.A)(function*(){s.initializeForm(),s.activeRouter.queryParams.subscribe(function(){var i=(0,p.A)(function*(a){if(a.agencyInvitationToPromotionsId&&a.email&&!s.agencyInvitationRegister){s.agencyInvitationRegister={agencyInvitationToPromotionsId:a.agencyInvitationToPromotionsId,agencyEmail:a.email};const d=yield s.api.getPromotionsFromAgencyRegister(s.agencyInvitationRegister.agencyInvitationToPromotionsId,s.agencyInvitationRegister.agencyEmail);s.promotionsInvited=d.success.data,localStorage.setItem("agencyInvitationToPromotionsId",s.agencyInvitationRegister.agencyInvitationToPromotionsId),s.registerForm.patchValue({email:s.agencyInvitationRegister.agencyEmail,accountType:"agency"})}});return function(a){return i.apply(this,arguments)}}())})()}initializeForm(){this.registerForm=new t.gE({companyName:new t.MJ("",[t.k0.required]),name:new t.MJ("",[t.k0.required]),email:new t.MJ("",[t.k0.required,t.k0.email]),phoneNumber:new t.MJ("",[t.k0.required]),accountType:new t.MJ("",[t.k0.required]),password:new t.MJ("",[t.k0.required,t.k0.minLength(8)]),confirmPassword:new t.MJ("",[t.k0.required,t.k0.minLength(8)]),isResponsable:new t.MJ("",[t.k0.required]),responsableEmail:new t.MJ("",[t.k0.email]),responsableName:new t.MJ(""),responsableCif:new t.MJ("",[t.k0.required]),responsableAddress:new t.MJ("",[t.k0.required,t.k0.minLength(6)]),responsablePhone:new t.MJ("",[t.k0.required,t.k0.minLength(9)])},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(s){var i,a;const d=null===(i=s.get("password"))||void 0===i?void 0:i.value,f=null===(a=s.get("confirmPassword"))||void 0===a?void 0:a.value;return d&&f&&d!==f?{passwordMismatch:!0}:null}isControlInvalid(s){const i=this.registerForm.get(s);return i&&i.invalid&&(i.touched||i.dirty)}onSubmit(){var s=this;return(0,p.A)(function*(){if(s.registerForm.valid){const i=s.registerForm.value;console.log("Form submitted successfully:",i);const a=yield s.api.register(i.email,i);null!=a&&a.success?(localStorage.setItem("tempUserRegister",JSON.stringify(i)),s.router.navigate(["/auth/confirm-email"])):(s.globalErrorString=a.error.errorMessage,s.toastService.showToast({text:"Ha ocurrido un error",theme:"red",time:2e3}))}else console.log("Form is invalid"),s.registerForm.markAllAsTouched(),s.toastService.showToast({text:"El formulario no es v\xe1lido",theme:"red",time:2e3})})()}}return(r=o).\u0275fac=function(s){return new(s||r)(e.rXU(g.Ix),e.rXU(g.nX),e.rXU(_.i),e.rXU(F.f))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register"]],decls:92,vars:46,consts:[[1,"crm-box","crm-section","crm-section-center-content","crm-section-margin-top",2,"margin-top","80px"],[1,"crm-header-icon","no-padding","no-line","bottom-margin"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-user-plus"],[1,"crm-header-icon-title"],[1,"crm-header-icon-right"],[1,"crm-section-inputs",3,"ngSubmit","formGroup"],["class","crm-input",4,"ngIf"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Introduce el nombre comercial de la empresa","formControlName","companyName"],["class","crm-input-error",4,"ngIf"],[1,"crm-input","crm-input-radio-box"],["formControlName","isResponsable",1,"crm-input-radios"],[1,"crm-input-radio"],[3,"value"],[1,"crm-input-radio-label"],["type","text","placeholder","Introduce la direcci\xf3n del responsable","formControlName","responsableAddress"],["type","text","placeholder","Introduce el cif/dni/nie del responsable","formControlName","responsableCif"],["type","tel","placeholder","Introduce el tel\xe9fono del responsable","formControlName","responsablePhone"],[1,"crm-section-title"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","name"],["type","email","placeholder","Introduce el email del responsable","formControlName","email"],["type","tel","placeholder","Introduce el tel\xe9fono del responsable","formControlName","phoneNumber"],["type","password","placeholder","Introduce la contrase\xf1a","formControlName","password"],["type","password","placeholder","Repite la contrase\xf1a","formControlName","confirmPassword"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[1,"crm-button","crm-button-secondary",3,"routerLink"],["type","submit",1,"crm-button","crm-button-primary"],[1,"crm-block-details-header-left"],[1,"crm-block-photo-and-info"],[1,"crm-block-photo-and-info-img","crm-block-photo-and-info-img-promotion"],["alt","",3,"src"],[1,"crm-block-photo-and-info-info"],[1,"crm-block-photo-and-info-info-title"],[1,"crm-block-photo-and-info-info-subtitle"],[1,"crm-block-photo-and-info-info-footer"],[1,"crm-vertical-separator"],[1,"crm-block-info-horizontal"],["formControlName","accountType"],["value","promoter"],["value","agency"],[1,"crm-input-error"],[4,"ngIf"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","responsableName"],["type","email","placeholder","Introduce el email del responsable","formControlName","responsableEmail"]],template:function(s,i){1&s&&(e.j41(0,"ion-content")(1,"div",0),e.DNE(2,b,6,0),e.j41(3,"div",1)(4,"div",2)(5,"div",3),e.nrm(6,"i",4),e.k0s(),e.j41(7,"div",5),e.EFF(8," Registro para promotor/agencia "),e.k0s()(),e.nrm(9,"div",6),e.k0s(),e.j41(10,"form",7),e.bIt("ngSubmit",function(){return i.onSubmit()}),e.DNE(11,k,10,4,"div",8),e.j41(12,"div",9)(13,"div",10),e.EFF(14,"Nombre comercial empresa"),e.k0s(),e.j41(15,"div",11),e.nrm(16,"input",12),e.k0s(),e.DNE(17,P,2,1,"div",13),e.k0s(),e.j41(18,"div",9)(19,"div",14)(20,"div",10),e.EFF(21," \xbfEres el due\xf1o/responsable de la empresa? "),e.k0s(),e.j41(22,"ion-radio-group",15)(23,"div",16),e.nrm(24,"ion-radio",17),e.j41(25,"div",18),e.EFF(26," S\xed "),e.k0s()(),e.j41(27,"div",16),e.nrm(28,"ion-radio",17),e.j41(29,"div",18),e.EFF(30," No "),e.k0s()()()(),e.DNE(31,y,2,1,"div",13),e.k0s(),e.DNE(32,$,11,7),e.j41(33,"div",9)(34,"div",10),e.EFF(35,"Direcci\xf3n del representante legal"),e.k0s(),e.j41(36,"div",11),e.nrm(37,"input",19),e.k0s(),e.DNE(38,x,2,1,"div",13),e.k0s(),e.j41(39,"div",9)(40,"div",10),e.EFF(41,"Cif/Dni/Nie del representante legal"),e.k0s(),e.j41(42,"div",11),e.nrm(43,"input",20),e.k0s(),e.DNE(44,w,2,1,"div",13),e.k0s(),e.j41(45,"div",9)(46,"div",10),e.EFF(47,"Tel\xe9fono del representante legal"),e.k0s(),e.j41(48,"div",11),e.nrm(49,"input",21),e.k0s(),e.DNE(50,M,2,1,"div",13),e.k0s(),e.j41(51,"div",22),e.EFF(52," Tus Datos "),e.k0s(),e.j41(53,"div",9)(54,"div",10),e.EFF(55,"Nombre"),e.k0s(),e.j41(56,"div",11),e.nrm(57,"input",23),e.k0s(),e.DNE(58,V,2,1,"div",13),e.k0s(),e.j41(59,"div",9)(60,"div",10),e.EFF(61,"Email"),e.k0s(),e.j41(62,"div",11),e.nrm(63,"input",24),e.k0s(),e.DNE(64,A,3,2,"div",13),e.k0s(),e.j41(65,"div",9)(66,"div",10),e.EFF(67,"N\xfamero de tel\xe9fono"),e.k0s(),e.j41(68,"div",11),e.nrm(69,"input",25),e.k0s(),e.DNE(70,U,2,1,"div",13),e.k0s(),e.j41(71,"div",9)(72,"div",10),e.EFF(73,"Contrase\xf1a"),e.k0s(),e.j41(74,"div",11),e.nrm(75,"input",26),e.k0s(),e.DNE(76,O,3,2,"div",13),e.k0s(),e.j41(77,"div",9)(78,"div",10),e.EFF(79,"Repetir contrase\xf1a"),e.k0s(),e.j41(80,"div",11),e.nrm(81,"input",27),e.k0s(),e.DNE(82,Z,4,3,"div",13),e.k0s(),e.j41(83,"div",28),e.nrm(84,"div"),e.j41(85,"div",29)(86,"button",30),e.EFF(87,"Iniciar sesi\xf3n"),e.k0s(),e.j41(88,"button",31),e.EFF(89,"Registrarse"),e.k0s()()(),e.nrm(90,"br"),e.DNE(91,Q,3,1,"div",13),e.k0s()()()),2&s&&(e.R7$(2),e.vxM(i.agencyInvitationRegister&&(null==i.promotionsInvited?null:i.promotionsInvited.length)>0?2:-1),e.R7$(8),e.Y8G("formGroup",i.registerForm),e.R7$(),e.Y8G("ngIf",!i.agencyInvitationRegister),e.R7$(4),e.Y8G("ngClass",e.eq3(27,l,i.isControlInvalid("companyName"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("companyName")),e.R7$(7),e.Y8G("value",!0),e.R7$(4),e.Y8G("value",!1),e.R7$(3),e.Y8G("ngIf",i.isControlInvalid("isResponsable")),e.R7$(),e.vxM(!1===i.registerForm.value.isResponsable?32:-1),e.R7$(4),e.Y8G("ngClass",e.eq3(29,l,i.isControlInvalid("responsableAddress"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("responsableAddress")),e.R7$(4),e.Y8G("ngClass",e.eq3(31,l,i.isControlInvalid("responsableCif"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("responsableCif")),e.R7$(4),e.Y8G("ngClass",e.eq3(33,l,i.isControlInvalid("responsablePhone"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("responsablePhone")),e.R7$(6),e.Y8G("ngClass",e.eq3(35,l,i.isControlInvalid("name"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("name")),e.R7$(4),e.Y8G("ngClass",e.eq3(37,l,i.isControlInvalid("email"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("email")),e.R7$(4),e.Y8G("ngClass",e.eq3(39,l,i.isControlInvalid("phoneNumber"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("phoneNumber")),e.R7$(4),e.Y8G("ngClass",e.eq3(41,l,i.isControlInvalid("password"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("password")),e.R7$(4),e.Y8G("ngClass",e.eq3(43,l,i.isControlInvalid("confirmPassword")||i.registerForm.hasError("passwordMismatch"))),e.R7$(2),e.Y8G("ngIf",i.isControlInvalid("confirmPassword")||i.registerForm.hasError("passwordMismatch")),e.R7$(4),e.Y8G("routerLink",e.lJ4(45,R)),e.R7$(5),e.Y8G("ngIf",i.globalErrorString))},dependencies:[u.YU,u.bT,t.qT,t.xH,t.y7,t.me,t.wz,t.BC,t.cb,m.W9,m.KO,m.f0,m.Je,m.N7,g.Wk,t.j4,t.JD,u.vh]}),o})()}];let re=(()=>{var r;class o{}return(r=o).\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(ee),g.iI]}),o})(),ne=(()=>{var r;class o{}return(r=o).\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.MD,t.YN,m.bv,re,t.X1]}),o})()}}]);