"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7116],{904:(x,g,r)=>{r.d(g,{X:()=>j});var o=r(3953),_=r(5188),s=r(6552),c=r(1213),p=r(177),l=r(9417),u=r(9465),m=r(8147),C=r(4558);const P=t=>({"crm-card-user-active":t}),v=t=>({"crm-card-promotion-left-img-small":t});function f(t,d){if(1&t){const n=o.RV6();o.j41(0,"div",4)(1,"div",21)(2,"div",22)(3,"ion-checkbox",23),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.promotion.checked,e)||(a.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(n);const a=o.XpG(3);return o.Njj(a.onTogglePromotionCheckbox(e))}),o.k0s()()()()}if(2&t){const n=o.XpG(3);o.R7$(3),o.R50("ngModel",n.promotion.checked),o.Y8G("disabled",n.promotion.invitedApproved||n.promotion.invitedPending)}}function M(t,d){if(1&t){const n=o.RV6();o.j41(0,"div",3),o.bIt("click",function(e){o.eBV(n);const a=o.XpG(2);return o.Njj(a.onNavigateToPromotion(e))}),o.DNE(1,f,4,2,"div",4),o.j41(2,"div",5)(3,"div",6),o.nrm(4,"img",7),o.k0s(),o.j41(5,"h3",8),o.EFF(6),o.k0s(),o.j41(7,"p",9),o.EFF(8),o.nI1(9,"thousandSeparator"),o.nI1(10,"thousandSeparator"),o.k0s(),o.j41(11,"div",10)(12,"p",11),o.EFF(13),o.k0s(),o.j41(14,"p",12),o.EFF(15),o.nI1(16,"translate"),o.k0s(),o.j41(17,"p",13),o.EFF(18),o.k0s()(),o.j41(19,"div",14)(20,"div",15)(21,"span")(22,"span",16),o.EFF(23),o.k0s(),o.EFF(24),o.k0s()(),o.j41(25,"div",17)(26,"div",18),o.EFF(27),o.k0s(),o.j41(28,"div",19),o.nrm(29,"i",20),o.EFF(30),o.nI1(31,"date"),o.k0s()()()()()}if(2&t){const n=o.XpG(2);o.Y8G("ngClass",o.eq3(23,P,null==n.promotion?null:n.promotion.checked)),o.R7$(),o.vxM(n.hideCheckbox?-1:1),o.R7$(3),o.Y8G("src",(null==n.promotion||null==n.promotion.promotionFiles?null:n.promotion.promotionFiles.length)>0?null==n.promotion?null:n.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B),o.R7$(2),o.JRh(null==n.promotion?null:n.promotion.projectName),o.R7$(2),o.Lme("",o.bMT(9,14,null==n.rangeOfPropertiesPrices?null:n.rangeOfPropertiesPrices.min)," \u20ac - ",o.bMT(10,16,null==n.rangeOfPropertiesPrices?null:n.rangeOfPropertiesPrices.max)," \u20ac"),o.R7$(5),o.Lme("",null==n.promotion?null:n.promotion.city," / ",null==n.promotion?null:n.promotion.province,""),o.R7$(2),o.JRh(null!=n.promotion&&n.promotion.constructionType?o.bMT(16,18,"promotion_constructionType_texts."+(null==n.promotion?null:n.promotion.constructionType)):""),o.R7$(3),o.JRh(null==n.promotion||null==n.promotion.promoter?null:n.promotion.promoter.name),o.R7$(5),o.JRh(null==n.availableProperties?null:n.availableProperties.length),o.R7$(),o.SpI(" / ",null==n.promotion||null==n.promotion.properties?null:n.promotion.properties.length,""),o.R7$(3),o.SpI(" ",null==n.promotion?null:n.promotion.constructionStatus," "),o.R7$(3),o.SpI(" ",o.i5U(31,20,null==n.promotion?null:n.promotion.keyDeliveryDate,"dd/MM/yy")," ")}}function k(t,d){1&t&&(o.j41(0,"div",24)(1,"div",5)(2,"div",6),o.nrm(3,"ion-skeleton-text",25),o.k0s(),o.j41(4,"h3",8),o.nrm(5,"ion-skeleton-text",26),o.k0s(),o.j41(6,"p",9),o.nrm(7,"ion-skeleton-text",27),o.k0s(),o.j41(8,"div",10)(9,"p",11),o.nrm(10,"ion-skeleton-text",28),o.k0s(),o.j41(11,"p",12),o.nrm(12,"ion-skeleton-text",29),o.k0s(),o.j41(13,"p",13),o.nrm(14,"ion-skeleton-text",30),o.k0s()(),o.j41(15,"div",14)(16,"div",15),o.nrm(17,"ion-skeleton-text",31),o.k0s(),o.j41(18,"div",17)(19,"div",18),o.nrm(20,"ion-skeleton-text",32),o.k0s(),o.j41(21,"div",19),o.nrm(22,"ion-skeleton-text",33),o.k0s()()()()()),2&t&&(o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0))}function O(t,d){if(1&t&&o.DNE(0,M,32,25,"div",1)(1,k,23,9,"div",2),2&t){const n=o.XpG();o.Y8G("ngIf",!n.isSkeleton),o.R7$(),o.Y8G("ngIf",n.isSkeleton)}}function E(t,d){if(1&t){const n=o.RV6();o.j41(0,"div",21)(1,"div",22)(2,"ion-checkbox",23),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(2);return o.DH7(a.promotion.checked,e)||(a.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(n);const a=o.XpG(2);return o.Njj(a.onTogglePromotionCheckbox(e))}),o.k0s()()()}if(2&t){const n=o.XpG(2);o.R7$(2),o.R50("ngModel",n.promotion.checked),o.Y8G("disabled",n.promotion.invitedApproved||n.promotion.invitedPending)}}function R(t,d){if(1&t){const n=o.RV6();o.j41(0,"div",42),o.EFF(1," La agencia tiene acceso a esta promoci\xf3n "),o.k0s(),o.j41(2,"button",43),o.bIt("click",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.onRemoveAgencyAccessToPromotion(e.promotion))}),o.nrm(3,"i",44),o.EFF(4," Dejar de compartir "),o.k0s()}}function T(t,d){1&t&&(o.j41(0,"div",41),o.EFF(1," Invitaci\xf3n enviada, pendiente de aprobaci\xf3n "),o.k0s())}function b(t,d){if(1&t){const n=o.RV6();o.j41(0,"div",34),o.bIt("click",function(e){o.eBV(n);const a=o.XpG();return o.Njj(a.onNavigateToPromotion(e))}),o.DNE(1,E,3,2,"div",21),o.j41(2,"div",35)(3,"div",36),o.nrm(4,"img",7),o.k0s(),o.j41(5,"div",37)(6,"div",38),o.EFF(7),o.k0s(),o.j41(8,"div",39),o.EFF(9),o.k0s()()(),o.j41(10,"div",40),o.DNE(11,R,5,0)(12,T,2,0,"div",41),o.k0s()()}if(2&t){const n=o.XpG();o.Y8G("ngClass",o.eq3(8,P,null==n.promotion?null:n.promotion.checked)),o.R7$(),o.vxM(n.hideCheckbox?-1:1),o.R7$(2),o.Y8G("ngClass",o.eq3(10,v,n.isSmall)),o.R7$(),o.Y8G("src",(null==n.promotion||null==n.promotion.promotionFiles?null:n.promotion.promotionFiles.length)>0?null==n.promotion?null:n.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B),o.R7$(3),o.SpI(" ",null==n.promotion?null:n.promotion.projectName," "),o.R7$(2),o.Lme(" ",null==n.promotion?null:n.promotion.city,", ",null==n.promotion?null:n.promotion.province," "),o.R7$(2),o.vxM(null!=n.promotion&&n.promotion.invitedApproved?11:null!=n.promotion&&n.promotion.invitedPending?12:-1)}}let j=(()=>{var t;class d{constructor(i,e,a){this.router=i,this.utils=e,this.state=a,this.isSmall=!1,this.hideCheckbox=!1,this.togglePromotionCheckbox=new o.bkB,this.availableProperties=[],this.rangeOfPropertiesPrices={min:0,max:0},this.rangeOfPropertiesRooms={min:0,max:0}}ngOnInit(){var i,e,a;this.getState(),this.promotion&&(this.availableProperties=null===(i=this.promotion)||void 0===i||null===(i=i.properties)||void 0===i?void 0:i.filter(h=>"available"===(null==h?void 0:h.availabilityStatus)),this.rangeOfPropertiesPrices=this.utils.calculateRangeOfPropertiesPrices(null===(e=this.promotion)||void 0===e?void 0:e.properties),this.rangeOfPropertiesRooms=this.utils.calculateRangeOfPropertiesRooms(null===(a=this.promotion)||void 0===a?void 0:a.properties))}getState(){this.state.getState().subscribe(i=>{this.currentUser=i.user})}onTogglePromotionCheckbox(i){i.stopPropagation(),this.togglePromotionCheckbox.emit()}onNavigateToPromotion(i){this.isSmall||this.router.navigate([`/promotions/${this.promotion.id}`])}onRemoveAgencyAccessToPromotion(i){console.log("onRemoveAgencyAccessToPromotion",i)}onRedirectPromoter(i,e){var a;i.stopPropagation(),"agency"===(null===(a=this.currentUser)||void 0===a?void 0:a.accountType)?this.utils.redirectToPromoter(e):this.router.navigate(["/promoters/mine"])}}return(t=d).\u0275fac=function(i){return new(i||t)(o.rXU(_.Ix),o.rXU(s.T),o.rXU(c.c))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-card-promotion"]],inputs:{promotion:"promotion",isSkeleton:"isSkeleton",isSmall:"isSmall",hideCheckbox:"hideCheckbox"},outputs:{togglePromotionCheckbox:"togglePromotionCheckbox"},decls:2,vars:2,consts:[[1,"crm-card-promotion",3,"ngClass"],["class","promotion-card",3,"ngClass","click",4,"ngIf"],["class","promotion-card promotion-card--skeleton",4,"ngIf"],[1,"promotion-card",3,"click","ngClass"],[1,"promotion-card__content",2,"padding-bottom","0"],[1,"promotion-card__content"],[1,"promotion-card__image"],["alt","",3,"src"],[1,"promotion-card__title"],[1,"promotion-card__price"],[1,"promotion-card__details"],[1,"promotion-card__location"],[1,"promotion-card__type"],[1,"promotion-card__agent"],[1,"promotion-card__footer"],[1,"promotion-card__stats"],[2,"color","black"],[1,"promotion-card__status"],[1,"promotion-card__status-item"],[1,"promotion-card__date"],[1,"far","fa-calendar"],[1,"crm-card-promotion-checkbox"],[1,"crm-input-checkbox"],[3,"ngModelChange","click","ngModel","disabled"],[1,"promotion-card","promotion-card--skeleton"],[3,"animated"],[2,"width","70%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","50%",3,"animated"],[2,"width","65%",3,"animated"],[2,"width","55%",3,"animated"],[2,"width","40px",3,"animated"],[2,"width","100px",3,"animated"],[2,"width","60px",3,"animated"],[1,"crm-card-promotion",3,"click","ngClass"],[1,"crm-card-promotion-left"],[1,"crm-card-promotion-left-img",3,"ngClass"],[1,"crm-card-promotion-left-texts"],[1,"crm-card-promotion-left-title"],[1,"crm-card-promotion-left-subtitle"],[1,"crm-block-info-horizontal"],[1,"crm-text","small","crm-text-red"],[1,"crm-text","small","crm-text-success"],[1,"crm-button-secondary","crm-button-secondary-red",3,"click"],[1,"fas","fa-times"]],template:function(i,e){1&i&&o.DNE(0,O,2,2)(1,b,13,12,"div",0),2&i&&(o.vxM(e.isSmall?-1:0),o.R7$(),o.vxM(e.isSmall?1:-1))},dependencies:[p.YU,p.bT,l.BC,l.vS,u.eY,u.ds,u.hB,p.vh,m.D9,C.w],styles:[".promotion-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;border-radius:8px;overflow:hidden;height:100%;width:300px;max-width:320px;cursor:pointer}.promotion-card__image[_ngcontent-%COMP%]{position:relative;width:100%;height:180px;border-radius:10px;margin-bottom:16px;overflow:hidden}.promotion-card__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .2s}.promotion-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:16px;flex-grow:1}.promotion-card__title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#333;margin:0 0 4px;line-height:1.3}.promotion-card__price[_ngcontent-%COMP%]{font-size:14px;font-weight:400;margin:0 0 16px;padding:0}.promotion-card__details[_ngcontent-%COMP%]{margin-bottom:16px}.promotion-card__details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;font-size:13px;color:#666}.promotion-card__location[_ngcontent-%COMP%]{font-weight:500}.promotion-card__footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:12px;border-top:1px solid #eaeaea}.promotion-card__stats[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:#666;margin-bottom:8px}.promotion-card__status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.promotion-card__status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;color:#000}.promotion-card__status-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.promotion-card__date[_ngcontent-%COMP%]{font-size:13px;display:flex;align-items:center;gap:4px;color:#000}.promotion-card--skeleton[_ngcontent-%COMP%]{pointer-events:none}.promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__image[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:100%;width:100%}.promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__price[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__details[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:16px;margin-bottom:8px}.promotion-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px}.promotion-grid__title[_ngcontent-%COMP%]{grid-column:1/-1;font-size:24px;font-weight:600;margin-bottom:24px;color:#333}@media (max-width: 1200px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 992px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 576px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.promotion-card__footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.promotion-card__status[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]}),d})()},7991:(x,g,r)=>{r.d(g,{S:()=>u});var o=r(177),_=r(9417),s=r(9465),c=r(8147),p=r(9662),l=r(3953);let u=(()=>{var m;class C{}return(m=C).\u0275fac=function(v){return new(v||m)},m.\u0275mod=l.$C({type:m}),m.\u0275inj=l.G2t({imports:[o.MD,_.YN,_.X1,s.bv,c.h,p.Y]}),C})()},9662:(x,g,r)=>{r.d(g,{Y:()=>s});var o=r(177),_=r(3953);let s=(()=>{var c;class p{}return(c=p).\u0275fac=function(u){return new(u||c)},c.\u0275mod=_.$C({type:c}),c.\u0275inj=_.G2t({imports:[o.MD]}),p})()},4558:(x,g,r)=>{r.d(g,{w:()=>_});var o=r(3953);let _=(()=>{var s;class c{transform(l,...u){if(null==l||""===l)return"";let m;return m="string"==typeof l?parseFloat(l):l,isNaN(m)?"":m.toString().replace(/\.(?=\d+$)/,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return(s=c).\u0275fac=function(l){return new(l||s)},s.\u0275pipe=o.EJ8({name:"thousandSeparator",type:s,pure:!0}),c})()}}]);