"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3732,3666,8812],{3274:(E,f,n)=>{n.d(f,{K:()=>c});var e=n(177),C=n(3953);let c=(()=>{var p;class l{}return(p=l).\u0275fac=function(t){return new(t||p)},p.\u0275mod=C.$C({type:p}),p.\u0275inj=C.G2t({imports:[e.MD]}),l})()},179:(E,f,n)=>{n.d(f,{Y:()=>s});var e=n(177),C=n(9417),c=n(9465),p=n(8147),l=n(3953);let s=(()=>{var t;class u{}return(t=u).\u0275fac=function(m){return new(m||t)},t.\u0275mod=l.$C({type:t}),t.\u0275inj=l.G2t({imports:[e.MD,C.YN,c.bv,p.h]}),u})()},6580:(E,f,n)=>{n.d(f,{k:()=>p});var e=n(3953);function C(l,s){if(1&l&&(e.j41(0,"div",15),e.EFF(1),e.k0s()),2&l){const t=e.XpG(2);e.R7$(),e.SpI(" ",null==t.listPaginationConfig?null:t.listPaginationConfig.checkedItems," seleccionado ")}}function c(l,s){if(1&l&&(e.j41(0,"div",14),e.DNE(1,C,2,1,"div",15),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.vxM(null!=t.listPaginationConfig&&t.listPaginationConfig.checkedItems||0===(null==t.listPaginationConfig?null:t.listPaginationConfig.checkedItems)?1:-1)}}let p=(()=>{var l;class s{constructor(){this.listPaginationConfig={},this.goPreviousPage=new e.bkB,this.goNextPage=new e.bkB,this.sort=new e.bkB}ngOnInit(){}onGoPreviousPage(u){this.goPreviousPage.emit(u)}onGoNextPage(u){this.goNextPage.emit(u)}onSort(u){this.sort.emit(u)}}return(l=s).\u0275fac=function(u){return new(u||l)},l.\u0275cmp=e.VBU({type:l,selectors:[["app-list-pagination-selectors"]],inputs:{listPaginationConfig:"listPaginationConfig"},outputs:{goPreviousPage:"goPreviousPage",goNextPage:"goNextPage",sort:"sort"},decls:21,vars:6,consts:[[1,"crm-block-pagination-selectors"],[1,"crm-button-pagination"],[1,"crm-button-pagination-text"],[1,"crm-button-pagination-buttons"],[1,"crm-button-pagination-arrow","crm-button-icon-solo",3,"click"],[1,"fas","fa-arrow-left"],[1,"crm-button-pagination-number"],[1,"fas","fa-arrow-right"],[1,"crm-dropdown",3,"click"],[1,"crm-dropdown-text"],[1,"crm-dropdown-right"],[1,"crm-dropdown-value"],[1,"crm-dropdown-arrow"],[1,"fas","fa-chevron-down"],[1,"crm-input-checkbox"],[1,"crm-input-checkbox-pre-label"]],template:function(u,a){1&u&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3),e.k0s(),e.j41(4,"div",3)(5,"button",4),e.bIt("click",function(M){return a.onGoPreviousPage(M)}),e.nrm(6,"i",5),e.k0s(),e.j41(7,"div",6),e.EFF(8),e.k0s(),e.j41(9,"button",4),e.bIt("click",function(M){return a.onGoNextPage(M)}),e.nrm(10,"i",7),e.k0s()(),e.j41(11,"div",8),e.bIt("click",function(M){return a.onSort(M)}),e.j41(12,"div",9),e.EFF(13," Ordenar por "),e.k0s(),e.j41(14,"div",10)(15,"div",11),e.EFF(16),e.k0s(),e.j41(17,"div",12),e.nrm(18,"i",13),e.k0s()()()(),e.j41(19,"div"),e.DNE(20,c,2,1,"div",14),e.k0s()()),2&u&&(e.R7$(3),e.E5c(" ",null==a.listPaginationConfig?null:a.listPaginationConfig.pageStartIndex," - ",null==a.listPaginationConfig?null:a.listPaginationConfig.pageEndIndex," de ",null==a.listPaginationConfig?null:a.listPaginationConfig.totalCount," "),e.R7$(5),e.SpI(" P\xe1g ",null==a.listPaginationConfig?null:a.listPaginationConfig.paginationPage," "),e.R7$(8),e.SpI(" ",null==a.listPaginationConfig?null:a.listPaginationConfig.sortField," "),e.R7$(4),e.vxM(null!=a.listPaginationConfig&&a.listPaginationConfig.showSelectItems?20:-1))}}),s})()},5603:(E,f,n)=>{n.d(f,{P:()=>p});var e=n(177),C=n(9417),c=n(3953);let p=(()=>{var l;class s{}return(l=s).\u0275fac=function(u){return new(u||l)},l.\u0275mod=c.$C({type:l}),l.\u0275inj=c.G2t({imports:[e.MD,C.YN]}),s})()},3675:(E,f,n)=>{n.d(f,{S:()=>l});var e=n(177),C=n(9465),c=n(9417),p=n(3953);let l=(()=>{var s;class t{}return(s=t).\u0275fac=function(a){return new(a||s)},s.\u0275mod=p.$C({type:s}),s.\u0275inj=p.G2t({imports:[e.MD,C.bv,c.YN]}),t})()},3895:(E,f,n)=>{n.d(f,{b:()=>s});var e=n(177),C=n(9417),c=n(9465),p=n(8147),l=n(3953);let s=(()=>{var t;class u{}return(t=u).\u0275fac=function(m){return new(m||t)},t.\u0275mod=l.$C({type:t}),t.\u0275inj=l.G2t({imports:[e.MD,C.YN,c.bv,p.h]}),u})()},2606:(E,f,n)=>{n.d(f,{O:()=>l});var e=n(3953),C=n(8147);const c=["tabElement"];function p(s,t){if(1&s){const u=e.RV6();e.j41(0,"div",3,0),e.bIt("click",function(){const m=e.eBV(u).$index,M=e.XpG();return e.Njj(M.onClickTab(m))}),e.EFF(2),e.nI1(3,"translate"),e.k0s()}if(2&s){const u=t.$implicit;e.AVh("active",u.active),e.R7$(2),e.SpI(" ",e.bMT(3,3,"text."+(null==u?null:u.title))||(null==u?null:u.title)," ")}}let l=(()=>{var s;class t{constructor(){this.tabs=[{id:"1",title:"Visi\xf3n general",active:!0},{id:"2",title:"Nuestro equipo",active:!1},{id:"3",title:"Agencias",active:!1}],this.tabClicked=new e.bkB}ngAfterViewInit(){const a=this.tabs.findIndex(m=>m.active)||0;-1!==a&&this.onClickTab(a)}onClickTab(a){console.log("HEY",a),this.tabs.forEach((m,M)=>{m.active=M===a}),this.tabClicked.emit(this.tabs[a].title),this.updateActiveTab(a)}updateActiveTab(a){setTimeout(()=>{var m;const M=null===(m=this.tabElements.get(a))||void 0===m?void 0:m.nativeElement;if(M){const I=M.offsetLeft;document.documentElement.style.setProperty("--indicator-width",M.offsetWidth-12+"px"),document.documentElement.style.setProperty("--indicator-left",`${I}px`)}},0)}}return(s=t).\u0275fac=function(a){return new(a||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-tabs"]],viewQuery:function(a,m){if(1&a&&e.GBs(c,5),2&a){let M;e.mGM(M=e.lsd())&&(m.tabElements=M)}},inputs:{tabs:"tabs"},outputs:{tabClicked:"tabClicked"},standalone:!0,features:[e.aNF],decls:3,vars:0,consts:[["tabElement",""],[1,"crm-tabs"],[1,"crm-tabs-tab",3,"active"],[1,"crm-tabs-tab",3,"click"]],template:function(a,m){1&a&&(e.j41(0,"div",1),e.Z7z(1,p,4,5,"div",2,e.fX1),e.k0s()),2&a&&(e.R7$(),e.Dyx(m.tabs))},dependencies:[C.h,C.D9]}),t})()},1129:(E,f,n)=>{n.d(f,{Z:()=>l});var e=n(3953),C=n(6069),c=n(1982);function p(s,t){if(1&s){const u=e.RV6();e.j41(0,"app-country-selector-popover",4),e.bIt("countrySelected",function(m){e.eBV(u);const M=e.XpG();return e.Njj(M.selectCountry(m))})("closePopover",function(){e.eBV(u);const m=e.XpG();return e.Njj(m.dropdownOpen=!1)}),e.k0s()}2&s&&e.Y8G("showCountryCode",!0)}let l=(()=>{var s;class t{constructor(){this.emitCountrySelected=new e.bkB,this.countries=C.X,this.selectedCountry=C.X[0],this.dropdownOpen=!1}ngOnChanges(){const a=this.extractCountryPhoneCodeFromPhoneNumber(this.selectedPhoneNumber);a!==this.extractCountryPhoneCodeFromPhoneNumber(this.selectedCountry.phoneCode)&&this.selectCountryByPhoneCode(a)}toggleDropdown(a){a.stopPropagation(),this.dropdownOpen=!this.dropdownOpen}selectCountry(a){a.event.stopPropagation(),this.selectedCountry=a.country,this.emitCountrySelected.emit(a.country),this.dropdownOpen=!1}selectCountryByPhoneCode(a){const m=this.countries.find(M=>M.phoneCode===a);m&&(this.selectedCountry=m,this.emitCountrySelected.emit(m))}extractCountryPhoneCodeFromPhoneNumber(a){return null==a?void 0:a.split(" ")[0]}}return(s=t).\u0275fac=function(a){return new(a||s)},s.\u0275cmp=e.VBU({type:s,selectors:[["app-flag-country-selector"]],inputs:{selectedPhoneNumber:"selectedPhoneNumber"},outputs:{emitCountrySelected:"emitCountrySelected"},features:[e.OA$],decls:5,vars:3,consts:[["tabindex","0",1,"flag-country-selector-container",3,"click"],[1,"selected-country"],[1,"fas","fa-caret-down","dropdown-arrow"],[3,"showCountryCode"],[3,"countrySelected","closePopover","showCountryCode"]],template:function(a,m){1&a&&(e.j41(0,"div",0),e.bIt("click",function(F){return m.toggleDropdown(F)}),e.j41(1,"div",1),e.nrm(2,"span")(3,"i",2),e.k0s(),e.DNE(4,p,1,1,"app-country-selector-popover",3),e.k0s()),2&a&&(e.R7$(2),e.HbH(null==m.selectedCountry?null:m.selectedCountry.flagClass),e.R7$(2),e.vxM(m.dropdownOpen?4:-1))},dependencies:[c.u],styles:[".flag-country-selector-container[_ngcontent-%COMP%]{position:relative;width:50px;cursor:pointer;color:#000}.selected-country[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px;width:50px}.dropdown-arrow[_ngcontent-%COMP%]{margin-left:8px}.dropdown-options[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:200px;z-index:9999;background-color:#fff;border:1px solid #ccc;padding:8px 0;border-radius:12px;border:1px solid var(--crm-border-light-color);color:#000;max-height:150px;overflow-y:auto}.option[_ngcontent-%COMP%]{padding:8px;display:flex;align-items:center;cursor:pointer;font-size:14px}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;display:inline-block;margin-right:8px}.option[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.flag-country-selector-container[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{color:#000}.selected-country[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;width:18px;height:18px}"]}),t})()},6812:(E,f,n)=>{n.d(f,{u:()=>l});var e=n(177),C=n(9417),c=n(7754),p=n(3953);let l=(()=>{var s;class t{}return(s=t).\u0275fac=function(a){return new(a||s)},s.\u0275mod=p.$C({type:s}),s.\u0275inj=p.G2t({imports:[e.MD,C.YN,c.X]}),t})()},9066:(E,f,n)=>{n.d(f,{K:()=>p});var e=n(177),C=n(9465),c=n(3953);let p=(()=>{var l;class s{}return(l=s).\u0275fac=function(u){return new(u||l)},l.\u0275mod=c.$C({type:l}),l.\u0275inj=c.G2t({imports:[e.MD,C.bv]}),s})()},68:(E,f,n)=>{n.d(f,{k:()=>p});var e=n(177),C=n(9417),c=n(3953);let p=(()=>{var l;class s{}return(l=s).\u0275fac=function(u){return new(u||l)},l.\u0275mod=c.$C({type:l}),l.\u0275inj=c.G2t({imports:[e.MD,C.YN]}),s})()},2306:(E,f,n)=>{n.d(f,{T:()=>p});var e=n(177),C=n(9417),c=n(3953);let p=(()=>{var l;class s{}return(l=s).\u0275fac=function(u){return new(u||l)},l.\u0275mod=c.$C({type:l}),l.\u0275inj=c.G2t({imports:[e.MD,C.YN]}),s})()},3732:(E,f,n)=>{n.d(f,{D:()=>vt});var e=n(177),C=n(4716),c=n(9417),p=n(9465),l=n(7944),s=n(7991),t=n(3953);let u=(()=>{var i;class _{}return(i=_).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[e.MD,c.YN]}),_})();var a=n(8147),m=n(2652),M=n(6812);let F=(()=>{var i;class _{}return(i=_).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[e.MD,c.YN]}),_})();var I=n(6279);let x=(()=>{var i;class _{}return(i=_).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[e.MD,c.YN,c.X1,p.bv,a.h,M.u,F,I.F]}),_})();var B=n(2606),$=n(179),K=n(3675),N=n(3895),G=n(9662);let T=(()=>{var i;class _{}return(i=_).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[e.MD,c.YN,c.X1,p.bv,m.T,I.F,G.Y,a.h]}),_})();var S=n(3274),U=n(2306),v=n(68),h=n(144),b=n(8433),D=n(9066),A=n(467),W=n(6552),w=n(5970),j=n(6039),X=n(8397),Y=n(1129);const z=["fileUploaderManagerComponent"],k=i=>({"crm-input-input-error":i}),L=i=>({field:i}),H=i=>({item:i});function Z(i,_){1&i&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"errors.required")," "))}function Q(i,_){1&i&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"errors.required")," "))}function J(i,_){1&i&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"errors.required")," "))}function q(i,_){1&i&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"errors.required")," "))}function tt(i,_){if(1&i){const d=t.RV6();t.j41(0,"div",15)(1,"div",25)(2,"div",26),t.nrm(3,"span"),t.k0s(),t.j41(4,"div",27),t.EFF(5),t.k0s()(),t.j41(6,"div",28),t.bIt("click",function(){const r=t.eBV(d).$implicit,g=t.XpG();return t.Njj(g.onRemoveLanguage(r))}),t.nrm(7,"i",29),t.k0s()()}if(2&i){let d,o;const r=_.$implicit,g=t.XpG();t.R7$(3),t.HbH(null==(d=g.getLanguageInfo(r))?null:d.flagClass),t.R7$(2),t.SpI(" ",null==(o=g.getLanguageInfo(r))?null:o.name," ")}}function et(i,_){if(1&i){const d=t.RV6();t.j41(0,"button",30),t.bIt("click",function(){t.eBV(d);const r=t.XpG();return t.Njj(r.changeUserInactiveState(!1))}),t.EFF(1,"Activar Usuario"),t.k0s()}}function nt(i,_){if(1&i){const d=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(d);const r=t.XpG();return t.Njj(r.changeUserInactiveState(!0))}),t.EFF(1,"Desactivar Usuario"),t.k0s()}}let ot=(()=>{var i;class _{constructor(o,r,g,P,y){this.fb=o,this.utils=r,this.popoverService=g,this.api=P,this.toast=y,this.user={},this.onChange=new t.bkB,this.userCopy=null,this.files=[],this.photoEdited=!1}ngOnInit(){this.userCopy=JSON.parse(JSON.stringify(this.user)),this.initForm(),this.user?(this.populateForm(this.userCopy),this.fileUploaderManager.config={multiple:!1,size:"medium",showRemove:!0,showName:!1,rounded:!0,allowUpload:!0,accept:"image/*",files:[]},this.fileUploaderManager.createProfileFilePic(this.user)):this.fileUploaderManager.config={multiple:!1,size:"medium",showRemove:!0,showName:!1,rounded:!0,allowUpload:!0,accept:"image/*",files:[]}}getLanguageInfo(o){return this.utils.getLanguageInfo(o)}onAddLanguage(o){var r=this;return(0,A.A)(function*(){var g,P;const y={languageSelector:!0,showCountryCode:!1,selectedCodes:null===(g=r.user)||void 0===g?void 0:g.languages},O=yield r.popoverService.onShowCountrySelectorPopover(o,y);var V,R;null!=O&&null!==(P=O.data)&&void 0!==P&&P.country&&(r.user=r.user||{},r.user.languages=(null===(V=r.user)||void 0===V?void 0:V.languages)||[],r.user.languages.push(null===(R=O.data)||void 0===R||null===(R=R.country)||void 0===R?void 0:R.code))})()}changeUserInactiveState(o){var r=this;return(0,A.A)(function*(){const g=yield r.api.updateUserById(r.user.id,{...r.user,inactive:o});g.success?(r.user.inactive=o,r.toast.showSuccessToast("Estado del usuario actualizado correctamente")):r.toast.showErrorToast("Ha ocurrido un error al actualizar el estado del usuario. "+g.error.errorMessage)})()}onRemoveLanguage(o){this.user.languages=this.user.languages.filter(r=>r!==o)}initForm(){this.userForm=this.fb.group({email:["",c.k0.required],name:["",c.k0.required],jobTitle:[""],phone:["+34 "],visibleForCollaborators:[]})}populateForm(o){var r,g,P,y,O;this.userForm.patchValue({email:null!==(r=null==o?void 0:o.email)&&void 0!==r?r:"",name:null!==(g=null==o?void 0:o.name)&&void 0!==g?g:"",jobTitle:null!==(P=null==o?void 0:o.jobTitle)&&void 0!==P?P:"",phone:null!==(y=null==o?void 0:o.phone)&&void 0!==y?y:"",visibleForCollaborators:null!==(O=null==o?void 0:o.visibleForCollaborators)&&void 0!==O&&O}),this.userForm.get("email").disable()}onSelectCountry(o){this.userForm.get("phone").setValue((null==o?void 0:o.phoneCode)+" ")}isControlInvalid(o){const r=this.userForm.get(o);return!(!r||!r.invalid||!r.dirty&&!r.touched)}}return(i=_).\u0275fac=function(o){return new(o||i)(t.rXU(c.ok),t.rXU(W.T),t.rXU(w.m),t.rXU(j.i),t.rXU(X.f))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-user-form"]],viewQuery:function(o,r){if(1&o&&t.GBs(z,7),2&o){let g;t.mGM(g=t.lsd())&&(r.fileUploaderManager=g.first)}},inputs:{user:"user"},outputs:{onChange:"onChange"},decls:67,vars:73,consts:[["fileUploaderManagerComponent",""],[1,"crm-section",3,"formGroup"],[1,"crm-section-small-title"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","formControlName","email",3,"placeholder"],["class","crm-input-error",4,"ngIf"],["type","text","formControlName","name",3,"placeholder"],["type","text","formControlName","jobTitle",3,"placeholder"],[1,"crm-input-input-and-icon"],[3,"emitCountrySelected"],["type","text","formControlName","phone",3,"placeholder"],[1,"crm-input","crm-input-medium"],[1,"crm-section-items"],[1,"crm-item-option","crm-item-option-lang","edit"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fas","fa-add"],[1,"crm-input-checkboxes"],["appToggleCheckbox","",1,"crm-input-checkbox"],["formControlName","visibleForCollaborators"],[1,"crm-input-checkbox-label"],[1,"crm-button-secondary","crm-button-secondary-primary"],[1,"crm-button-secondary","crm-button-secondary-red"],[1,"crm-input-error"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[1,"crm-item-option-label"],[1,"crm-item-option-remove",3,"click"],[1,"fas","fa-trash"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"crm-button-secondary","crm-button-secondary-red",3,"click"]],template:function(o,r){if(1&o){const g=t.RV6();t.j41(0,"form",1)(1,"div",2),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"app-file-uploader-manager",null,0),t.j41(6,"div",3)(7,"div",4),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.j41(10,"div",5),t.nrm(11,"input",6),t.nI1(12,"translate"),t.nI1(13,"translate"),t.k0s(),t.DNE(14,Z,3,3,"div",7),t.k0s(),t.j41(15,"div",3)(16,"div",4),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"div",5),t.nrm(20,"input",8),t.nI1(21,"translate"),t.nI1(22,"translate"),t.k0s(),t.DNE(23,Q,3,3,"div",7),t.k0s(),t.j41(24,"div",3)(25,"div",4),t.EFF(26),t.nI1(27,"translate"),t.k0s(),t.j41(28,"div",5),t.nrm(29,"input",9),t.nI1(30,"translate"),t.nI1(31,"translate"),t.k0s(),t.DNE(32,J,3,3,"div",7),t.k0s(),t.j41(33,"div",3)(34,"div",4),t.EFF(35),t.nI1(36,"translate"),t.k0s(),t.j41(37,"div",10)(38,"div",5)(39,"app-flag-country-selector",11),t.bIt("emitCountrySelected",function(y){return t.eBV(g),t.Njj(r.onSelectCountry(y))}),t.k0s(),t.nrm(40,"input",12),t.nI1(41,"translate"),t.nI1(42,"translate"),t.k0s()(),t.DNE(43,q,3,3,"div",7),t.k0s(),t.j41(44,"div",13)(45,"div",4),t.EFF(46," Idiomas "),t.k0s(),t.j41(47,"div",14),t.Z7z(48,tt,8,3,"div",15,t.fX1),t.j41(50,"button",16),t.bIt("click",function(y){return t.eBV(g),t.Njj(r.onAddLanguage(y))}),t.nrm(51,"i",17),t.EFF(52),t.nI1(53,"translate"),t.nI1(54,"translate"),t.k0s(),t.j41(55,"div",3)(56,"div",4),t.EFF(57,"Mostrar usuario a colaboradores"),t.k0s(),t.j41(58,"div",18)(59,"div",19),t.nrm(60,"ion-checkbox",20),t.j41(61,"div",21),t.EFF(62,"Mostrar"),t.k0s()()()()(),t.nrm(63,"br")(64,"br"),t.DNE(65,et,2,0,"button",22)(66,nt,2,0,"button",23),t.k0s()()}2&o&&(t.Y8G("formGroup",r.userForm),t.R7$(2),t.SpI(" ",t.bMT(3,20,"text.profile_pic")," "),t.R7$(6),t.SpI(" ",t.bMT(9,22,"text.email")," "),t.R7$(2),t.Y8G("ngClass",t.eq3(55,k,r.isControlInvalid("email"))),t.R7$(),t.Y8G("placeholder",t.i5U(13,26,"text.input_placeholder",t.eq3(57,L,t.bMT(12,24,"text.email")))),t.R7$(3),t.Y8G("ngIf",r.isControlInvalid("email")),t.R7$(3),t.SpI(" ",t.bMT(18,29,"text.name")," "),t.R7$(2),t.Y8G("ngClass",t.eq3(59,k,r.isControlInvalid("name"))),t.R7$(),t.Y8G("placeholder",t.i5U(22,33,"text.input_placeholder",t.eq3(61,L,t.bMT(21,31,"text.name")))),t.R7$(3),t.Y8G("ngIf",r.isControlInvalid("name")),t.R7$(3),t.SpI(" ",t.bMT(27,36,"text.job_title")," "),t.R7$(2),t.Y8G("ngClass",t.eq3(63,k,r.isControlInvalid("jobTitle"))),t.R7$(),t.Y8G("placeholder",t.i5U(31,40,"text.input_placeholder",t.eq3(65,L,t.bMT(30,38,"text.job_title")))),t.R7$(3),t.Y8G("ngIf",r.isControlInvalid("jobTitle")),t.R7$(3),t.SpI(" ",t.bMT(36,43,"text.phone")," "),t.R7$(3),t.Y8G("ngClass",t.eq3(67,k,r.isControlInvalid("phone"))),t.R7$(2),t.Y8G("placeholder",t.i5U(42,47,"text.input_placeholder",t.eq3(69,L,t.bMT(41,45,"text.phone")))),t.R7$(3),t.Y8G("ngIf",r.isControlInvalid("phone")),t.R7$(5),t.Dyx(null==r.user?null:r.user.languages),t.R7$(4),t.SpI(" ",t.i5U(54,52,"text.add_item",t.eq3(71,H,t.bMT(53,50,"text.language")))," "),t.R7$(13),t.vxM(!0===(null==r.user?null:r.user.inactive)?65:66))},dependencies:[e.YU,e.bT,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,p.eY,p.hB,Y.Z,I.F,a.D9]}),_})();var it=n(8129),rt=n(904),at=n(8359),st=n(1413),lt=n(152),ct=n(5558);let ut=(()=>{var i;class _{constructor(o){this.api=o,this.searchTermSubject=new st.B,this.allAgencies=[],this.searchResults$=this.searchTermSubject.pipe((0,lt.B)(300),(0,ct.n)(r=>this.performSearch(r)))}search(o){this.searchTermSubject.next(o)}performSearch(o){var r=this;return(0,A.A)(function*(){let g=[];if(o.includes("@")){const P=o.split("@")[1];g=(yield r.api.getAgency({email:{contains:"@"+P}},null,{page:0,itemsPerPage:50})).success.data}return g})()}}return(i=_).\u0275fac=function(o){return new(o||i)(t.KVO(j.i))},i.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),_})();function dt(i,_){if(1&i){const d=t.RV6();t.j41(0,"div",8),t.bIt("click",function(r){const g=t.eBV(d).$implicit,P=t.XpG(2);return t.Njj(P.selectAgency(g,r))}),t.j41(1,"div",9)(2,"div",10),t.nrm(3,"img",11),t.k0s(),t.j41(4,"div",12)(5,"div",13),t.EFF(6),t.k0s(),t.j41(7,"div",14),t.EFF(8),t.k0s()()(),t.nrm(9,"div",15),t.k0s()}if(2&i){const d=_.$implicit;t.R7$(6),t.SpI(" ",null==d?null:d.name," "),t.R7$(2),t.SpI(" ",null==d?null:d.domain," ")}}function pt(i,_){1&i&&(t.j41(0,"div",16),t.EFF(1," No hay resultados en Byvaro "),t.k0s())}function mt(i,_){if(1&i){const d=t.RV6();t.j41(0,"div",8),t.bIt("click",function(r){t.eBV(d);const g=t.XpG(2);return t.Njj(g.selectAgency(null,r))}),t.j41(1,"div",9)(2,"div",10),t.nrm(3,"img",11),t.k0s(),t.j41(4,"div",12)(5,"div",13),t.EFF(6),t.k0s(),t.j41(7,"div",14),t.EFF(8," Esta agencia no est\xe1 registrada en Byvaro, haz clic para invitarla. "),t.k0s()()(),t.nrm(9,"div",15),t.k0s()}if(2&i){const d=t.XpG(2);t.R7$(6),t.SpI(" ",d.searchTerm," ")}}function _t(i,_){if(1&i&&(t.j41(0,"div",5),t.Z7z(1,dt,10,2,"div",6,t.fX1),t.DNE(3,pt,2,0,"div",7)(4,mt,10,1,"div",6),t.k0s()),2&i){const d=t.XpG();t.R7$(),t.Dyx(d.searchResults),t.R7$(2),t.Y8G("ngIf",0===d.searchResults.length&&!d.validEmail),t.R7$(),t.vxM(d.validEmail?4:-1)}}let gt=(()=>{var i;class _{constructor(o,r){this.renderer=o,this.searchbarService=r,this.selectedAgency=new t.bkB,this.textUpdated=new t.bkB,this.searchTerm="",this.dropdownOpen=!1,this.searchResults=[],this.validEmail=!1,this.globalClickUnlistener=null,this.searchSubscription=new at.yU}ngOnInit(){this.searchSubscription=this.searchbarService.searchResults$.subscribe(o=>{this.searchResults=o})}onInputClick(o){o.stopPropagation(),this.dropdownOpen||this.openDropdown()}onSearchTermChange(o){this.searchTerm=o,this.searchbarService.search(o),this.checkEmail(),this.textUpdated.emit(o)}checkEmail(){this.validEmail=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.searchTerm)}selectAgency(o,r){o||(o={name:this.searchTerm,email:"Esta agencia no est\xe1 registrada en Byvaro, se enviar\xe1 una invitaci\xf3n por e-mail."}),r.stopPropagation(),this.selectedAgency.emit({name:o.name,email:this.searchTerm,id:o.id}),this.closeDropdown()}openDropdown(){this.dropdownOpen=!0,this.attachDocumentClickListener()}closeDropdown(){this.dropdownOpen=!1,this.detachDocumentClickListener()}attachDocumentClickListener(){this.globalClickUnlistener=this.renderer.listen("document","click",o=>{o.target.closest(".agents-searchbar-container")||this.closeDropdown()})}detachDocumentClickListener(){this.globalClickUnlistener&&(this.globalClickUnlistener(),this.globalClickUnlistener=null)}ngOnDestroy(){this.detachDocumentClickListener(),this.searchSubscription.unsubscribe()}}return(i=_).\u0275fac=function(o){return new(o||i)(t.rXU(t.sFG),t.rXU(ut))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-agencies-searchbar"]],outputs:{selectedAgency:"selectedAgency",textUpdated:"textUpdated"},decls:5,vars:2,consts:[[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar","crm-input-input-searchbar-square","agents-searchbar-container",3,"click"],[1,"fas","fa-search"],["type","text","placeholder","Email de la agencia",3,"ngModelChange","ngModel"],["class","dropdown-options",4,"ngIf"],[1,"dropdown-options"],[1,"crm-item-searchbar-agent-result"],["class","no-results",4,"ngIf"],[1,"crm-item-searchbar-agent-result",3,"click"],[1,"crm-item-searchbar-agent-result-left"],[1,"crm-item-searchbar-agent-result-left-image"],["src","assets/images/building.png","alt",""],[1,"crm-item-searchbar-agent-result-left-info"],[1,"crm-item-searchbar-agent-result-left-info-name"],[1,"crm-item-searchbar-agent-result-left-info-email"],[1,"crm-item-searchbar-agent-result-right"],[1,"no-results"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"div",1),t.bIt("click",function(P){return r.onInputClick(P)}),t.nrm(2,"i",2),t.j41(3,"input",3),t.mxI("ngModelChange",function(P){return t.DH7(r.searchTerm,P)||(r.searchTerm=P),P}),t.bIt("ngModelChange",function(P){return r.onSearchTermChange(P)}),t.k0s(),t.DNE(4,_t,5,2,"div",4),t.k0s()()),2&o&&(t.R7$(3),t.R50("ngModel",r.searchTerm),t.R7$(),t.Y8G("ngIf",r.dropdownOpen))},dependencies:[e.bT,c.me,c.BC,c.vS],styles:[".agents-searchbar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.dropdown-options[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:100%;z-index:9999;background-color:#fff;padding:8px 0;border-radius:0 0 8px 8px;border:1px solid var(--crm-border-light-color);max-height:200px;overflow-y:auto;font-size:14px}.option[_ngcontent-%COMP%]{padding:8px;display:flex;align-items:center;cursor:pointer;font-size:14px}.option[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.no-results[_ngcontent-%COMP%]{padding:8px;color:#888}"]}),_})(),vt=(()=>{var i;class _{}return(i=_).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[e.MD,c.YN,c.X1,p.bv,s.S,u,a.h,m.T,x,B.O,K.S,$.Y,N.b,T,S.K,U.T,v.k,M.u,I.F,b.x,D.K]}),_})();t.wjB(C.K,[e.bT,ot,it.K],[a.D9]),t.wjB(l.v,[e.bT,rt.X,gt],[]),t.wjB(h.f,[b.x],[])},8433:(E,f,n)=>{n.d(f,{x:()=>G});var e=n(467),C=n(177),c=n(9417),p=n(9465),l=n(3895),s=n(5603),t=n(3953),u=n(5970),a=n(6039),m=n(1296),M=n(4501),F=n(8397),I=n(345),x=n(4452),B=n(5188),$=n(6580),K=n(1880);const N=(T,S,U,v,h)=>({pageStartIndex:T,pageEndIndex:S,totalCount:U,paginationPage:v,sortField:h});let G=(()=>{var T;class S{constructor(v,h,b,D,A,W,w,j,X){this.popoversService=v,this.api=h,this.tableService=b,this.headerService=D,this.toastService=A,this.sanitizer=W,this.modalsService=w,this.router=j,this.activatedRoute=X,this.documents=[],this.allSystemOperationsCount=0,this.filters=null,this.sort={field:"createdAt",order:"desc"},this.pagination={page:0,itemsPerPage:50},this.agencyId=null,this.promotionId=null,this.documentsTableConfig={uniqueId:"table-1",showSelectors:!0,columns:[{key:"createdAt",label:"A\xf1adido en",size:"medium",type:"date"},{key:"title",label:"T\xedtulo",size:"large",type:"text"},{key:"fileName",label:"Nombre del archivo",size:"large",type:"text"},{key:"documentType",label:"Tipo de documento",size:"medium",type:"text"}],rows:[]}}ngOnInit(){this.getData()}ionViewWillEnter(){var v=this;return(0,e.A)(function*(){v.getData()})()}getData(){var v=this;return(0,e.A)(function*(){var h;let b;if(b="operation"===v.options.father?yield v.api.getOperationDocuments(v.options.operationId):yield v.api.getContactOperationDocuments({contactId:v.options.contactId}),v.documents=null===(h=b)||void 0===h||null===(h=h.success)||void 0===h?void 0:h.data,v.documents){let D=v.tableService.convertDataToTableRows(v.documents,v.documentsTableConfig);v.documentsTableConfig.rows=D}})()}openCreateDocumentModal(){var v=this;return(0,e.A)(function*(){yield v.modalsService.onShowCreateOperationDocumentModal(v.options.operationId),v.getData()})()}onGoNextPage(){(this.pagination.page+1)*this.pagination.itemsPerPage<this.allSystemOperationsCount&&(this.pagination.page++,this.getData())}onGoPreviousPage(){this.pagination.page>0&&(this.pagination.page--,this.getData())}updatePagination(){return{startIndex:this.pagination.page*this.pagination.itemsPerPage+1,endIndex:Math.min((this.pagination.page+1)*this.pagination.itemsPerPage,this.allSystemOperationsCount)}}onSort(v){}onRowClicked(v){return(0,e.A)(function*(){})()}onTableButtonClick(v){return(0,e.A)(function*(){})()}}return(T=S).\u0275fac=function(v){return new(v||T)(t.rXU(u.m),t.rXU(a.i),t.rXU(m.a),t.rXU(M.d),t.rXU(F.f),t.rXU(I.up),t.rXU(x.M),t.rXU(B.Ix),t.rXU(B.nX))},T.\u0275cmp=t.VBU({type:T,selectors:[["app-operation-documents"]],inputs:{options:"options"},standalone:!0,features:[t.aNF],decls:15,vars:8,consts:[[1,"crm-block-content"],[1,"crm-block-body",2,"padding","20px"],[1,"crm-header-modal"],[1,"crm-input"],[1,"crm-input-input","crm-input-input-searchbar"],[1,"fas","fa-search"],["type","text","placeholder","Buscar documento"],[1,"crm-buttons-group"],[1,"crm-button",3,"click"],[1,"fa","fa-plus"],[3,"goPreviousPage","goNextPage","sort","listPaginationConfig"],[1,"crm-section"],[3,"actionButtonClick","rowClicked","table"]],template:function(v,h){1&v&&(t.j41(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.nrm(6,"i",5)(7,"input",6),t.k0s()(),t.j41(8,"div",7)(9,"button",8),t.bIt("click",function(){return h.openCreateDocumentModal()}),t.nrm(10,"i",9),t.EFF(11," A\xf1adir Documento "),t.k0s()()(),t.j41(12,"app-list-pagination-selectors",10),t.bIt("goPreviousPage",function(){return h.onGoPreviousPage()})("goNextPage",function(){return h.onGoNextPage()})("sort",function(D){return h.onSort(D)}),t.k0s(),t.j41(13,"div",11)(14,"app-table",12),t.bIt("actionButtonClick",function(D){return h.onTableButtonClick(D)})("rowClicked",function(D){return h.onRowClicked(D)}),t.k0s()()()()()),2&v&&(t.R7$(12),t.Y8G("listPaginationConfig",t.s1E(2,N,h.updatePagination().startIndex,h.updatePagination().endIndex,h.allSystemOperationsCount,h.pagination.page+1,null!=h.sort&&h.sort.field?(null==h.sort?null:h.sort.field)+" "+(null==h.sort?null:h.sort.order):"Fecha de creaci\xf3n")),t.R7$(2),t.Y8G("table",h.documentsTableConfig))},dependencies:[C.MD,p.bv,c.YN,c.X1,s.P,$.k,l.b,K.O]}),S})()},7754:(E,f,n)=>{n.d(f,{X:()=>l});var e=n(177),C=n(9417),c=n(9465),p=n(3953);let l=(()=>{var s;class t{}return(s=t).\u0275fac=function(a){return new(a||s)},s.\u0275mod=p.$C({type:s}),s.\u0275inj=p.G2t({imports:[e.MD,C.YN,c.bv]}),t})()}}]);