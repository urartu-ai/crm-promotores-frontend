"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1112],{1112:(A,C,c)=>{c.r(C),c.d(C,{CalendarScreenPageModule:()=>Y});var u=c(177),M=c(9417),g=c(9465),_=c(5188),v=c(467),d=c(9703);const r=void 0,y=["es",[["a.\xa0m.","p.\xa0m."],r,r],r,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],r,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],r,[["a. C.","d. C."],r,["antes de Cristo","despu\xe9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",r,r,r],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","#,##0.00\xa0\xa4","#E0"],"EUR","\u20ac","euro",{AUD:[r,"$"],BRL:[r,"R$"],BYN:[r,"\u0440."],CAD:[r,"$"],CNY:[r,"\xa5"],EGP:[],ESP:["\u20a7"],GBP:[r,"\xa3"],HKD:[r,"$"],ILS:[r,"\u20aa"],INR:[r,"\u20b9"],JPY:[r,"\xa5"],KRW:[r,"\u20a9"],MXN:[r,"$"],NZD:[r,"$"],PHP:[r,"\u20b1"],RON:[r,"L"],THB:["\u0e3f"],TWD:[r,"NT$"],USD:["US$","$"],XAF:[],XCD:[r,"$"],XOF:[]},"ltr",function P(n){const l=n,a=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length,o=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return 1===l?1:0===o&&0!==a&&a%1e6==0&&0===t||!(o>=0&&o<=5)?4:5}];var e=c(3953),D=c(4501),k=c(6039),E=c(1213);const S=(n,l)=>[n,l];function O(n,l){1&n&&(e.qex(0),e.EFF(1,"Mes anterior"),e.bVm())}function x(n,l){1&n&&e.EFF(0,"Semana anterior")}function F(n,l){if(1&n){const a=e.RV6();e.j41(0,"ion-button",16),e.bIt("click",function(){const o=e.eBV(a).$implicit,i=e.XpG();return e.Njj(i.setView(o))}),e.EFF(1),e.k0s()}if(2&n){const a=l.$implicit,t=e.XpG();e.Y8G("fill",t.view===a?"solid":"outline"),e.R7$(),e.SpI(" ",a===t.CalendarView.Month?"Mes":"Semana"," ")}}function $(n,l){1&n&&(e.qex(0),e.EFF(1,"Mes siguiente"),e.bVm())}function I(n,l){1&n&&e.EFF(0,"Semana siguiente")}function N(n,l){if(1&n){const a=e.RV6();e.j41(0,"mwl-calendar-month-view",17),e.bIt("dayClicked",function(o){e.eBV(a);const i=e.XpG();return e.Njj(i.dayClicked(o.day))}),e.k0s()}if(2&n){const a=e.XpG();e.Y8G("viewDate",a.viewDate)("locale",a.locale)("events",a.events)}}function B(n,l){if(1&n&&e.nrm(0,"mwl-calendar-week-view",18),2&n){const a=e.XpG();e.Y8G("viewDate",a.viewDate)("locale",a.locale)("events",a.events)}}function j(n,l){if(1&n&&(e.j41(0,"ion-item")(1,"ion-label")(2,"strong"),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.EFF(5),e.nrm(6,"br"),e.EFF(7),e.nrm(8,"br"),e.EFF(9),e.nI1(10,"date"),e.nrm(11,"br"),e.EFF(12),e.k0s()()),2&n){const a=l.$implicit;e.R7$(3),e.SpI("Contacto: ",a.meta.contactName,""),e.R7$(2),e.SpI(" Promotora: ",a.meta.promoterName,""),e.R7$(2),e.SpI(" Propiedad: ",a.meta.propertyName,""),e.R7$(2),e.SpI(" Hora: ",e.i5U(10,5,a.start,"HH:mm"),""),e.R7$(3),e.SpI(" Notas: ",a.meta.notes," ")}}function R(n,l){if(1&n&&(e.j41(0,"div",19)(1,"h3"),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"ion-list"),e.DNE(5,j,13,8,"ion-item",20),e.k0s()()),2&n){const a=e.XpG();e.R7$(2),e.SpI(" Visitas de ",e.ii3(3,2,a.selectedDay.date,"longDate","","es")," "),e.R7$(3),e.Y8G("ngForOf",a.selectedDay.events)}}(0,u.EO)(y);const V=[{path:"",component:(()=>{var n;class l{constructor(t,o,i){this.headerService=t,this.api=o,this.byvaroState=i,this.view=d.St.Month,this.CalendarView=d.St,this.viewDate=new Date,this.locale="es",this.rawEvents=[],this.events=[],this.selectedDay=null}ngOnInit(){var t=this;return(0,v.A)(function*(){t.headerService.setConfig({title:"calendar"}),t.byvaroState.getState().subscribe(function(){var o=(0,v.A)(function*(i){null!=i&&i.user&&(t.currentUser=i.user,console.log("currentUser",t.currentUser),yield t.getData())});return function(i){return o.apply(this,arguments)}}())})()}ionViewWillEnter(){this.currentUser&&this.getData()}getData(){var t=this;return(0,v.A)(function*(){var o,i;const m={date:{gte:new Date((new Date).getFullYear(),(new Date).getMonth(),1),lte:new Date((new Date).getFullYear(),(new Date).getMonth()+1,1)},responsableUserId:{equals:t.currentUser.id},approved:{equals:!0}},f=yield t.api.getVisit(m,{field:"date",order:"asc"},{page:0,itemsPerPage:1e3});t.rawEvents=null==f||null===(o=f.success)||void 0===o?void 0:o.data,console.log("events",null==f||null===(i=f.success)||void 0===i?void 0:i.data),t.events=t.rawEvents.map(s=>{var p,h,b,w;return{start:s.date,end:s.notes&&s.notes.includes("D\xeda")?void 0:new Date(new Date(s.date).getTime()+36e5),title:s.notes,allDay:s.notes.includes("D\xeda"),color:{primary:"#3A50E4",secondary:"#EBEBEB"},meta:{id:s.id,notes:s.notes,contactName:null===(p=s.contact)||void 0===p?void 0:p.name,promoterName:(null===(h=s.promoter)||void 0===h?void 0:h.name)||(null===(b=s.agency)||void 0===b?void 0:b.name),propertyName:null===(w=s.property)||void 0===w?void 0:w.reference}}})})()}dayClicked(t){this.selectedDay=this.selectedDay&&this.selectedDay.date.getTime()===t.date.getTime()?null:t}setView(t){this.view=t}prev(){this.changeDate(-1)}next(){this.changeDate(1)}changeDate(t){this.viewDate=this.view===d.St.Month?new Date(this.viewDate.getFullYear(),this.viewDate.getMonth()+t,1):new Date(this.viewDate.setDate(this.viewDate.getDate()+7*t))}}return(n=l).\u0275fac=function(t){return new(t||n)(e.rXU(D.d),e.rXU(k.i),e.rXU(E.c))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-calendar-screen"]],decls:20,vars:13,consts:[["weekPrev",""],["weekNext",""],[3,"fullscreen","scrollY"],[1,"crm-block-content"],[1,"crm-block-body-blue-content"],[1,"toolbar"],["ion-button","",1,"nav-btn",3,"click"],[1,"fas","fa-chevron-left"],[4,"ngIf","ngIfElse"],[1,"view-toggle"],[3,"fill","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"calendar-container"],[3,"viewDate","locale","events","dayClicked",4,"ngIf"],[3,"viewDate","locale","events",4,"ngIf"],["class","event-dropdown",4,"ngIf"],[3,"click","fill"],[3,"dayClicked","viewDate","locale","events"],[3,"viewDate","locale","events"],[1,"event-dropdown"],[4,"ngFor","ngForOf"]],template:function(t,o){if(1&t){const i=e.RV6();e.j41(0,"ion-content",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"button",6),e.bIt("click",function(){return e.eBV(i),e.Njj(o.prev())}),e.nrm(5,"i",7),e.DNE(6,O,2,0,"ng-container",8)(7,x,1,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(9,"div",9),e.DNE(10,F,2,2,"ion-button",10),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return e.eBV(i),e.Njj(o.next())}),e.DNE(12,$,2,0,"ng-container",8)(13,I,1,0,"ng-template",null,1,e.C5r),e.nrm(15,"i",11),e.k0s()(),e.j41(16,"div",12),e.DNE(17,N,1,3,"mwl-calendar-month-view",13)(18,B,1,3,"mwl-calendar-week-view",14),e.k0s(),e.DNE(19,R,6,7,"div",15),e.k0s()()()}if(2&t){const i=e.sdS(8),m=e.sdS(14);e.Y8G("fullscreen",!0)("scrollY",!0),e.R7$(6),e.Y8G("ngIf",o.view===o.CalendarView.Month)("ngIfElse",i),e.R7$(4),e.Y8G("ngForOf",e.l_i(10,S,o.CalendarView.Month,o.CalendarView.Week)),e.R7$(2),e.Y8G("ngIf",o.view===o.CalendarView.Month)("ngIfElse",m),e.R7$(5),e.Y8G("ngIf",o.view===o.CalendarView.Month),e.R7$(),e.Y8G("ngIf",o.view===o.CalendarView.Week),e.R7$(),e.Y8G("ngIf",o.selectedDay)}},dependencies:[u.Sq,u.bT,g.Jm,g.W9,g.uz,g.he,g.nf,d.jD,d.tG,u.vh],styles:['@charset "UTF-8";[_nghost-%COMP%]     .cal-month-view{padding:0}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333;border:1px solid #EBEBEB;padding:8px;background:#fff;text-align:left;font-weight:400;text-transform:uppercase}[_nghost-%COMP%]     .cal-month-view .cal-header .cal-cell:hover{background:#fff}[_nghost-%COMP%]     .cal-month-view .cal-day-number{float:left;margin:12px 0 0 12px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;color:#333;font-size:18px;opacity:1}[_nghost-%COMP%]     .cal-month-view .cal-day-badge{display:none}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-weekend .cal-day-number{color:#bbb}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today{background-color:#fff;border-radius:6px;box-shadow:0 0 0 2px #3a50e4;border:none}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .cal-day-number{color:#3a50e4;font-size:18px;font-weight:700}[_nghost-%COMP%]     .cal-month-view .cal-day-cell.cal-today .ds-calendar-cell-title{color:#3a50e4;font-weight:700}[_nghost-%COMP%]     .cal-month-view .cal-cell-top{min-height:auto;max-height:auto}[_nghost-%COMP%]     .cal-week-view{padding:0}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333;border-bottom:1px solid #EBEBEB;border-right:1px solid #EBEBEB;padding:8px;background:#fff;text-transform:uppercase;font-weight:400;text-align:left}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell:hover{background:#fff}[_nghost-%COMP%]     .cal-week-view .cal-header .cal-cell:last-child{border-right:none}[_nghost-%COMP%]     .cal-week-view .cal-time-label{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;color:#333;padding:4px 8px;border-right:1px solid #EBEBEB;background:#fff}[_nghost-%COMP%]     .cal-week-view .cal-time-segment{border-top:1px solid #EBEBEB}[_nghost-%COMP%]     .cal-week-view .cal-body .cal-day-column{border-right:1px solid #EBEBEB}[_nghost-%COMP%]     .cal-week-view .cal-body .cal-day-column:last-child{border-right:none}[_nghost-%COMP%]     .cal-week-view .cal-day-column.cal-today{background-color:#fff;box-shadow:inset 0 0 0 2px #3a50e4}.crm-block-body-blue-content[_ngcontent-%COMP%]{height:100%}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;background-color:#3a50e4;border-radius:8px;box-shadow:0 2px 4px #0000001a}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]{--box-shadow: none;--border: none;font-size:14px;color:#fff;padding:.25rem .5rem;background:transparent;display:flex;align-items:center;justify-content:center;gap:16px;font-weight:700}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .nav-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#fff}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 .25rem;--background-focused: rgba(255, 255, 255, .2);font-size:.9rem;text-transform:uppercase;font-weight:600}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   ion-button[fill=outline][_ngcontent-%COMP%]{--border-color: #ffffff;--color: #ffffff}.crm-block-body-blue-content[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   ion-button[fill=solid][_ngcontent-%COMP%]{--background: #ffffff;--color: #3A50E4}']}),l})()}];let G=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[_.iI.forChild(V),_.iI]}),l})();var T=c(1163);let Y=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[u.MD,M.YN,g.bv,G,d.rO.forRoot({provide:d.MJ,useFactory:T.a})]}),l})()}}]);