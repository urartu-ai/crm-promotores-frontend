"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4981],{7141:(Y,V,c)=>{c.d(V,{S:()=>o});var e=c(3953);let o=(()=>{var M;class n{constructor(S,G){this.el=S,this.renderer=G,this.disabled=!1}ngAfterViewInit(){this.updateVisibility()}ngOnChanges(S){this.updateVisibility()}updateVisibility(){if(!this.disabled)return this.renderer.setStyle(this.el.nativeElement,"display","block"),void this.renderer.removeStyle(this.el.nativeElement,"height");this.disabled&&this.isEmpty(this.value)?(this.renderer.setStyle(this.el.nativeElement,"display","none"),this.renderer.setStyle(this.el.nativeElement,"height","0")):(this.renderer.setStyle(this.el.nativeElement,"display","block"),this.renderer.removeStyle(this.el.nativeElement,"height"))}isEmpty(S){return null==S||""===S||Array.isArray(S)&&0===S.length||"object"==typeof S&&0===Object.keys(S).length}}return(M=n).\u0275fac=function(S){return new(S||M)(e.rXU(e.aKT),e.rXU(e.sFG))},M.\u0275dir=e.FsC({type:M,selectors:[["","appHideIfNoData",""]],inputs:{value:[0,"appHideIfNoData","value"],disabled:"disabled"},standalone:!0,features:[e.OA$]}),n})()},9083:(Y,V,c)=>{c.d(V,{E:()=>k});var e=c(177),o=c(9417),M=c(9465),n=c(969),I=c(2652),S=c(8147),G=c(6279),x=c(5768),B=c(3953);let k=(()=>{var h;class R{}return(h=R).\u0275fac=function(D){return new(D||h)},h.\u0275mod=B.$C({type:h}),h.\u0275inj=B.G2t({imports:[e.MD,o.YN,o.X1,M.bv,n.rJ,I.T,S.h,G.F,x.$]}),R})()},293:(Y,V,c)=>{c.d(V,{N:()=>y});var e=c(3953),o=c(177),M=c(9417),n=c(9465),I=c(969),S=c(1792),G=c(7141),x=c(8147);const B=["addressInput"],k=(_,E)=>({"crm-section-disabled-inputs":_,"crm-section-invisible":E});function h(_,E){1&_&&e.nrm(0,"ion-icon",4)}function R(_,E){1&_&&e.nrm(0,"ion-icon",5)}function s(_,E){if(1&_&&(e.j41(0,"option",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&_){const F=E.$implicit;e.Y8G("value",F),e.R7$(),e.SpI(" ",e.bMT(2,2,"promotion_constructionType_texts."+F)," ")}}function D(_,E){if(1&_&&(e.EFF(0),e.nI1(1,"translate")),2&_){const F=e.XpG();e.SpI(" ",e.bMT(1,1,"promotion_constructionType_texts."+F.promotionStepOne.constructionType+"-text")," ")}}function P(_,E){1&_&&e.EFF(0," Selecciona un tipo de promoci\xf3n para ver m\xe1s informaci\xf3n ")}function w(_,E){if(1&_&&(e.j41(0,"option",31),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&_){const F=E.$implicit;e.Y8G("value",F),e.R7$(),e.SpI(" ",e.bMT(2,2,"promotion_constructionType_texts."+F)," ")}}function u(_,E){1&_&&e.nrm(0,"ion-icon",4)}function O(_,E){1&_&&e.nrm(0,"ion-icon",5)}function j(_,E){if(1&_){const F=e.RV6();e.j41(0,"google-map",32),e.bIt("mapClick",function(a){e.eBV(F);const f=e.XpG();return e.Njj(f.onMapClick(a))}),e.j41(1,"map-marker",33),e.bIt("click",function(a){e.eBV(F);const f=e.XpG();return e.Njj(f.onMarkerDragEnd(a))}),e.k0s()()}if(2&_){const F=e.XpG();e.Y8G("center",F.mapCenter)("zoom",F.mapZoom)("options",F.mapOptions),e.R7$(),e.Y8G("position",F.markerPosition)("options",F.markerOptions)}}function T(_,E){1&_&&e.nrm(0,"ion-icon",4)}function N(_,E){1&_&&e.nrm(0,"ion-icon",5)}let y=(()=>{var _;class E{constructor(C){this.ngZone=C,this.disabled=!1,this.promotionStepOne={projectName:null,constructionType:null,constructionSubType:null,constructionStatus:null,constructionYear:null,constructionStart:null,commercializationStart:null,keyDeliveryDate:null,country:null,province:null,city:null,neighborhood:null,address:null,postalCode:null,number:null,showAddressPublicly:!1,showGeoreferencePublicly:!1,energyEfficiencyCertificate:null,co2EmissionsCertificate:null,energyEfficiencyValue:null,co2EmissionsValue:null},this.promotionKeys=["edificio-multifamiliar","promocion-villas-individuales","promocion-conjunto-villas","promocion-residencial-mixta"],this.subPromotionKeys=["promocion-residencial","promocion-rehabilitacion","promocion-protegida","complejo-turistico","branded-residence"],this.mapCenter={lat:40.416775,lng:-3.70379},this.mapZoom=6,this.markerPosition=this.mapCenter,this.markerOptions={draggable:!0},this.mapOptions={disableDefaultUI:!1,styles:[{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]}]},this.dropdownSections={general:!0,location:!0,energy:!0}}ngOnInit(){}ngAfterViewInit(){this.autocomplete=new google.maps.places.Autocomplete(this.addressInput.nativeElement,{types:["geocode"],componentRestrictions:{country:"es"}}),this.autocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{const a=this.autocomplete.getPlace();null==a.geometry||(this.mapCenter={lat:a.geometry.location.lat(),lng:a.geometry.location.lng()},this.markerPosition=this.mapCenter,this.mapZoom=17,this.promotionStepOne.address=a.formatted_address||a.name,this.addressInput.nativeElement.value=this.promotionStepOne.address,this.extractAddressComponents(a.address_components))})})}onMapClick(C){C.latLng&&(this.markerPosition=C.latLng.toJSON(),this.mapCenter=this.markerPosition,this.getAddressFromCoordinates(this.markerPosition.lat,this.markerPosition.lng))}onMarkerDragEnd(C){C.latLng&&(this.markerPosition=C.latLng.toJSON(),this.getAddressFromCoordinates(this.markerPosition.lat,this.markerPosition.lng))}getAddressFromCoordinates(C,a){(new google.maps.Geocoder).geocode({location:{lat:C,lng:a}},(b,m)=>{"OK"===m&&b[0]&&this.ngZone.run(()=>{this.promotionStepOne.address=b[0].formatted_address,this.addressInput.nativeElement.value=this.promotionStepOne.address,this.extractAddressComponents(b[0].address_components)})})}extractAddressComponents(C){if(C)for(const a of C){const f=a.types;f.indexOf("locality")>-1&&(this.promotionStepOne.city=a.long_name),f.indexOf("administrative_area_level_2")>-1&&(this.promotionStepOne.province=a.long_name),f.indexOf("postal_code")>-1&&(this.promotionStepOne.postalCode=a.long_name),f.indexOf("street_number")>-1&&(this.promotionStepOne.number=a.long_name),f.indexOf("route")}}}return(_=E).\u0275fac=function(C){return new(C||_)(e.rXU(e.SKi))},_.\u0275cmp=e.VBU({type:_,selectors:[["app-step-one-promotion-form"]],viewQuery:function(C,a){if(1&C&&e.GBs(B,5),2&C){let f;e.mGM(f=e.lsd())&&(a.addressInput=f.first)}},inputs:{disabled:"disabled"},decls:112,vars:57,consts:[["addressInput",""],[1,"crm-block-dropdown","small",3,"click"],[1,"crm-block-dropdown-title"],[1,"crm-block-dropdown-icon"],["name","chevron-up-outline"],["name","chevron-down-outline"],[1,"crm-section",3,"ngClass"],[1,"crm-section-inputs","crm-section-inputs-bigger-gap","crm-section-margin-top","crm-section-margin-bottom"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"appInputViewMode"],["type","text","placeholder","Nombre",3,"ngModelChange","disabled","ngModel"],[1,"crm-input",3,"appHideIfNoData","disabled"],["placeholder","Seleccione",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"crm-text"],[1,"crm-section-inputs","crm-section-inputs-bigger-gap"],[1,"crm-input","crm-section-margin-top","crm-section-margin-bottom",3,"appHideIfNoData","disabled"],["id","addressInput","type","text","placeholder","Nombre",3,"ngModelChange","disabled","ngModel"],["height","300px","width","100%",2,"border-radius","12px",3,"center","zoom","options"],[1,"crm-section-inputs-grid-2-cols","crm-section-margin-top","crm-section-margin-bottom"],["value","A"],["value","B"],["value","C"],["value","D"],["value","E"],["value","F"],["value","G"],["value","exento"],["value","en-tramite"],[1,"crm-input-input-symbol"],[3,"value"],["height","300px","width","100%",2,"border-radius","12px",3,"mapClick","center","zoom","options"],[3,"click","position","options"]],template:function(C,a){if(1&C){const f=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){return e.eBV(f),e.Njj(a.dropdownSections.general=!a.dropdownSections.general)}),e.j41(1,"div",2),e.EFF(2," Caracter\xedsticas generales "),e.k0s(),e.j41(3,"div",3),e.DNE(4,h,1,0,"ion-icon",4)(5,R,1,0,"ion-icon",5),e.k0s()(),e.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),e.EFF(10," Nombre de la promoci\xf3n "),e.k0s(),e.j41(11,"div",10)(12,"input",11),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.projectName,m)||(a.promotionStepOne.projectName=m),e.Njj(m)}),e.k0s()()(),e.j41(13,"div",12)(14,"div",9),e.EFF(15," Tipo de promoci\xf3n "),e.k0s(),e.j41(16,"div",10)(17,"select",13),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.constructionType,m)||(a.promotionStepOne.constructionType=m),e.Njj(m)}),e.DNE(18,s,3,4,"option",14),e.k0s()(),e.j41(19,"div",15),e.DNE(20,D,2,3)(21,P,1,0),e.k0s()(),e.j41(22,"div",12)(23,"div",9),e.EFF(24," Subtipo de promoci\xf3n "),e.k0s(),e.j41(25,"div",10)(26,"select",13),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.constructionSubType,m)||(a.promotionStepOne.constructionSubType=m),e.Njj(m)}),e.DNE(27,w,3,4,"option",14),e.k0s()()()()(),e.j41(28,"div",1),e.bIt("click",function(){return e.eBV(f),e.Njj(a.dropdownSections.location=!a.dropdownSections.location)}),e.j41(29,"div",2),e.EFF(30," Ubicaci\xf3n "),e.k0s(),e.j41(31,"div",3),e.DNE(32,u,1,0,"ion-icon",4)(33,O,1,0,"ion-icon",5),e.k0s()(),e.j41(34,"div",6)(35,"div",16)(36,"div",17)(37,"div",9),e.EFF(38,"Direcci\xf3n"),e.k0s(),e.j41(39,"div",10)(40,"input",18,0),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.address,m)||(a.promotionStepOne.address=m),e.Njj(m)}),e.k0s()()(),e.DNE(42,j,2,5,"google-map",19),e.k0s()(),e.j41(43,"div",1),e.bIt("click",function(){return e.eBV(f),e.Njj(a.dropdownSections.energy=!a.dropdownSections.energy)}),e.j41(44,"div",2),e.EFF(45," Certificaci\xf3n energ\xe9tica "),e.k0s(),e.j41(46,"div",3),e.DNE(47,T,1,0,"ion-icon",4)(48,N,1,0,"ion-icon",5),e.k0s()(),e.j41(49,"div",6)(50,"div",16)(51,"div",20)(52,"div",12)(53,"div",9),e.EFF(54," Certificado eficiencia energ\xe9tica "),e.k0s(),e.j41(55,"div",10)(56,"select",13),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.energyEfficiencyCertificate,m)||(a.promotionStepOne.energyEfficiencyCertificate=m),e.Njj(m)}),e.j41(57,"option",21),e.EFF(58,"A"),e.k0s(),e.j41(59,"option",22),e.EFF(60,"B"),e.k0s(),e.j41(61,"option",23),e.EFF(62,"C"),e.k0s(),e.j41(63,"option",24),e.EFF(64,"D"),e.k0s(),e.j41(65,"option",25),e.EFF(66,"E"),e.k0s(),e.j41(67,"option",26),e.EFF(68,"F"),e.k0s(),e.j41(69,"option",27),e.EFF(70,"G"),e.k0s(),e.j41(71,"option",28),e.EFF(72,"Exento"),e.k0s(),e.j41(73,"option",29),e.EFF(74,"En tr\xe1mite"),e.k0s()()()(),e.j41(75,"div",12)(76,"div",9),e.EFF(77," Certificado emisiones CO2 "),e.k0s(),e.j41(78,"div",10)(79,"select",13),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.co2EmissionsCertificate,m)||(a.promotionStepOne.co2EmissionsCertificate=m),e.Njj(m)}),e.j41(80,"option",21),e.EFF(81,"A"),e.k0s(),e.j41(82,"option",22),e.EFF(83,"B"),e.k0s(),e.j41(84,"option",23),e.EFF(85,"C"),e.k0s(),e.j41(86,"option",24),e.EFF(87,"D"),e.k0s(),e.j41(88,"option",25),e.EFF(89,"E"),e.k0s(),e.j41(90,"option",26),e.EFF(91,"F"),e.k0s(),e.j41(92,"option",27),e.EFF(93,"G"),e.k0s(),e.j41(94,"option",28),e.EFF(95,"Exento"),e.k0s(),e.j41(96,"option",29),e.EFF(97,"En tr\xe1mite"),e.k0s()()()(),e.j41(98,"div",12)(99,"div",9),e.EFF(100," Certificado eficiencia energ\xe9tica "),e.k0s(),e.j41(101,"div",10)(102,"input",11),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.energyEfficiencyValue,m)||(a.promotionStepOne.energyEfficiencyValue=m),e.Njj(m)}),e.k0s(),e.j41(103,"div",30),e.EFF(104," kWh/m2 "),e.k0s()()(),e.j41(105,"div",12)(106,"div",9),e.EFF(107," Certificado emisiones CO2 "),e.k0s(),e.j41(108,"div",10)(109,"input",11),e.mxI("ngModelChange",function(m){return e.eBV(f),e.DH7(a.promotionStepOne.co2EmissionsValue,m)||(a.promotionStepOne.co2EmissionsValue=m),e.Njj(m)}),e.k0s(),e.j41(110,"div",30),e.EFF(111," kgCO2/m2 "),e.k0s()()()()()()}2&C&&(e.R7$(4),e.vxM(a.dropdownSections.general?4:5),e.R7$(2),e.Y8G("ngClass",e.l_i(48,k,a.disabled,!a.dropdownSections.general)),e.R7$(5),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.projectName),e.R7$(),e.Y8G("appHideIfNoData",a.promotionStepOne.constructionType)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.constructionType),e.R7$(),e.Y8G("ngForOf",a.promotionKeys),e.R7$(2),e.vxM(a.promotionStepOne.constructionType?20:21),e.R7$(2),e.Y8G("appHideIfNoData",a.promotionStepOne.constructionSubType)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.constructionSubType),e.R7$(),e.Y8G("ngForOf",a.subPromotionKeys),e.R7$(5),e.vxM(a.dropdownSections.location?32:33),e.R7$(2),e.Y8G("ngClass",e.l_i(51,k,a.disabled,!a.dropdownSections.location)),e.R7$(2),e.Y8G("appHideIfNoData",a.promotionStepOne.address)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.address),e.R7$(2),e.vxM(a.disabled?-1:42),e.R7$(5),e.vxM(a.dropdownSections.energy?47:48),e.R7$(2),e.Y8G("ngClass",e.l_i(54,k,a.disabled,!a.dropdownSections.energy)),e.R7$(3),e.Y8G("appHideIfNoData",a.promotionStepOne.energyEfficiencyCertificate)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.energyEfficiencyCertificate),e.R7$(19),e.Y8G("appHideIfNoData",a.promotionStepOne.co2EmissionsCertificate)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.co2EmissionsCertificate),e.R7$(19),e.Y8G("appHideIfNoData",a.promotionStepOne.energyEfficiencyValue)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.energyEfficiencyValue),e.R7$(3),e.Y8G("appHideIfNoData",a.promotionStepOne.co2EmissionsValue)("disabled",a.disabled),e.R7$(3),e.Y8G("appInputViewMode",a.disabled),e.R7$(),e.Y8G("disabled",a.disabled),e.R50("ngModel",a.promotionStepOne.co2EmissionsValue))},dependencies:[o.YU,o.Sq,M.xH,M.y7,M.me,M.wz,M.BC,M.vS,n.iq,I.u6,I.fU,S.M,G.S,x.D9]}),E})()},8857:(Y,V,c)=>{c.d(V,{f:()=>J});var e=c(6069),o=c(7376),n=c(3953),I=c(6552),S=c(177),G=c(9417),x=c(9465),B=c(1792),k=c(6279),h=c(7141);const R=["fileUploaderManagerComponent"],s=["planosFileUploadManagerComponent"],D=["catalogsFileUploadManagerComponent"],P=["videosFileUploadManagerComponent"],w=(r,p)=>({"crm-section-invisible":r,"crm-section-disabled-inputs":p}),u=r=>({"crm-section-invisible":r}),O=r=>({active:r});function j(r,p){1&r&&n.nrm(0,"ion-icon",7)}function T(r,p){1&r&&n.nrm(0,"ion-icon",8)}function N(r,p){1&r&&(n.j41(0,"div",10),n.EFF(1," Esta informaci\xf3n ser\xe1 para la promoci\xf3n y en cada unidad podr\xe1s elegir si se muestra o no. "),n.k0s())}function y(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",28),n.bIt("click",function(){const i=n.eBV(t).$implicit,l=n.XpG(2);return n.Njj(l.onSelectLang(i,"title"))}),n.nrm(1,"span"),n.j41(2,"div",29),n.EFF(3),n.k0s()()}if(2&r){const t=p.$implicit,d=n.XpG(2);n.Y8G("ngClass",n.eq3(5,O,t===d.selectedLangsToEdit.title)),n.R7$(),n.ZvI("fi fi-","en"===t?"gb":t,""),n.R7$(2),n.SpI(" ",d.toUpperCase(t)," ")}}function _(r,p){if(1&r&&(n.j41(0,"div",24)(1,"button",25),n.EFF(2," Traducir "),n.k0s(),n.j41(3,"div",26),n.Z7z(4,y,4,7,"div",27,n.fX1),n.k0s()()),2&r){const t=n.XpG();n.R7$(4),n.Dyx(t.langs)}}function E(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",18)(1,"ion-textarea",30),n.mxI("ngModelChange",function(i){n.eBV(t);const l=n.XpG();return n.DH7(l.promotionStepThree["description_"+l.selectedLangsToEdit.description],i)||(l.promotionStepThree["description_"+l.selectedLangsToEdit.description]=i),n.Njj(i)}),n.k0s()()}if(2&r){const t=n.XpG();n.R7$(),n.Y8G("autoGrow",!0),n.R50("ngModel",t.promotionStepThree["description_"+t.selectedLangsToEdit.description])}}function F(r,p){if(1&r&&(n.j41(0,"div",19),n.EFF(1),n.k0s()),2&r){const t=n.XpG();n.R7$(),n.SpI(" ",t.promotionStepThree["description_"+t.selectedLangsToEdit.description]||"Sin informaci\xf3n"," ")}}function C(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",28),n.bIt("click",function(){const i=n.eBV(t).$implicit,l=n.XpG(2);return n.Njj(l.onSelectLang(i,"description"))}),n.nrm(1,"span"),n.j41(2,"div",29),n.EFF(3),n.k0s()()}if(2&r){const t=p.$implicit,d=n.XpG(2);n.Y8G("ngClass",n.eq3(5,O,t===d.selectedLangsToEdit.description)),n.R7$(),n.ZvI("fi fi-","en"===t?"gb":t,""),n.R7$(2),n.SpI(" ",d.toUpperCase(t)," ")}}function a(r,p){if(1&r&&(n.j41(0,"div",24)(1,"button",25),n.EFF(2," Traducir "),n.k0s(),n.j41(3,"div",26),n.Z7z(4,C,4,7,"div",27,n.fX1),n.k0s()()),2&r){const t=n.XpG();n.R7$(4),n.Dyx(t.langs)}}function f(r,p){1&r&&n.nrm(0,"ion-icon",7)}function b(r,p){1&r&&n.nrm(0,"ion-icon",8)}function m(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",4),n.bIt("click",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.dropdownSections.plans=!i.dropdownSections.plans)}),n.j41(1,"div",5),n.EFF(2," Planos "),n.k0s(),n.j41(3,"div",6),n.DNE(4,f,1,0,"ion-icon",7)(5,b,1,0,"ion-icon",8),n.k0s()()}if(2&r){const t=n.XpG();n.R7$(4),n.vxM(t.dropdownSections.plans?4:5)}}function U(r,p){1&r&&n.nrm(0,"ion-icon",7)}function X(r,p){1&r&&n.nrm(0,"ion-icon",8)}function A(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",4),n.bIt("click",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.dropdownSections.catalogs=!i.dropdownSections.catalogs)}),n.j41(1,"div",5),n.EFF(2," Cat\xe1logos "),n.k0s(),n.j41(3,"div",6),n.DNE(4,U,1,0,"ion-icon",7)(5,X,1,0,"ion-icon",8),n.k0s()()}if(2&r){const t=n.XpG();n.R7$(4),n.vxM(t.dropdownSections.catalogs?4:5)}}function L(r,p){1&r&&n.nrm(0,"ion-icon",7)}function H(r,p){1&r&&n.nrm(0,"ion-icon",8)}function K(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",4),n.bIt("click",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.dropdownSections.videos=!i.dropdownSections.videos)}),n.j41(1,"div",5),n.EFF(2," V\xeddeos "),n.k0s(),n.j41(3,"div",6),n.DNE(4,L,1,0,"ion-icon",7)(5,H,1,0,"ion-icon",8),n.k0s()()}if(2&r){const t=n.XpG();n.R7$(4),n.vxM(t.dropdownSections.videos?4:5)}}function W(r,p){1&r&&n.nrm(0,"ion-icon",7)}function z(r,p){1&r&&n.nrm(0,"ion-icon",8)}function Z(r,p){if(1&r){const t=n.RV6();n.j41(0,"div",4),n.bIt("click",function(){n.eBV(t);const i=n.XpG();return n.Njj(i.dropdownSections.images=!i.dropdownSections.images)}),n.j41(1,"div",5),n.EFF(2," Im\xe1genes "),n.k0s(),n.j41(3,"div",6),n.DNE(4,W,1,0,"ion-icon",7)(5,z,1,0,"ion-icon",8),n.k0s()()}if(2&r){const t=n.XpG();n.R7$(4),n.vxM(t.dropdownSections.images?4:5)}}let J=(()=>{var r;class p{constructor(d){this.utils=d,this.disabled=!1,this.promotionStepThree={title_es:"",description_es:"",title_en:"",description_en:"",title_de:"",description_de:"",title_fr:"",description_fr:"",title_ru:"",description_ru:"",promotionFiles:[],deletedFilesIds:[]},this.selectedLangsToEdit={title:"es",description:"es"},this.dropdownSections={texts:!0,plans:!0,catalogs:!0,videos:!0,images:!0},this.languages=e.e,this.langs=["es","en","de","fr","ru"]}ngOnInit(){}syncFiles(){setTimeout(()=>{var d,i,l,v;const g={multiple:!0,size:"medium",showRemove:!this.disabled,showName:!0,rounded:!1,allowUpload:!this.disabled,accept:"image/*",showStar:!1,openUrlOnClick:!0,files:[]},Q=o.cloneDeep(null===(d=this.promotionStepThree)||void 0===d?void 0:d.promotionFiles).filter($=>"images"===(null==$?void 0:$.category)||!(null!=$&&$.category));this.fileUploaderManager.config={...g,filesCategory:"images",files:Q},this.planosFileUploadManagerComponent.config={...g,filesCategory:"plan",accept:"image/*,application/pdf",files:this.utils.filterFilesByCategoryAndSort(null===(i=this.promotionStepThree)||void 0===i?void 0:i.promotionFiles,"plan")},this.catalogsFileUploadManagerComponent.config={...g,filesCategory:"catalog",accept:"image/*,application/pdf",files:this.utils.filterFilesByCategoryAndSort(null===(l=this.promotionStepThree)||void 0===l?void 0:l.promotionFiles,"catalog")},this.videosFileUploadManagerComponent.config={...g,filesCategory:"video",accept:"video/*",files:this.utils.filterFilesByCategoryAndSort(null===(v=this.promotionStepThree)||void 0===v?void 0:v.promotionFiles,"video")}})}disableFilesInputs(){this.fileUploaderManager.setEditingMode(!1),this.planosFileUploadManagerComponent.setEditingMode(!1),this.catalogsFileUploadManagerComponent.setEditingMode(!1),this.videosFileUploadManagerComponent.setEditingMode(!1)}toUpperCase(d){return d.toUpperCase()}onSelectLang(d,i){this.selectedLangsToEdit[i]=d}}return(r=p).\u0275fac=function(d){return new(d||r)(n.rXU(I.T))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-step-three-promotion-form"]],viewQuery:function(d,i){if(1&d&&(n.GBs(R,7),n.GBs(s,5),n.GBs(D,5),n.GBs(P,5)),2&d){let l;n.mGM(l=n.lsd())&&(i.fileUploaderManager=l.first),n.mGM(l=n.lsd())&&(i.planosFileUploadManagerComponent=l.first),n.mGM(l=n.lsd())&&(i.catalogsFileUploadManagerComponent=l.first),n.mGM(l=n.lsd())&&(i.videosFileUploadManagerComponent=l.first)}},inputs:{disabled:"disabled"},decls:38,vars:34,consts:[["planosFileUploadManagerComponent",""],["catalogsFileUploadManagerComponent",""],["videosFileUploadManagerComponent",""],["fileUploaderManagerComponent",""],[1,"crm-block-dropdown","small",3,"click"],[1,"crm-block-dropdown-title"],[1,"crm-block-dropdown-icon"],["name","chevron-up-outline"],["name","chevron-down-outline"],[1,"crm-section",2,"gap","0",3,"ngClass"],[1,"crm-section-light-text",2,"margin-top","8px"],[1,"crm-section-inputs","crm-section-inputs-bigger-gap"],[1,"crm-input","crm-section-margin-top",3,"appHideIfNoData","disabled"],[1,"crm-input-label"],[1,"crm-input-input",3,"appInputViewMode"],["type","text","placeholder","Introduce el t\xedtulo",3,"ngModelChange","ngModel"],["class","crm-input-translation",4,"ngIf"],[1,"crm-input",3,"appHideIfNoData","disabled"],[1,"crm-input-input","crm-input-input-textarea"],[1,"crm-input-view"],[1,"crm-block-dropdown","small"],[1,"crm-section","size-medium",3,"ngClass"],[1,"crm-section-margin-top"],[3,"ngClass"],[1,"crm-input-translation"],[1,"crm-button","crm-input-translation-btn"],[1,"crm-input-translation-flags"],[1,"crm-input-translation-flags-flag",3,"ngClass"],[1,"crm-input-translation-flags-flag",3,"click","ngClass"],[1,"crm-input-translation-flags-flag-text"],["placeholder","Introduce la descripci\xf3n",3,"ngModelChange","autoGrow","ngModel"]],template:function(d,i){if(1&d){const l=n.RV6();n.j41(0,"div",4),n.bIt("click",function(){return n.eBV(l),n.Njj(i.dropdownSections.texts=!i.dropdownSections.texts)}),n.j41(1,"div",5),n.EFF(2," Textos e im\xe1genes "),n.k0s(),n.j41(3,"div",6),n.DNE(4,j,1,0,"ion-icon",7)(5,T,1,0,"ion-icon",8),n.k0s()(),n.j41(6,"div",9),n.DNE(7,N,2,0,"div",10),n.j41(8,"div",11)(9,"div",12)(10,"div",13),n.EFF(11," T\xedtulo "),n.k0s(),n.j41(12,"div",14)(13,"input",15),n.mxI("ngModelChange",function(g){return n.eBV(l),n.DH7(i.promotionStepThree["title_"+i.selectedLangsToEdit.title],g)||(i.promotionStepThree["title_"+i.selectedLangsToEdit.title]=g),n.Njj(g)}),n.k0s()(),n.DNE(14,_,6,0,"div",16),n.k0s(),n.j41(15,"div",17)(16,"div",13),n.EFF(17," Texto de descripci\xf3n "),n.k0s(),n.DNE(18,E,2,2,"div",18)(19,F,2,1,"div",19)(20,a,6,0,"div",16),n.k0s()()(),n.DNE(21,m,6,1,"div",20),n.j41(22,"div",21),n.nrm(23,"app-file-uploader-manager",22,0),n.k0s(),n.DNE(25,A,6,1,"div",20),n.j41(26,"div",21),n.nrm(27,"app-file-uploader-manager",22,1),n.k0s(),n.DNE(29,K,6,1,"div",20),n.j41(30,"div",21),n.nrm(31,"app-file-uploader-manager",22,2),n.k0s(),n.j41(33,"div",23),n.DNE(34,Z,6,1,"div",20),n.j41(35,"div",21),n.nrm(36,"app-file-uploader-manager",22,3),n.k0s()()}if(2&d){const l=n.sdS(24),v=n.sdS(28),g=n.sdS(32);n.R7$(4),n.vxM(i.dropdownSections.texts?4:5),n.R7$(2),n.Y8G("ngClass",n.l_i(21,w,!i.dropdownSections.texts,i.disabled)),n.R7$(),n.vxM(i.disabled?-1:7),n.R7$(2),n.Y8G("appHideIfNoData",i.promotionStepThree["title_"+i.selectedLangsToEdit.title])("disabled",i.disabled),n.R7$(3),n.Y8G("appInputViewMode",i.disabled),n.R7$(),n.R50("ngModel",i.promotionStepThree["title_"+i.selectedLangsToEdit.title]),n.R7$(),n.Y8G("ngIf",!i.disabled),n.R7$(),n.Y8G("appHideIfNoData",i.promotionStepThree["description_"+i.selectedLangsToEdit.description])("disabled",i.disabled),n.R7$(3),n.vxM(i.disabled?19:18),n.R7$(2),n.Y8G("ngIf",!i.disabled),n.R7$(),n.vxM((null==l||null==l.config||null==l.config.files?null:l.config.files.length)>0||!i.disabled?21:-1),n.R7$(),n.Y8G("ngClass",n.eq3(24,u,!i.dropdownSections.plans||0===(null==l||null==l.config||null==l.config.files?null:l.config.files.length)&&i.disabled)),n.R7$(3),n.vxM((null==v||null==v.config||null==v.config.files?null:v.config.files.length)>0||!i.disabled?25:-1),n.R7$(),n.Y8G("ngClass",n.eq3(26,u,!i.dropdownSections.catalogs||0===(null==v||null==v.config||null==v.config.files?null:v.config.files.length)&&i.disabled)),n.R7$(3),n.vxM((null==g||null==g.config||null==g.config.files?null:g.config.files.length)>0||!i.disabled?29:-1),n.R7$(),n.Y8G("ngClass",n.eq3(28,u,!i.dropdownSections.videos||0===(null==g||null==g.config||null==g.config.files?null:g.config.files.length)&&i.disabled)),n.R7$(3),n.Y8G("ngClass",n.eq3(30,u,i.disabled)),n.R7$(),n.vxM((null==i.fileUploaderManager||null==i.fileUploaderManager.config||null==i.fileUploaderManager.config.files?null:i.fileUploaderManager.config.files.length)>0||!i.disabled?34:-1),n.R7$(),n.Y8G("ngClass",n.eq3(32,u,!i.dropdownSections.images||0===(null==i.fileUploaderManager||null==i.fileUploaderManager.config||null==i.fileUploaderManager.config.files?null:i.fileUploaderManager.config.files.length)&&i.disabled))}},dependencies:[S.YU,S.bT,G.me,G.BC,G.vS,x.iq,x.nc,x.Gw,B.M,k.F,h.S]}),p})()},7221:(Y,V,c)=>{c.d(V,{T:()=>J});var e=c(1280),o=c(3953),M=c(177),n=c(9417),I=c(9465),S=c(1792),G=c(1748),x=c(7141),B=c(8147);const k=(r,p)=>({"crm-section-invisible":r,"crm-section-disabled-inputs":p}),h=r=>({"crm-section-inputs-grid-input-100":r}),R=()=>({thousandSeparator:!0});function s(r,p){1&r&&o.nrm(0,"ion-icon",3)}function D(r,p){1&r&&o.nrm(0,"ion-icon",4)}function P(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",10)(1,"ion-checkbox",11),o.mxI("ngModelChange",function(i){const l=o.eBV(t).$implicit,v=o.XpG().$implicit,g=o.XpG(2);return o.DH7(g.promotionStepTwo["f_"+v+"_"+l],i)||(g.promotionStepTwo["f_"+v+"_"+l]=i),o.Njj(i)}),o.k0s(),o.j41(2,"div",12),o.EFF(3),o.nI1(4,"translate"),o.k0s()()}if(2&r){const t=p.$implicit,d=o.XpG().$implicit,i=o.XpG(2);o.R7$(),o.R50("ngModel",i.promotionStepTwo["f_"+d+"_"+t]),o.R7$(2),o.JRh(o.bMT(4,2,"features."+t))}}function w(r,p){if(1&r&&(o.j41(0,"div",7)(1,"div",8),o.EFF(2),o.nI1(3,"translate"),o.k0s(),o.j41(4,"div",9),o.Z7z(5,P,5,4,"div",10,o.fX1),o.k0s()()),2&r){const t=p.$implicit,d=o.XpG(2);o.Y8G("appInputViewMode",d.isDisabled),o.R7$(2),o.SpI(" ",o.bMT(3,2,"features."+t),""),o.R7$(3),o.Dyx(d.propertiesFeatures[t])}}function u(r,p){if(1&r&&(o.j41(0,"div",6),o.Z7z(1,w,7,4,"div",7,o.fX1),o.k0s()),2&r){const t=o.XpG();o.Y8G("ngClass",o.eq3(1,h,!t.isDisabled)),o.R7$(),o.Dyx(t.featuresOrders.general)}}function O(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",7)(1,"div",9)(2,"div",10)(3,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_parkingComunitario,i)||(l.promotionStepTwo.fcustom_parkingComunitario=i),o.Njj(i)}),o.k0s(),o.j41(4,"div",12),o.EFF(5,"Tiene parking comunitario"),o.k0s()()()(),o.j41(6,"div",14)(7,"div",15)(8,"div",8),o.EFF(9,"Precio del parking"),o.k0s(),o.j41(10,"div",16)(11,"input",17),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_parkingPrice,i)||(l.promotionStepTwo.fcustom_parkingPrice=i),o.Njj(i)}),o.k0s(),o.j41(12,"div",18),o.EFF(13,"\u20ac"),o.k0s()()(),o.j41(14,"div",19)(15,"div",8),o.EFF(16,"Parking inclu\xeddo"),o.k0s(),o.j41(17,"div",20)(18,"div",10)(19,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_parkingIncludedInPrice,i)||(l.promotionStepTwo.fcustom_parkingIncludedInPrice=i),o.Njj(i)}),o.k0s(),o.j41(20,"div",12),o.EFF(21,"S\xed"),o.k0s()()()()()}if(2&r){const t=o.XpG(2);o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.fcustom_parkingComunitario),o.R7$(4),o.Y8G("appHideIfNoData",t.promotionStepTwo.fcustom_parkingPrice)("disabled",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled)("options",o.lJ4(13,R)),o.R7$(),o.Y8G("disabled",t.promotionStepTwo.fcustom_parkingIncludedInPrice),o.R50("ngModel",t.promotionStepTwo.fcustom_parkingPrice),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled)("appHideIfNoData",t.promotionStepTwo.fcustom_parkingIncludedInPrice)("disabled",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(2),o.R50("ngModel",t.promotionStepTwo.fcustom_parkingIncludedInPrice)}}function j(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",13),o.EFF(1," Parking "),o.k0s(),o.j41(2,"div",6)(3,"div",7)(4,"div",9)(5,"div",10)(6,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG();return o.DH7(l.promotionStepTwo.fcustom_parking,i)||(l.promotionStepTwo.fcustom_parking=i),o.Njj(i)}),o.k0s(),o.j41(7,"div",12),o.EFF(8,"Tiene parking"),o.k0s()()()(),o.DNE(9,O,22,14),o.k0s()}if(2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(4,h,!t.isDisabled)),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.fcustom_parking),o.R7$(3),o.vxM(t.promotionStepTwo.fcustom_parking||t.promotionStepTwo.fcustom_parkingComunitario?9:-1)}}function T(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",7)(1,"div",9)(2,"div",10)(3,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.f_pool_comunitaria,i)||(l.promotionStepTwo.f_pool_comunitaria=i),o.Njj(i)}),o.k0s(),o.j41(4,"div",12),o.EFF(5,"Tiene piscina comunitaria"),o.k0s()()()(),o.j41(6,"div",21)(7,"div",19)(8,"div",8),o.EFF(9,"Piscina calefactable"),o.k0s(),o.j41(10,"div",9)(11,"div",10)(12,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.f_pool_privadaCalefactable,i)||(l.promotionStepTwo.f_pool_privadaCalefactable=i),o.Njj(i)}),o.k0s(),o.j41(13,"div",12),o.EFF(14,"S\xed"),o.k0s()()()(),o.j41(15,"div",19)(16,"div",8),o.EFF(17),o.k0s(),o.j41(18,"div",9)(19,"div",10)(20,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.f_pool_privadaPreInstalacionCalefaccion,i)||(l.promotionStepTwo.f_pool_privadaPreInstalacionCalefaccion=i),o.Njj(i)}),o.k0s(),o.j41(21,"div",12),o.EFF(22,"S\xed"),o.k0s()()()(),o.j41(23,"div",15)(24,"div",8),o.EFF(25,"Precio de la piscina"),o.k0s(),o.j41(26,"div",16)(27,"input",17),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.f_pool_price,i)||(l.promotionStepTwo.f_pool_price=i),o.Njj(i)}),o.k0s(),o.j41(28,"div",18),o.EFF(29,"\u20ac"),o.k0s()()(),o.j41(30,"div",19)(31,"div",8),o.EFF(32,"Piscina inclu\xedda"),o.k0s(),o.j41(33,"div",20)(34,"div",10)(35,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.f_pool_included,i)||(l.promotionStepTwo.f_pool_included=i),o.Njj(i)}),o.k0s(),o.j41(36,"div",12),o.EFF(37,"S\xed"),o.k0s()()()()()}if(2&r){const t=o.XpG(2);o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.f_pool_comunitaria),o.R7$(4),o.Y8G("appInputViewMode",t.isDisabled)("appHideIfNoData",t.promotionStepTwo.f_pool_privadaCalefactable)("disabled",t.isDisabled),o.R7$(5),o.R50("ngModel",t.promotionStepTwo.f_pool_privadaCalefactable),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled)("appHideIfNoData",t.promotionStepTwo.f_pool_privadaPreInstalacionCalefaccion||null)("disabled",t.isDisabled),o.R7$(2),o.SpI("Piscina Pre-Instalaci\xf3n Calefacci\xf3n ",t.promotionStepTwo.f_pool_privadaPreInstalacionCalefaccion,""),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.f_pool_privadaPreInstalacionCalefaccion),o.R7$(3),o.Y8G("appHideIfNoData",t.promotionStepTwo.f_pool_price)("disabled",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled)("options",o.lJ4(22,R)),o.R7$(),o.Y8G("disabled",t.promotionStepTwo.f_pool_included),o.R50("ngModel",t.promotionStepTwo.f_pool_price),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled)("appHideIfNoData",t.promotionStepTwo.f_pool_included)("disabled",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(2),o.R50("ngModel",t.promotionStepTwo.f_pool_included)}}function N(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",13),o.EFF(1," Piscina "),o.k0s(),o.j41(2,"div",6)(3,"div",7)(4,"div",9)(5,"div",10)(6,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG();return o.DH7(l.promotionStepTwo.f_pool_privada,i)||(l.promotionStepTwo.f_pool_privada=i),o.Njj(i)}),o.k0s(),o.j41(7,"div",12),o.EFF(8,"Tiene piscina"),o.k0s()()()(),o.DNE(9,T,38,23),o.k0s()}if(2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(4,h,!t.isDisabled)),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.f_pool_privada),o.R7$(3),o.vxM(t.promotionStepTwo.f_pool_privada||t.promotionStepTwo.f_pool_comunitaria?9:-1)}}function y(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",24)(1,"div",25)(2,"div",8),o.EFF(3,"Precio del trastero"),o.k0s(),o.j41(4,"div",16)(5,"input",17),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_trasteroPrice,i)||(l.promotionStepTwo.fcustom_trasteroPrice=i),o.Njj(i)}),o.k0s(),o.j41(6,"div",18),o.EFF(7,"\u20ac"),o.k0s()()(),o.j41(8,"div",7)(9,"div",8),o.EFF(10,"Trastero inclu\xeddo"),o.k0s(),o.j41(11,"div",20)(12,"div",10)(13,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_trasteroIncludedInPrice,i)||(l.promotionStepTwo.fcustom_trasteroIncludedInPrice=i),o.Njj(i)}),o.k0s(),o.j41(14,"div",12),o.EFF(15,"S\xed"),o.k0s()()()()()}if(2&r){const t=o.XpG(2);o.R7$(4),o.Y8G("appInputViewMode",t.isDisabled)("options",o.lJ4(7,R)),o.R7$(),o.Y8G("disabled",t.promotionStepTwo.fcustom_trasteroIncludedInPrice),o.R50("ngModel",t.promotionStepTwo.fcustom_trasteroPrice),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(2),o.R50("ngModel",t.promotionStepTwo.fcustom_trasteroIncludedInPrice)}}function _(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",13),o.EFF(1," Trastero "),o.k0s(),o.j41(2,"div",6)(3,"div",7)(4,"div",9)(5,"div",22)(6,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG();return o.DH7(l.promotionStepTwo.fcustom_trastero,i)||(l.promotionStepTwo.fcustom_trastero=i),o.Njj(i)}),o.k0s(),o.j41(7,"div",23),o.bIt("click",function(){o.eBV(t);const i=o.XpG();return o.Njj(i.promotionStepTwo.fcustom_trastero=!i.promotionStepTwo.fcustom_trastero)}),o.EFF(8," Tiene trastero "),o.k0s()()()(),o.DNE(9,y,16,8,"div",24),o.k0s()}if(2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(4,h,!t.isDisabled)),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.fcustom_trastero),o.R7$(3),o.vxM(t.promotionStepTwo.fcustom_trastero?9:-1)}}function E(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",24)(1,"div",25)(2,"div",8),o.EFF(3,"Precio del s\xf3tano"),o.k0s(),o.j41(4,"div",16)(5,"input",26),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_sotanoPrice,i)||(l.promotionStepTwo.fcustom_sotanoPrice=i),o.Njj(i)}),o.k0s(),o.j41(6,"div",18),o.EFF(7,"\u20ac"),o.k0s()()(),o.j41(8,"div",7)(9,"div",8),o.EFF(10,"S\xf3tano inclu\xeddo"),o.k0s(),o.j41(11,"div",20)(12,"div",10)(13,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_sotanoIncludedInPrice,i)||(l.promotionStepTwo.fcustom_sotanoIncludedInPrice=i),o.Njj(i)}),o.k0s(),o.j41(14,"div",12),o.EFF(15,"S\xed"),o.k0s()()()()()}if(2&r){const t=o.XpG(2);o.R7$(4),o.Y8G("appInputViewMode",t.isDisabled)("options",o.lJ4(7,R)),o.R7$(),o.Y8G("disabled",t.promotionStepTwo.fcustom_sotanoIncludedInPrice),o.R50("ngModel",t.promotionStepTwo.fcustom_sotanoPrice),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(2),o.R50("ngModel",t.promotionStepTwo.fcustom_sotanoIncludedInPrice)}}function F(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",13),o.EFF(1," S\xf3tano "),o.k0s(),o.j41(2,"div",6)(3,"div",7)(4,"div",9)(5,"div",10)(6,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG();return o.DH7(l.promotionStepTwo.fcustom_sotano,i)||(l.promotionStepTwo.fcustom_sotano=i),o.Njj(i)}),o.k0s(),o.j41(7,"div",12),o.EFF(8,"Tiene s\xf3tano"),o.k0s()()()(),o.DNE(9,E,16,8,"div",24),o.k0s()}if(2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(4,h,!t.isDisabled)),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.fcustom_sotano),o.R7$(3),o.vxM(t.promotionStepTwo.fcustom_sotano?9:-1)}}function C(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",24)(1,"div",25)(2,"div",8),o.EFF(3,"Precio del solarium"),o.k0s(),o.j41(4,"div",16)(5,"input",27),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_solariumPrice,i)||(l.promotionStepTwo.fcustom_solariumPrice=i),o.Njj(i)}),o.k0s(),o.j41(6,"div",18),o.EFF(7,"\u20ac"),o.k0s()()(),o.j41(8,"div",7)(9,"div",8),o.EFF(10,"Solarium inclu\xeddo"),o.k0s(),o.j41(11,"div",20)(12,"div",10)(13,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG(2);return o.DH7(l.promotionStepTwo.fcustom_solariumIncludedInPrice,i)||(l.promotionStepTwo.fcustom_solariumIncludedInPrice=i),o.Njj(i)}),o.k0s(),o.j41(14,"div",12),o.EFF(15,"S\xed"),o.k0s()()()()()}if(2&r){const t=o.XpG(2);o.R7$(4),o.Y8G("appInputViewMode",t.isDisabled)("options",o.lJ4(7,R)),o.R7$(),o.Y8G("disabled",t.promotionStepTwo.fcustom_solariumIncludedInPrice),o.R50("ngModel",t.promotionStepTwo.fcustom_solariumPrice),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(2),o.R50("ngModel",t.promotionStepTwo.fcustom_solariumIncludedInPrice)}}function a(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",13),o.EFF(1," Solarium "),o.k0s(),o.j41(2,"div",6)(3,"div",7)(4,"div",9)(5,"div",10)(6,"ion-checkbox",11),o.mxI("ngModelChange",function(i){o.eBV(t);const l=o.XpG();return o.DH7(l.promotionStepTwo.fcustom_solarium,i)||(l.promotionStepTwo.fcustom_solarium=i),o.Njj(i)}),o.k0s(),o.j41(7,"div",12),o.EFF(8,"Tiene solarium"),o.k0s()()()(),o.DNE(9,C,16,8,"div",24),o.k0s()}if(2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(4,h,!t.isDisabled)),o.R7$(),o.Y8G("appInputViewMode",t.isDisabled),o.R7$(3),o.R50("ngModel",t.promotionStepTwo.fcustom_solarium),o.R7$(3),o.vxM(t.promotionStepTwo.fcustom_solarium?9:-1)}}function f(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",10)(1,"ion-checkbox",11),o.mxI("ngModelChange",function(i){const l=o.eBV(t).$implicit,v=o.XpG().$implicit,g=o.XpG(2);return o.DH7(g.promotionStepTwo["f_"+v+"_"+l],i)||(g.promotionStepTwo["f_"+v+"_"+l]=i),o.Njj(i)}),o.k0s(),o.j41(2,"div",12),o.EFF(3),o.nI1(4,"translate"),o.k0s()()}if(2&r){const t=p.$implicit,d=o.XpG().$implicit,i=o.XpG(2);o.R7$(),o.R50("ngModel",i.promotionStepTwo["f_"+d+"_"+t]),o.R7$(2),o.JRh(o.bMT(4,2,"features."+t))}}function b(r,p){if(1&r&&(o.j41(0,"div",7)(1,"div",9),o.Z7z(2,f,5,4,"div",10,o.fX1),o.k0s()()),2&r){const t=p.$implicit,d=o.XpG(2);o.Y8G("appInputViewMode",d.isDisabled),o.R7$(2),o.Dyx(d.propertiesFeatures[t])}}function m(r,p){if(1&r&&(o.j41(0,"div",13),o.EFF(1," M\xe1s caracter\xedsticas "),o.k0s(),o.j41(2,"div",6),o.Z7z(3,b,4,1,"div",7,o.fX1),o.k0s()),2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(1,h,!t.isDisabled)),o.R7$(),o.Dyx(t.featuresOrders.caracteristicas)}}function U(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",10)(1,"ion-checkbox",11),o.mxI("ngModelChange",function(i){const l=o.eBV(t).$implicit,v=o.XpG().$implicit,g=o.XpG(2);return o.DH7(g.promotionStepTwo["f_"+v+"_"+l],i)||(g.promotionStepTwo["f_"+v+"_"+l]=i),o.Njj(i)}),o.k0s(),o.j41(2,"div",12),o.EFF(3),o.nI1(4,"translate"),o.k0s()()}if(2&r){const t=p.$implicit,d=o.XpG().$implicit,i=o.XpG(2);o.R7$(),o.R50("ngModel",i.promotionStepTwo["f_"+d+"_"+t]),o.R7$(2),o.JRh(o.bMT(4,2,"features."+t))}}function X(r,p){if(1&r&&(o.j41(0,"div",7)(1,"div",9),o.Z7z(2,U,5,4,"div",10,o.fX1),o.k0s()()),2&r){const t=p.$implicit,d=o.XpG(2);o.Y8G("appInputViewMode",d.isDisabled),o.R7$(2),o.Dyx(d.propertiesFeatures[t])}}function A(r,p){if(1&r&&(o.j41(0,"div",13),o.EFF(1," Cercan\xeda "),o.k0s(),o.j41(2,"div",6),o.Z7z(3,X,4,1,"div",7,o.fX1),o.k0s()),2&r){const t=o.XpG();o.R7$(2),o.Y8G("ngClass",o.eq3(1,h,!t.isDisabled)),o.R7$(),o.Dyx(t.featuresOrders.cercania)}}function L(r,p){1&r&&o.nrm(0,"ion-icon",3)}function H(r,p){1&r&&o.nrm(0,"ion-icon",4)}function K(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",10)(1,"ion-checkbox",11),o.mxI("ngModelChange",function(i){const l=o.eBV(t).$implicit,v=o.XpG().$implicit,g=o.XpG(3);return o.DH7(g.promotionStepTwo["f_"+v+"_"+l],i)||(g.promotionStepTwo["f_"+v+"_"+l]=i),o.Njj(i)}),o.k0s(),o.j41(2,"div",12),o.EFF(3),o.nI1(4,"translate"),o.k0s()()}if(2&r){const t=p.$implicit,d=o.XpG().$implicit,i=o.XpG(3);o.R7$(),o.R50("ngModel",i.promotionStepTwo["f_"+d+"_"+t]),o.R7$(2),o.JRh(o.bMT(4,2,"features."+t))}}function W(r,p){if(1&r&&(o.j41(0,"div",7)(1,"div",9),o.Z7z(2,K,5,4,"div",10,o.fX1),o.k0s()()),2&r){const t=p.$implicit,d=o.XpG(3);o.Y8G("appInputViewMode",d.isDisabled),o.R7$(2),o.Dyx(d.propertiesFeatures[t])}}function z(r,p){if(1&r&&(o.j41(0,"div")(1,"div",6),o.Z7z(2,W,4,1,"div",7,o.fX1),o.k0s()()),2&r){const t=o.XpG(2);o.R7$(),o.Y8G("ngClass",o.eq3(1,h,!t.isDisabled)),o.R7$(),o.Dyx(t.featuresOrders.urbanizacion)}}function Z(r,p){if(1&r){const t=o.RV6();o.j41(0,"div",0),o.bIt("click",function(){o.eBV(t);const i=o.XpG();return o.Njj(i.dropdownSections.urbanization=!i.dropdownSections.urbanization)}),o.j41(1,"div",1),o.EFF(2," A\xf1adir urbanizaci\xf3n "),o.k0s(),o.j41(3,"div",2),o.DNE(4,L,1,0,"ion-icon",3)(5,H,1,0,"ion-icon",4),o.k0s()(),o.DNE(6,z,4,3,"div",28)}if(2&r){const t=o.XpG();o.R7$(4),o.vxM(t.dropdownSections.urbanization?4:5),o.R7$(2),o.Y8G("ngIf",t.dropdownSections.urbanization)}}let J=(()=>{var r;class p{constructor(){this.isDisabled=!1,this.promotionStepTwo={orientation:null,interiorOrExterior:null},this.dropdownSections={general:!0,sizes:!0,features:!0,location:!0,texts_media:!0,images:!0,urbanization:!1},this.propertiesFeatures=e.B,this.featuresOrders=e.X}ngOnInit(){this.isDisabled&&setTimeout(()=>{this.isDisabled=!1,setTimeout(()=>{this.isDisabled=!0})})}onlog(){console.log(this.promotionStepTwo)}toggleSelection(d,i){const l=i.indexOf(d);l>-1?i.splice(l,1):i.push(d)}isChecked(d,i){return i.includes(d)}checkIfShowCheckboxesSection(d){let i=!1;for(let l of d)for(let v of e.B[l])if(this.promotionStepTwo["f_"+l+"_"+v]){i=!0;break}return i}checkIfShowFeatureCheckboxes(d){let i=!1;for(let l of e.B[d])if(this.promotionStepTwo["f_"+d+"_"+l]){i=!0;break}return i}}return(r=p).\u0275fac=function(d){return new(d||r)},r.\u0275cmp=o.VBU({type:r,selectors:[["app-step-two-promotion-form"]],inputs:{isDisabled:"isDisabled"},decls:16,vars:14,consts:[[1,"crm-block-dropdown","small",3,"click"],[1,"crm-block-dropdown-title"],[1,"crm-block-dropdown-icon"],["name","chevron-up-outline"],["name","chevron-down-outline"],[1,"crm-section","size-medium","crm-section-margin-top",3,"ngClass"],[1,"crm-section-inputs","crm-section-inputs-grid",3,"ngClass"],[1,"crm-input",3,"appInputViewMode"],[1,"crm-input-label"],[1,"crm-input-checkboxes"],["appToggleCheckbox","",1,"crm-input-checkbox"],[3,"ngModelChange","ngModel"],[1,"crm-input-checkbox-label"],[1,"crm-section-smaller-title","crm-section-margin-top"],[1,"crm-section-inputs-grid-2-cols",2,"width","100%"],[1,"crm-input",3,"appHideIfNoData","disabled"],[1,"crm-input-input","input-disabled",3,"appInputViewMode","options"],["type","number","placeholder","Introduce el precio del parking",3,"ngModelChange","disabled","ngModel"],[1,"crm-input-input-symbol"],[1,"crm-input",3,"appInputViewMode","appHideIfNoData","disabled"],[1,"crm-input-checkboxes",3,"appInputViewMode"],[1,"crm-section-inputs-grid-2-cols"],[1,"crm-input-checkbox"],[1,"crm-input-checkbox-label",3,"click"],[1,"crm-section-inputs-double-input",2,"width","100%"],[1,"crm-input"],["type","number","placeholder","Introduce el precio del s\xf3tano",3,"ngModelChange","disabled","ngModel"],["type","number","placeholder","Introduce el precio del solarium",3,"ngModelChange","disabled","ngModel"],[4,"ngIf"]],template:function(d,i){1&d&&(o.j41(0,"div",0),o.bIt("click",function(){return i.dropdownSections.features=!i.dropdownSections.features}),o.j41(1,"div",1),o.EFF(2," Caracter\xedsticas generales "),o.k0s(),o.j41(3,"div",2),o.DNE(4,s,1,0,"ion-icon",3)(5,D,1,0,"ion-icon",4),o.k0s()(),o.j41(6,"div",5),o.DNE(7,u,3,3,"div",6)(8,j,10,6)(9,N,10,6)(10,_,10,6)(11,F,10,6)(12,a,10,6)(13,m,5,3)(14,A,5,3),o.k0s(),o.DNE(15,Z,7,2)),2&d&&(o.R7$(4),o.vxM(i.dropdownSections.features?4:5),o.R7$(2),o.Y8G("ngClass",o.l_i(11,k,!i.dropdownSections.features,i.isDisabled)),o.R7$(),o.vxM(i.isDisabled&&i.checkIfShowCheckboxesSection(null==i.featuresOrders?null:i.featuresOrders.general)||!i.isDisabled?7:-1),o.R7$(),o.vxM(i.isDisabled&&(i.promotionStepTwo.fcustom_parking||i.promotionStepTwo.fcustom_parkingComunitario)||!i.isDisabled?8:-1),o.R7$(),o.vxM(i.isDisabled&&(i.promotionStepTwo.f_pool_privada||i.promotionStepTwo.f_pool_comunitaria)||!i.isDisabled?9:-1),o.R7$(),o.vxM(i.isDisabled&&i.promotionStepTwo.fcustom_trastero||!i.isDisabled?10:-1),o.R7$(),o.vxM(i.isDisabled&&i.promotionStepTwo.fcustom_sotano||!i.isDisabled?11:-1),o.R7$(),o.vxM(i.isDisabled&&i.promotionStepTwo.fcustom_solarium||!i.isDisabled?12:-1),o.R7$(),o.vxM(i.isDisabled&&i.checkIfShowCheckboxesSection(null==i.featuresOrders?null:i.featuresOrders.caracteristicas)||!i.isDisabled?13:-1),o.R7$(),o.vxM(i.isDisabled&&i.checkIfShowCheckboxesSection(null==i.featuresOrders?null:i.featuresOrders.cercania)||!i.isDisabled?14:-1),o.R7$(),o.vxM(i.isDisabled&&i.checkIfShowCheckboxesSection(null==i.featuresOrders?null:i.featuresOrders.urbanizacion)||!i.isDisabled?15:-1))},dependencies:[M.YU,M.bT,n.me,n.Q0,n.BC,n.vS,I.eY,I.iq,I.hB,S.M,G.z,x.S,B.D9],styles:[".crm-section-inputs-grid[_ngcontent-%COMP%]{flex-direction:inherit}.crm-section-inputs-grid[_ngcontent-%COMP%]   .crm-input-disabled[_ngcontent-%COMP%], .crm-section-inputs-grid[_ngcontent-%COMP%]   .crm-input-disabled[_ngcontent-%COMP%]   .crm-input-view-checkbox[_ngcontent-%COMP%]{width:100%}"]}),p})()},8031:(Y,V,c)=>{c.d(V,{J:()=>B});var e=c(467),o=c(7376),n=c(3953),I=c(5970),S=c(8397),G=c(6039),x=c(6552);let B=(()=>{var k;class h{constructor(s,D,P,w){this.popoversService=s,this.toastService=D,this.api=P,this.utils=w}transformPromotionFormStepOne(s){return{projectName:null==s?void 0:s.projectName,constructionType:null==s?void 0:s.constructionType,constructionSubType:null==s?void 0:s.constructionSubType,constructionStatus:null==s?void 0:s.constructionStatus,constructionYear:null==s?void 0:s.constructionYear,constructionStart:null==s?void 0:s.constructionStart,commercializationStart:null==s?void 0:s.commercializationStart,keyDeliveryDate:null==s?void 0:s.keyDeliveryDate,country:null==s?void 0:s.country,province:null==s?void 0:s.province,city:null==s?void 0:s.city,neighborhood:null==s?void 0:s.neighborhood,address:null==s?void 0:s.address,postalCode:null==s?void 0:s.postalCode,number:null==s?void 0:s.number,showAddressPublicly:null==s?void 0:s.showAddressPublicly,showGeoreferencePublicly:null==s?void 0:s.showGeoreferencePublicly,energyEfficiencyCertificate:null==s?void 0:s.energyEfficiencyCertificate,co2EmissionsCertificate:null==s?void 0:s.co2EmissionsCertificate,energyEfficiencyValue:null==s?void 0:s.energyEfficiencyValue,co2EmissionsValue:null==s?void 0:s.co2EmissionsValue}}transformPromotionFormStepThree(s){return{title_es:null==s?void 0:s.title_es,title_en:null==s?void 0:s.title_en,title_de:null==s?void 0:s.title_de,title_fr:null==s?void 0:s.title_fr,title_ru:null==s?void 0:s.title_ru,description_es:null==s?void 0:s.description_es,description_en:null==s?void 0:s.description_en,description_de:null==s?void 0:s.description_de,description_fr:null==s?void 0:s.description_fr,description_ru:null==s?void 0:s.description_ru,promotionFiles:null==s?void 0:s.promotionFiles}}deleteAllPromotionPropertiesExceptFeatures(s){const D=o.cloneDeep(s);for(const P in D)P.startsWith("f_")||P.startsWith("fcustom_")||delete D[P];return D}onDuplicateProperty(s,D){var P=this;return(0,e.A)(function*(){let w=null;const u=yield P.popoversService.onShowDuplicatePropertyPopover(s);var O,j,T,N,y;if(console.log("POPOVER RESULT",u),u&&(null!=u&&null!==(O=u.data)&&void 0!==O&&O.count&&(null==u||null===(j=u.data)||void 0===j?void 0:j.count)>0&&(null==u||null===(T=u.data)||void 0===T?void 0:T.count)<=25?w=null==u||null===(y=u.data)||void 0===y?void 0:y.count:(null==u||null===(N=u.data)||void 0===N?void 0:N.count)>25&&(yield P.toastService.showErrorToast("La cantidad de propiedades a duplicar debe ser mayor a 0 y menor o igual a 25"))),!w)return!1;for(let _=0;_<w;_++)console.log("DUPLICATING PROPERTY",_),yield P.duplicateProperty(D,_);return yield P.toastService.showSuccessToast("Propiedad duplicada exitosamente"),!0})()}duplicateProperty(s,D){var P=this;return(0,e.A)(function*(){var w,u,O,j;let T=o.cloneDeep(s);T=P.utils.parseProperties(T),T.promotionBlockId=s.promotionBlockId,T.promotionId=s.promotionId,T.reference=null!==(w=T)&&void 0!==w&&w.reference?`${null===(u=T)||void 0===u?void 0:u.reference} - Copia ${D+1}`:null,T.availabilityStatus=null;const N=o.cloneDeep((null===(O=T)||void 0===O?void 0:O.propertyFiles)||[]);delete T.id,delete T.propertyFiles,delete T.measurements_floors,delete T.byvaroId,delete T.updatedAt,delete T.createdAt;const y=yield P.api.createProperty(T);null==y||null===(j=y.success)||void 0===j||(j=j.data),console.log("LA PROPERTYYYYYYY",T),console.log("PROPERTY FILES",N)})()}}return(k=h).\u0275fac=function(s){return new(s||k)(n.KVO(I.m),n.KVO(S.f),n.KVO(G.i),n.KVO(x.T))},k.\u0275prov=n.jDH({token:k,factory:k.\u0275fac,providedIn:"root"}),h})()}}]);