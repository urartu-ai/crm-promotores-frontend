"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7116],{904:(P,u,r)=>{r.d(u,{X:()=>G});var o=r(3953),_=r(5188),p=r(6552),m=r(1213),d=r(177),c=r(9417),g=r(9465),s=r(4821),C=r(8147),x=r(4558);const v=(n,l,t)=>({"crm-card-user-active":n,"opacity-0-4 border-secondary":l,"border-error":t}),f=n=>({"crm-card-user-active":n}),k=n=>({"crm-card-promotion-left-img-small":n});function M(n,l){1&n&&(o.j41(0,"div",24),o.nrm(1,"img",26),o.j41(2,"div",27),o.EFF(3,"Incomplete"),o.k0s()()),2&n&&(o.R7$(),o.Y8G("src","assets/icon/incomplete-icon.svg",o.B4B))}function O(n,l){1&n&&(o.j41(0,"div",24),o.nrm(1,"img",26),o.j41(2,"div",28),o.EFF(3,"Inactive"),o.k0s()()),2&n&&(o.R7$(),o.Y8G("src","assets/icon/inactive-icon.svg",o.B4B))}function E(n,l){if(1&n&&(o.j41(0,"span",31),o.EFF(1),o.k0s()),2&n){const t=o.XpG(5);o.R7$(),o.SpI("Seleccionados: ",null==t.promotion?null:t.promotion.selectedPropertyCount,"")}}function R(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",25)(1,"div",29)(2,"ion-checkbox",30),o.mxI("ngModelChange",function(e){o.eBV(t);const a=o.XpG(4);return o.DH7(a.promotion.checked,e)||(a.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(t);const a=o.XpG(4);return o.Njj(a.onTogglePromotionCheckbox(e))}),o.k0s()(),o.DNE(3,E,2,1,"span",31),o.k0s()}if(2&n){const t=o.XpG(4);o.R7$(2),o.R50("ngModel",t.promotion.checked),o.Y8G("disabled",t.promotion.invitedApproved||t.promotion.invitedPending),o.R7$(),o.vxM("modal"===t.context?3:-1)}}function b(n,l){if(1&n&&(o.j41(0,"div",4),o.DNE(1,M,4,1,"div",24)(2,O,4,1,"div",24)(3,R,4,3,"div",25),o.k0s()),2&n){const t=o.XpG(3);o.R7$(),o.vxM(null!=t.promotion&&t.promotion.promotionPaymentInfoIsCompleted?null!=t.promotion&&t.promotion.promotionPaymentInfoIsCompleted&&!t.getCheckHasAvailableProperty()?2:3:1)}}function T(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",3),o.bIt("click",function(e){o.eBV(t);const a=o.XpG(2);return o.Njj(a.onItemClick(e))}),o.DNE(1,b,4,1,"div",4),o.j41(2,"div",5)(3,"div",6)(4,"div",7),o.EFF(5),o.k0s(),o.nrm(6,"img",8),o.k0s(),o.j41(7,"h3",9),o.nrm(8,"app-tooltip-text",10),o.k0s(),o.j41(9,"p",11),o.EFF(10),o.nI1(11,"thousandSeparator"),o.nI1(12,"thousandSeparator"),o.k0s(),o.j41(13,"div",12)(14,"p",13),o.EFF(15),o.k0s(),o.j41(16,"p",14),o.EFF(17),o.nI1(18,"translate"),o.k0s(),o.j41(19,"p",15),o.EFF(20),o.k0s()(),o.j41(21,"div",16)(22,"div",17)(23,"span")(24,"span",18),o.EFF(25),o.k0s(),o.EFF(26),o.k0s()(),o.j41(27,"div",19)(28,"div",20),o.nrm(29,"img",21),o.j41(30,"span",22),o.EFF(31),o.k0s()(),o.j41(32,"div",23),o.nrm(33,"img",21),o.j41(34,"span",22),o.EFF(35),o.nI1(36,"date"),o.k0s()()()()()()}if(2&n){const t=o.XpG(2);o.Y8G("ngClass",o.sMw(27,v,null==t.promotion?null:t.promotion.checked,t.promotion.promotionPaymentInfoIsCompleted&&!t.getCheckHasAvailableProperty(),!t.promotion.promotionPaymentInfoIsCompleted)),o.R7$(),o.vxM(t.hideCheckbox?-1:1),o.R7$(4),o.SpI("",(null==t.promotion?null:t.promotion.sellCommissionPercentage)||0,"%"),o.R7$(),o.Y8G("src",(null==t.promotion||null==t.promotion.promotionFiles?null:t.promotion.promotionFiles.length)>0?null==t.promotion?null:t.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B),o.R7$(2),o.Y8G("text",null==t.promotion?null:t.promotion.projectName)("maxLength",35),o.R7$(2),o.Lme("",o.bMT(11,18,null==t.rangeOfPropertiesPrices?null:t.rangeOfPropertiesPrices.min)," \u20ac - ",o.bMT(12,20,null==t.rangeOfPropertiesPrices?null:t.rangeOfPropertiesPrices.max)," \u20ac"),o.R7$(5),o.Lme("",null==t.promotion?null:t.promotion.city," / ",null==t.promotion?null:t.promotion.province,""),o.R7$(2),o.JRh(null!=t.promotion&&t.promotion.constructionType?o.bMT(18,22,"promotion_constructionType_texts."+(null==t.promotion?null:t.promotion.constructionType)):""),o.R7$(3),o.JRh(null==t.promotion||null==t.promotion.promoter?null:t.promotion.promoter.name),o.R7$(5),o.JRh(null==t.availableProperties?null:t.availableProperties.length),o.R7$(),o.SpI(" / ",null==t.promotion||null==t.promotion.properties?null:t.promotion.properties.length,""),o.R7$(3),o.Y8G("src","assets/icon/inactive-icon.svg",o.B4B),o.R7$(2),o.SpI(" ",null==t.promotion?null:t.promotion.constructionStatus,""),o.R7$(2),o.Y8G("src","assets/icon/target-icon.svg",o.B4B),o.R7$(2),o.SpI(" ",o.i5U(36,24,null==t.promotion?null:t.promotion.keyDeliveryDate,"dd/MM/yy"),"")}}function j(n,l){1&n&&(o.j41(0,"div",32)(1,"div",5)(2,"div",6),o.nrm(3,"ion-skeleton-text",33),o.k0s(),o.j41(4,"h3",9),o.nrm(5,"ion-skeleton-text",34),o.k0s(),o.j41(6,"p",11),o.nrm(7,"ion-skeleton-text",35),o.k0s(),o.j41(8,"div",12)(9,"p",13),o.nrm(10,"ion-skeleton-text",36),o.k0s(),o.j41(11,"p",14),o.nrm(12,"ion-skeleton-text",37),o.k0s(),o.j41(13,"p",15),o.nrm(14,"ion-skeleton-text",38),o.k0s()(),o.j41(15,"div",16)(16,"div",17),o.nrm(17,"ion-skeleton-text",39),o.k0s(),o.j41(18,"div",19)(19,"div",20),o.nrm(20,"ion-skeleton-text",40),o.k0s(),o.j41(21,"div",23),o.nrm(22,"ion-skeleton-text",41),o.k0s()()()()()),2&n&&(o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0))}function I(n,l){if(1&n&&o.DNE(0,T,37,31,"div",1)(1,j,23,9,"div",2),2&n){const t=o.XpG();o.Y8G("ngIf",!t.isSkeleton),o.R7$(),o.Y8G("ngIf",t.isSkeleton)}}function D(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",25)(1,"div",29)(2,"ion-checkbox",30),o.mxI("ngModelChange",function(e){o.eBV(t);const a=o.XpG(2);return o.DH7(a.promotion.checked,e)||(a.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(t);const a=o.XpG(2);return o.Njj(a.onTogglePromotionCheckbox(e))}),o.k0s()()()}if(2&n){const t=o.XpG(2);o.R7$(2),o.R50("ngModel",t.promotion.checked),o.Y8G("disabled",t.promotion.invitedApproved||t.promotion.invitedPending)}}function y(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",50),o.EFF(1," La agencia tiene acceso a esta promoci\xf3n "),o.k0s(),o.j41(2,"button",51),o.bIt("click",function(){o.eBV(t);const e=o.XpG(2);return o.Njj(e.onRemoveAgencyAccessToPromotion(e.promotion))}),o.nrm(3,"i",52),o.EFF(4," Dejar de compartir "),o.k0s()}}function F(n,l){1&n&&(o.j41(0,"div",49),o.EFF(1," Invitaci\xf3n enviada, pendiente de aprobaci\xf3n "),o.k0s())}function B(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",42),o.bIt("click",function(e){o.eBV(t);const a=o.XpG();return o.Njj(a.onItemClick(e))}),o.DNE(1,D,3,2,"div",25),o.j41(2,"div",43)(3,"div",44),o.nrm(4,"img",8),o.k0s(),o.j41(5,"div",45)(6,"div",46),o.EFF(7),o.k0s(),o.j41(8,"div",47),o.EFF(9),o.k0s()()(),o.j41(10,"div",48),o.DNE(11,y,5,0)(12,F,2,0,"div",49),o.k0s()()}if(2&n){const t=o.XpG();o.Y8G("ngClass",o.eq3(8,f,null==t.promotion?null:t.promotion.checked)),o.R7$(),o.vxM(t.hideCheckbox?-1:1),o.R7$(2),o.Y8G("ngClass",o.eq3(10,k,t.isSmall)),o.R7$(),o.Y8G("src",(null==t.promotion||null==t.promotion.promotionFiles?null:t.promotion.promotionFiles.length)>0?null==t.promotion?null:t.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B),o.R7$(3),o.SpI(" ",null==t.promotion?null:t.promotion.projectName," "),o.R7$(2),o.Lme(" ",null==t.promotion?null:t.promotion.city,", ",null==t.promotion?null:t.promotion.province," "),o.R7$(2),o.vxM(null!=t.promotion&&t.promotion.invitedApproved?11:null!=t.promotion&&t.promotion.invitedPending?12:-1)}}let G=(()=>{var n;class l{constructor(i,e,a){this.router=i,this.utils=e,this.state=a,this.isSmall=!1,this.hideCheckbox=!1,this.context="page",this.togglePromotionCheckbox=new o.bkB,this.itemClicked=new o.bkB,this.availableProperties=[],this.rangeOfPropertiesPrices={min:0,max:0},this.rangeOfPropertiesRooms={min:0,max:0}}ngOnInit(){var i,e,a;this.getState(),console.log(this.promotion,"this.promotion"),this.promotion&&(this.availableProperties=null===(i=this.promotion)||void 0===i||null===(i=i.properties)||void 0===i?void 0:i.filter(h=>"available"===(null==h?void 0:h.availabilityStatus)),this.rangeOfPropertiesPrices=this.utils.calculateRangeOfPropertiesPrices(null===(e=this.promotion)||void 0===e?void 0:e.properties),this.rangeOfPropertiesRooms=this.utils.calculateRangeOfPropertiesRooms(null===(a=this.promotion)||void 0===a?void 0:a.properties)),this.getCheckHasAvailableProperty()}getCheckHasAvailableProperty(){var i;let e=!1;return null===(i=this.promotion)||void 0===i||null===(i=i.properties)||void 0===i||i.forEach(a=>{"available"===a.availabilityStatus&&(e=!0)}),e}getState(){this.state.getState().subscribe(i=>{this.currentUser=i.user})}onTogglePromotionCheckbox(i){i.stopPropagation(),this.togglePromotionCheckbox.emit()}onNavigateToPromotion(i){this.isSmall||this.router.navigate([`/promotions/${this.promotion.id}`])}onItemClick(i){"modal"===this.context?this.itemClicked.emit({from:"modal",promotion:this.promotion}):this.isSmall||this.router.navigate([`/promotions/${this.promotion.id}`])}onRemoveAgencyAccessToPromotion(i){console.log("onRemoveAgencyAccessToPromotion",i)}onRedirectPromoter(i,e){var a;i.stopPropagation(),"agency"===(null===(a=this.currentUser)||void 0===a?void 0:a.accountType)?this.utils.redirectToPromoter(e):this.router.navigate(["/promoters/mine"])}}return(n=l).\u0275fac=function(i){return new(i||n)(o.rXU(_.Ix),o.rXU(p.T),o.rXU(m.c))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-card-promotion"]],inputs:{promotion:"promotion",isSkeleton:"isSkeleton",isSmall:"isSmall",hideCheckbox:"hideCheckbox",context:"context"},outputs:{togglePromotionCheckbox:"togglePromotionCheckbox",itemClicked:"itemClicked"},decls:2,vars:2,consts:[[1,"crm-card-promotion",3,"ngClass"],["class","promotion-card",3,"ngClass","click",4,"ngIf"],["class","promotion-card promotion-card--skeleton",4,"ngIf"],[1,"promotion-card",3,"click","ngClass"],[1,"promotion-card__content",2,"padding-bottom","0"],[1,"promotion-card__content"],[1,"promotion-card__image"],[1,"absolute","promotion-card__image_percent"],["alt","",3,"src"],[1,"promotion-card__title"],[3,"text","maxLength"],[1,"promotion-card__price"],[1,"promotion-card__details"],[1,"promotion-card__location"],[1,"promotion-card__type"],[1,"promotion-card__agent"],[1,"promotion-card__footer"],[1,"promotion-card__stats"],[2,"color","black"],[1,"promotion-card__status"],[1,"promotion-card__status-item"],["width","14","height","14","alt","",3,"src"],[1,"text-12","ml-5"],[1,"promotion-card__date"],[1,"d-flex","align-center"],[1,"crm-card-promotion-checkbox"],["width","22","height","22","alt","",3,"src"],[1,"ml-10","text-error","text-16"],[1,"ml-10","text-secondary","text-16"],[1,"crm-input-checkbox"],[3,"ngModelChange","click","ngModel","disabled"],[1,"ml-10","text-16","text-available"],[1,"promotion-card","promotion-card--skeleton"],[3,"animated"],[2,"width","70%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","50%",3,"animated"],[2,"width","65%",3,"animated"],[2,"width","55%",3,"animated"],[2,"width","40px",3,"animated"],[2,"width","100px",3,"animated"],[2,"width","60px",3,"animated"],[1,"crm-card-promotion",3,"click","ngClass"],[1,"crm-card-promotion-left"],[1,"crm-card-promotion-left-img",3,"ngClass"],[1,"crm-card-promotion-left-texts"],[1,"crm-card-promotion-left-title"],[1,"crm-card-promotion-left-subtitle"],[1,"crm-block-info-horizontal"],[1,"crm-text","small","crm-text-red"],[1,"crm-text","small","crm-text-success"],[1,"crm-button-secondary","crm-button-secondary-red",3,"click"],[1,"fas","fa-times"]],template:function(i,e){1&i&&o.DNE(0,I,2,2)(1,B,13,12,"div",0),2&i&&(o.vxM(e.isSmall?-1:0),o.R7$(),o.vxM(e.isSmall?1:-1))},dependencies:[d.YU,d.bT,c.BC,c.vS,g.eY,g.ds,g.hB,s.e,d.vh,C.D9,x.w],styles:[".promotion-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;border-radius:8px;overflow:hidden;height:100%;width:370px;max-width:370px;cursor:pointer}.promotion-card__image[_ngcontent-%COMP%]{position:relative;width:100%;height:190px;border-radius:12px;margin-bottom:16px;overflow:hidden}.promotion-card__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-height:190px;object-fit:cover;transition:transform .2s}.promotion-card__image_percent[_ngcontent-%COMP%]{bottom:10px;left:10px;color:var(--crm-white-color);width:40px;height:40px;background:#0006;border:1px solid var(--crm-white-color);text-align:center;vertical-align:baseline;padding-top:10px;font-size:14px;border-radius:100%}.promotion-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:16px 24px;flex-grow:1}.promotion-card__title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--crm-black-color);margin:0 0 4px;line-height:1.3}.promotion-card__price[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--crm-black-color);margin:0 0 16px;padding:0}.promotion-card__details[_ngcontent-%COMP%]{margin-bottom:16px}.promotion-card__details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:4px 0;font-size:12px;color:#686868}.promotion-card__location[_ngcontent-%COMP%]{font-weight:500}.promotion-card__footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:12px;border-top:1px solid #eaeaea}.promotion-card__stats[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#686868;margin-bottom:8px}.promotion-card__status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.promotion-card__status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;color:#000}.promotion-card__status-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.promotion-card__date[_ngcontent-%COMP%]{font-size:13px;display:flex;align-items:center;gap:4px;color:#000}.promotion-card--skeleton[_ngcontent-%COMP%]{pointer-events:none}.promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__image[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:100%;width:100%}.promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__price[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__details[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:16px;margin-bottom:8px}.promotion-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px}.promotion-grid__title[_ngcontent-%COMP%]{grid-column:1/-1;font-size:24px;font-weight:600;margin-bottom:24px;color:#333}@media (max-width: 1200px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 992px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 576px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.promotion-card__footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.promotion-card__status[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]}),l})()},7991:(P,u,r)=>{r.d(u,{S:()=>g});var o=r(177),_=r(9417),p=r(9465),m=r(8147),d=r(9662),c=r(3953);let g=(()=>{var s;class C{}return(s=C).\u0275fac=function(v){return new(v||s)},s.\u0275mod=c.$C({type:s}),s.\u0275inj=c.G2t({imports:[o.MD,_.YN,_.X1,p.bv,m.h,d.Y]}),C})()},9662:(P,u,r)=>{r.d(u,{Y:()=>p});var o=r(177),_=r(3953);let p=(()=>{var m;class d{}return(m=d).\u0275fac=function(g){return new(g||m)},m.\u0275mod=_.$C({type:m}),m.\u0275inj=_.G2t({imports:[o.MD]}),d})()},4558:(P,u,r)=>{r.d(u,{w:()=>_});var o=r(3953);let _=(()=>{var p;class m{transform(c,...g){if(null==c||""===c)return"";let s;return s="string"==typeof c?parseFloat(c):c,isNaN(s)?"":s.toString().replace(/\.(?=\d+$)/,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return(p=m).\u0275fac=function(c){return new(c||p)},p.\u0275pipe=o.EJ8({name:"thousandSeparator",type:p,pure:!0}),m})()}}]);