"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8205],{7141:(Z,j,s)=>{s.d(j,{S:()=>m});var v=s(3953);let m=(()=>{var h;class C{constructor(p,e){this.el=p,this.renderer=e,this.disabled=!1}ngAfterViewInit(){this.updateVisibility()}ngOnChanges(p){this.updateVisibility()}updateVisibility(){if(!this.disabled)return this.renderer.setStyle(this.el.nativeElement,"display","block"),void this.renderer.removeStyle(this.el.nativeElement,"height");this.disabled&&this.isEmpty(this.value)?(this.renderer.setStyle(this.el.nativeElement,"display","none"),this.renderer.setStyle(this.el.nativeElement,"height","0")):(this.renderer.setStyle(this.el.nativeElement,"display","block"),this.renderer.removeStyle(this.el.nativeElement,"height"))}isEmpty(p){return null==p||""===p||Array.isArray(p)&&0===p.length||"object"==typeof p&&0===Object.keys(p).length}}return(h=C).\u0275fac=function(p){return new(p||h)(v.rXU(v.aKT),v.rXU(v.sFG))},h.\u0275dir=v.FsC({type:h,selectors:[["","appHideIfNoData",""]],inputs:{value:[0,"appHideIfNoData","value"],disabled:"disabled"},standalone:!0,features:[v.OA$]}),C})()},8205:(Z,j,s)=>{s.r(j),s.d(j,{AgencyDetailsPageModule:()=>xn});var v=s(177),m=s(9417),h=s(9465),C=s(5188),b=s(467),p=s(7376),e=s(3953),B=s(8397),K=s(4501),x=s(6039),E=s(1213),L=s(2606),W=s(4874),H=s(6552),q=s(9520),ee=s(904),ne=s(4558);const te=["scrollContainer"];function oe(o,l){if(1&o&&(e.j41(0,"div",12)(1,"div",51)(2,"div",52),e.nrm(3,"span"),e.k0s()()()),2&o){let i;const t=l.$implicit,n=e.XpG();e.R7$(3),e.HbH(null==(i=n.utils.getLanguageInfo(t))?null:i.flagClass)}}function ie(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",53),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.instagramUrl))}),e.nrm(1,"i",54),e.k0s()}}function ae(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",53),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.facebookUrl))}),e.nrm(1,"i",55),e.k0s()}}function le(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",53),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.linkedinUrl))}),e.nrm(1,"i",56),e.k0s()}}function re(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",53),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.goToUrl(n.agency.twitterUrl))}),e.nrm(1,"i",57),e.k0s()}}function se(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",58)(1,"div",14),e.EFF(2," Descarga y desc\xfabre nuestra agencia "),e.k0s(),e.j41(3,"div",59),e.nrm(4,"img",60),e.k0s(),e.j41(5,"div",61),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onDownloadCatalogue())}),e.EFF(6," Descargar "),e.k0s()()}}function ce(o,l){if(1&o&&e.nrm(0,"app-card-promotion",37),2&o){const i=l.$implicit;e.Y8G("hideCheckbox",!0)("promotion",i)}}function de(o,l){if(1&o&&e.nrm(0,"app-card-system-user",38),2&o){const i=l.$implicit;e.Y8G("showCheckbox",!1)("user",i)}}function pe(o,l){if(1&o&&(e.j41(0,"div",62)(1,"div",63)(2,"div",64),e.EFF(3),e.k0s(),e.j41(4,"div",65),e.EFF(5),e.k0s()(),e.nrm(6,"div",66),e.j41(7,"div",67)(8,"div",68),e.nrm(9,"i",69),e.j41(10,"span"),e.EFF(11),e.k0s()(),e.j41(12,"div",68),e.nrm(13,"i",70),e.j41(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"div",68),e.nrm(17,"i",71),e.j41(18,"span"),e.EFF(19),e.k0s()()()()),2&o){const i=l.$implicit;e.R7$(3),e.SpI(" ",(null==i?null:i.city)||"Valencia"," "),e.R7$(2),e.Lme(" ",null==i?null:i.address,", ",null==i?null:i.postalCode," "),e.R7$(6),e.JRh((null==i?null:i.phoneNumber)||"+48 608 188 424"),e.R7$(4),e.JRh((null==i?null:i.email)||"office.poland@luxinmo.pl"),e.R7$(4),e.JRh((null==i?null:i.web)||"www.luxinmo.com")}}let ge=(()=>{var o;class l{constructor(t,n,a){this.byvaroState=t,this.utils=n,this.api=a,this.agency=null,this.user=null,this.users=[],this.canEdit=!1,this.agencyCountry=null}ngOnInit(){var t=this;this.byvaroState.getState().subscribe(function(){var n=(0,b.A)(function*(a){var r,d;t.user=a.user,(null==a||null===(r=a.user)||void 0===r?void 0:r.agencyId)===(null===(d=t.agency)||void 0===d?void 0:d.id)&&(t.canEdit=!0)});return function(a){return n.apply(this,arguments)}}()),this.getData()}getData(){var t=this;return(0,b.A)(function*(){try{var n;t.agencyCountry=t.utils.getCountryInfo(null===(n=t.agency)||void 0===n?void 0:n.country)}catch(a){console.error(a)}})()}goToUrl(t){window.open(t,"_blank")}scrollLeft(){this.scrollContainer.nativeElement.scrollBy({left:-550,behavior:"smooth"})}scrollRight(){this.scrollContainer.nativeElement.scrollBy({left:550,behavior:"smooth"})}onDownloadCatalogue(){var t;console.log("DOWNLOAD CATALOGUE");const n=null===(t=this.agency)||void 0===t||null===(t=t.agencyFiles)||void 0===t?void 0:t.find(a=>"catalog"===a.category);n&&window.open(n.url,"_blank")}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(E.c),e.rXU(H.T),e.rXU(x.i))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-details-presentation"]],viewQuery:function(t,n){if(1&t&&e.GBs(te,5),2&t){let a;e.mGM(a=e.lsd())&&(n.scrollContainer=a.first)}},inputs:{agency:"agency"},decls:124,vars:32,consts:[[1,"crm-section",2,"gap","16px","padding","20px"],[1,"agency-banner"],[1,"agency-banner-img"],["alt","",3,"src"],[1,"agency-banner-bottom"],[1,"agency-banner-bottom-image"],[1,"agency-banner-bottom-info"],[2,"display","flex","flex-direction","column","gap","4px"],[1,"crm-block-photo-and-info-info-title"],[1,"crm-block-photo-and-info-info-footer"],[1,"fa-solid","fa-calendar"],[1,"crm-info-content-langs-langs",2,"overflow","hidden"],[1,"crm-item-option","crm-item-option-lang"],[1,"agency-block"],[1,"agency-block-title"],[1,"agency-block-rowdata"],[1,"agency-block-rowdata-text"],[2,"display","flex","align-items","center","gap","8px"],[1,"fa-solid","fa-location-dot"],[1,"fa-solid","fa-phone"],[1,"fa-solid","fa-envelope"],[1,"agency-block-rowdata-text",2,"width","fit-content"],["style","cursor: pointer;",3,"click",4,"ngIf"],[1,"agency-block","agency-block-empty"],[1,"agency-number-quantities"],[1,"agency-number-quantities-block"],[1,"agency-number-quantities-block-title"],[1,"agency-number-quantities-block-number"],[1,"agency-block-helper-text"],[1,"agency-block","agency-about-us"],[2,"display","flex","flex-direction","column","gap","16px","flex","1"],[1,"agency-about-us-block"],[1,"agency-block-text"],["class","agency-about-us-catalogue",4,"ngIf"],[1,"agency-block","agency-block-empty",2,"gap","16px"],[1,"crm-section-inline-cards-wrapper"],[1,"crm-section-inline-cards"],[2,"border","none !important",3,"hideCheckbox","promotion"],[3,"showCheckbox","user"],[1,"agency-block-double"],[1,"agency-offices-list"],["class","agency-office-card",4,"ngFor","ngForOf"],[1,"agency-portals-grid"],["src","https://logo.clearbit.com/habitaclia.com","alt","habitaclia"],["src","https://logo.clearbit.com/tucasa.com","alt","tucasa"],["src","https://logo.clearbit.com/wallapop.com","alt","wallapop"],["src","https://logo.clearbit.com/idealista.com","alt","idealista"],["src","https://logo.clearbit.com/fotocasa.es","alt","fotocasa"],["src","https://logo.clearbit.com/enalquiler.com","alt","enalquiler"],["src","https://logo.clearbit.com/yaencontre.com","alt","yaencontre"],["src","https://logo.clearbit.com/pisos.com","alt","pisos"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[2,"cursor","pointer",3,"click"],[1,"fa-brands","fa-instagram",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"fa-brands","fa-facebook",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"fa-brands","fa-linkedin",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"fa-brands","fa-twitter",2,"font-family","'Font Awesome 6 Brands' !important","font-size","18px"],[1,"agency-about-us-catalogue"],[1,"catalogue-image"],["src","assets/images/catalogue.png","alt",""],[1,"crm-button-secondary",3,"click"],[1,"agency-office-card"],[1,"agency-office-header"],[1,"agency-office-title"],[1,"agency-office-address"],[1,"agency-office-separator"],[1,"agency-office-contact"],[1,"agency-office-contact-item"],[1,"fas","fa-phone"],[1,"fas","fa-envelope"],[1,"fas","fa-globe"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.k0s(),e.j41(4,"div",4)(5,"div",5),e.nrm(6,"img",3),e.k0s(),e.j41(7,"div",6)(8,"div",7)(9,"div",8),e.EFF(10),e.k0s(),e.j41(11,"div",9),e.nrm(12,"i",10),e.EFF(13),e.k0s()(),e.j41(14,"div")(15,"div",11),e.Z7z(16,oe,4,2,"div",12,e.fX1),e.k0s()()()()(),e.j41(18,"div",13)(19,"div",14),e.EFF(20),e.k0s(),e.j41(21,"div",15)(22,"div",16)(23,"div",17),e.nrm(24,"i",18),e.EFF(25),e.k0s(),e.j41(26,"div"),e.EFF(27),e.k0s()(),e.j41(28,"div",16)(29,"div"),e.EFF(30),e.k0s(),e.j41(31,"div"),e.EFF(32),e.k0s()(),e.j41(33,"div",16)(34,"div",17),e.nrm(35,"i",19),e.EFF(36),e.k0s(),e.j41(37,"div",17),e.nrm(38,"i",20),e.EFF(39),e.k0s()(),e.j41(40,"div",21)(41,"div",17),e.DNE(42,ie,2,0,"div",22)(43,ae,2,0,"div",22)(44,le,2,0,"div",22)(45,re,2,0,"div",22),e.k0s(),e.j41(46,"div"),e.EFF(47),e.k0s()()()(),e.j41(48,"div",23)(49,"div",24)(50,"div",25)(51,"div",26),e.EFF(52," Ventas anuales "),e.k0s(),e.j41(53,"div",27),e.EFF(54),e.nI1(55,"thousandSeparator"),e.k0s()(),e.j41(56,"div",25)(57,"div",26),e.EFF(58," Ingresos anuales "),e.k0s(),e.j41(59,"div",27),e.EFF(60),e.nI1(61,"thousandSeparator"),e.k0s()(),e.j41(62,"div",25)(63,"div",26),e.EFF(64," Portfolio "),e.k0s(),e.j41(65,"div",27),e.EFF(66),e.k0s()(),e.j41(67,"div",25)(68,"div",26),e.EFF(69," Agentes "),e.k0s(),e.j41(70,"div",27),e.EFF(71),e.k0s()(),e.j41(72,"div",25)(73,"div",26),e.EFF(74," Oficinas "),e.k0s(),e.j41(75,"div",27),e.EFF(76),e.k0s()()(),e.j41(77,"div",28),e.EFF(78," Informaci\xf3n proporcionada por la agencia "),e.k0s()(),e.j41(79,"div",29)(80,"div",30)(81,"div",31)(82,"div",14),e.EFF(83," Sobre nosotros "),e.k0s(),e.j41(84,"div",32),e.EFF(85),e.k0s()(),e.j41(86,"div",31)(87,"div",14),e.EFF(88," Un poco de historia "),e.k0s(),e.j41(89,"div",32),e.EFF(90),e.k0s()()(),e.DNE(91,se,7,0,"div",33),e.k0s(),e.j41(92,"div",34)(93,"div",14),e.EFF(94," Promociones destacadas "),e.k0s(),e.j41(95,"div",35)(96,"div",36),e.Z7z(97,ce,1,2,"app-card-promotion",37,e.fX1),e.k0s()()(),e.j41(99,"div",13)(100,"div",14),e.EFF(101," Equipo "),e.k0s(),e.j41(102,"div",35)(103,"div",36),e.Z7z(104,de,1,2,"app-card-system-user",38,e.fX1),e.k0s()()(),e.j41(106,"div",39)(107,"div",34)(108,"div",14),e.EFF(109,"Offices"),e.k0s(),e.j41(110,"div",40),e.DNE(111,pe,20,6,"div",41),e.k0s()(),e.j41(112,"div",34)(113,"div",14),e.EFF(114,"Following real estate portals"),e.k0s(),e.j41(115,"div",42),e.nrm(116,"img",43)(117,"img",44)(118,"img",45)(119,"img",46)(120,"img",47)(121,"img",48)(122,"img",49)(123,"img",50),e.k0s()()()()),2&t&&(e.R7$(3),e.Y8G("src",(null==n.agency?null:n.agency.bannerUrl)||"assets/images/banner-agency-model.png",e.B4B),e.R7$(3),e.Y8G("src",(null==n.agency?null:n.agency.photoUrl)||"assets/images/agency-photo-model.png",e.B4B),e.R7$(4),e.SpI(" ",null==n.agency?null:n.agency.name," "),e.R7$(3),e.E5c(" Fundado en ",null==n.agency?null:n.agency.foundationYear," / ",null==n.agency?null:n.agency.city," / ",null==n.agencyCountry?null:n.agencyCountry.name," "),e.R7$(3),e.Dyx(null==n.agency?null:n.agency.languages),e.R7$(4),e.SpI(" ",(null==n.agency?null:n.agency.legalName)||"Luxinmo Real State SLU"," "),e.R7$(5),e.Lme(" ",(null==n.agencyCountry?null:n.agencyCountry.name)||"Espa\xf1a"," / ",(null==n.agency?null:n.agency.city)||"Valencia"," "),e.R7$(2),e.SpI(" ",(null==n.agency?null:n.agency.address)||"Calle de la Paz, 1"," "),e.R7$(3),e.SpI(" NIF/CIF: ",(null==n.agency?null:n.agency.nifCif)||""," "),e.R7$(2),e.SpI(" C\xf3digo postal: ",(null==n.agency?null:n.agency.postalCode)||""," "),e.R7$(4),e.SpI(" ",(null==n.agency||null==n.agency.phones?null:n.agency.phones[0])||""," "),e.R7$(3),e.SpI(" ",(null==n.agency||null==n.agency.emails?null:n.agency.emails[0])||""," "),e.R7$(3),e.Y8G("ngIf",null==n.agency?null:n.agency.instagramUrl),e.R7$(),e.Y8G("ngIf",null==n.agency?null:n.agency.facebookUrl),e.R7$(),e.Y8G("ngIf",null==n.agency?null:n.agency.linkedinUrl),e.R7$(),e.Y8G("ngIf",null==n.agency?null:n.agency.twitterUrl),e.R7$(2),e.SpI(" ",null==n.agency?null:n.agency.webUrl," "),e.R7$(7),e.SpI(" +",e.bMT(55,28,null==n.agency?null:n.agency.annualSales)||"-"," "),e.R7$(6),e.SpI(" +",e.bMT(61,30,null==n.agency?null:n.agency.annualRevenue)||"-"," "),e.R7$(6),e.SpI(" ",(null==n.agency?null:n.agency.portfolioSize)||"-"," "),e.R7$(5),e.SpI(" ",(null==n.users?null:n.users.length)||"-"," "),e.R7$(5),e.SpI(" ",(null==n.agency||null==n.agency.agencyOffices?null:n.agency.agencyOffices.length)||"-"," "),e.R7$(9),e.SpI(" ",null==n.agency?null:n.agency.aboutUs," "),e.R7$(5),e.SpI(" ",null==n.agency?null:n.agency.storyAboutUs," "),e.R7$(),e.Y8G("ngIf",(null==n.agency||null==n.agency.agencyFiles?null:n.agency.agencyFiles.length)>0),e.R7$(6),e.Dyx(null==n.agency?null:n.agency.promotions),e.R7$(7),e.Dyx(null==n.agency?null:n.agency.users),e.R7$(7),e.Y8G("ngForOf",null==n.agency?null:n.agency.agencyOffices))},dependencies:[v.Sq,v.bT,q.k,ee.X,ne.w],styles:[".agency-block[_ngcontent-%COMP%]{padding:20px;border-radius:12px;background:#fff;max-width:1000px;border:none;gap:16px;display:flex;flex-direction:column}.agency-block-empty[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--crm-border-light-color);gap:0}.agency-block[_ngcontent-%COMP%]   .crm-section-inline-cards[_ngcontent-%COMP%]{display:flex;gap:16px;overflow-x:auto;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none;white-space:nowrap;max-width:100%;padding:8px 0;flex-wrap:nowrap}.agency-block[_ngcontent-%COMP%]   .crm-section-inline-cards[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.agency-block-helper-text[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:var(--crm-font-color-light);width:100%;text-align:right}.agency-block-title[_ngcontent-%COMP%]{font-size:var(--crm-font-size);font-weight:600}.agency-block-text[_ngcontent-%COMP%]{font-size:var(--crm-font-size);font-weight:400;color:var(--crm-font-color-light);line-height:1.5}.agency-number-quantities[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:60%}.agency-number-quantities-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.agency-number-quantities-block-title[_ngcontent-%COMP%]{font-size:12px}.agency-number-quantities-block-number[_ngcontent-%COMP%]{font-size:22px;font-weight:500}.agency-block-rowdata[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.agency-block-rowdata-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:25%;font-size:var(--crm-font-size);font-weight:400;color:var(--crm-font-color-light)}.agency-block-rowdata-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.agency-banner[_ngcontent-%COMP%]{max-width:1000px}.agency-banner-img[_ngcontent-%COMP%]{max-width:1000px;border-top-right-radius:12px;border-top-left-radius:12px;height:220px}.agency-banner-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-top-right-radius:12px;border-top-left-radius:12px}.agency-banner-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;border-bottom-right-radius:12px;border-bottom-left-radius:12px;padding-bottom:12px}.agency-banner-bottom-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex:1;padding:16px}.agency-banner-bottom-info[_ngcontent-%COMP%]   .crm-info-content-langs-langs[_ngcontent-%COMP%]{background:#ebebeb;border-radius:100px;padding:5px 8px}.agency-banner-bottom-info[_ngcontent-%COMP%]   .crm-info-content-langs-langs[_ngcontent-%COMP%]   .crm-item-option-flag[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:1.333333em;height:auto;font-size:13px}.agency-banner-bottom-image[_ngcontent-%COMP%]{width:110px;height:110px;border-radius:50%;border:2px solid #fff;margin-top:-50px;margin-left:24px;background:#fff}.agency-banner-bottom-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.agency-about-us[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-wrap:nowrap;flex-direction:row}.agency-about-us-block[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.agency-about-us-catalogue[_ngcontent-%COMP%]{border:1px solid var(--crm-border-light-color);padding:12px;border-radius:8px;max-width:230px;min-width:230px;flex:1;display:flex;flex-direction:column;gap:12px}.agency-about-us-catalogue[_ngcontent-%COMP%]   .crm-button-secondary[_ngcontent-%COMP%]{margin:auto}.catalogue-image[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;border-radius:8px;overflow:hidden;position:relative}.catalogue-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%;object-fit:cover;max-width:180px}.promotion-card__content[_ngcontent-%COMP%]{border:none!important}.agency-block-double[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:nowrap;max-width:1000px}.agency-block-double[_ngcontent-%COMP%]   .agency-block[_ngcontent-%COMP%]{width:50%}.agency-offices-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.agency-office-card[_ngcontent-%COMP%]{max-width:280px;width:100%;background:#fff;border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:12px}.agency-office-card[_ngcontent-%COMP%]   .agency-office-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.agency-office-card[_ngcontent-%COMP%]   .agency-office-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--crm-font-color)}.agency-office-card[_ngcontent-%COMP%]   .agency-office-address[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:var(--crm-font-color-light);line-height:1.4}.agency-office-card[_ngcontent-%COMP%]   .agency-office-separator[_ngcontent-%COMP%]{border-top:1px solid #eaeaea;margin:4px 0}.agency-office-card[_ngcontent-%COMP%]   .agency-office-contact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.agency-office-card[_ngcontent-%COMP%]   .agency-office-contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--crm-font-color)}.agency-office-card[_ngcontent-%COMP%]   .agency-office-contact-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:var(--crm-font-color-light)}.agency-portals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:12px}.agency-portals-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:90px;height:auto;object-fit:contain;border-radius:8px;background:#f9f9f9;padding:6px;box-shadow:0 0 0 1px #eee}"]}),l})();var ue=s(5990),me=s(9604),fe=s(5180);let ye=(()=>{var o;class l{constructor(t){this.fb=t,this.initForm()}initForm(){this.agencyForm=this.fb.group({name:["",m.k0.required],facebookUrl:[""],instagramUrl:[""],linkedinUrl:[""],twitterUrl:[""],webUrl:[""],phones:this.fb.array([this.createPhoneGroup()]),emails:this.fb.array([this.createEmailGroup()]),aboutUs:[""],storyAboutUs:[""],legalName:[""],foundationYear:[""],nifCif:[""],annualSales:[null],annualRevenue:[null],portfolioSize:[null],country:[""],city:[""],address:[""],postalCode:[""],province:[""]})}populateForm(t){var n,a,r,d,g,f,y,_,c,u,F,M,A,U,N,O,w,S,Y,V,X;this.agencyForm.patchValue({name:null!==(n=t.name)&&void 0!==n?n:"",facebookUrl:null!==(a=t.facebookUrl)&&void 0!==a?a:"",instagramUrl:null!==(r=t.instagramUrl)&&void 0!==r?r:"",linkedinUrl:null!==(d=t.linkedinUrl)&&void 0!==d?d:"",twitterUrl:null!==(g=t.twitterUrl)&&void 0!==g?g:"",webUrl:null!==(f=t.webUrl)&&void 0!==f?f:"",aboutUs:null!==(y=t.aboutUs)&&void 0!==y?y:"",storyAboutUs:null!==(_=t.storyAboutUs)&&void 0!==_?_:"",legalName:null!==(c=t.legalName)&&void 0!==c?c:"",foundationYear:null!==(u=t.foundationYear)&&void 0!==u?u:null,nifCif:null!==(F=t.nifCif)&&void 0!==F?F:"",annualSales:null!==(M=t.annualSales)&&void 0!==M?M:null,annualRevenue:null!==(A=t.annualRevenue)&&void 0!==A?A:null,portfolioSize:null!==(U=t.portfolioSize)&&void 0!==U?U:null,country:null!==(N=t.country)&&void 0!==N?N:"",city:null!==(O=t.city)&&void 0!==O?O:"",address:null!==(w=t.address)&&void 0!==w?w:"",postalCode:null!==(S=t.postalCode)&&void 0!==S?S:"",province:null!==(Y=t.province)&&void 0!==Y?Y:""}),this.phones.clear(),null===(V=t.phones)||void 0===V||V.forEach(I=>{this.phones.push(this.fb.group({phoneNumber:null!=I?I:""}))}),this.emails.clear(),null===(X=t.emails)||void 0===X||X.forEach(I=>{this.emails.push(this.fb.group({emailAddress:null!=I?I:""}))})}createPhoneGroup(){return this.fb.group({phoneNumber:["",[m.k0.pattern(/^\d+$/)]]})}createEmailGroup(){return this.fb.group({emailAddress:["",[m.k0.email]]})}get phones(){return this.agencyForm.get("phones")}get emails(){return this.agencyForm.get("emails")}addPhone(){this.phones.push(this.createPhoneGroup())}removePhone(t){this.phones.removeAt(t)}addEmail(){this.emails.push(this.createEmailGroup())}removeEmail(t){this.emails.removeAt(t)}onSelectCountry(t,n){var a;null===(a=this.phones.at(n).get("country"))||void 0===a||a.setValue(t)}}return(o=l).\u0275fac=function(t){return new(t||o)(e.KVO(m.ok))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();var ve=s(5970),_e=s(1129),be=s(1792),z=s(6279),he=s(7141),R=s(8147);const Fe=["fileUploaderManagerComponent"],Ce=["bannerFileUploaderManagerComponent"],ke=["catalogFileUploaderManagerComponent"],Ie=["fileUploaderOfficeManager"],D=o=>({"crm-section-disabled-inputs":o}),$=o=>({"crm-input-input-error":o}),T=o=>({field:o}),Me=o=>({edit:o}),G=o=>({item:o}),J=o=>({number:o}),k=()=>({standalone:!0});function je(o,l){1&o&&(e.j41(0,"div",44),e.EFF(1," Foto de perfil "),e.k0s())}function Re(o,l){1&o&&(e.j41(0,"div",44),e.EFF(1," Banner de la agencia "),e.k0s())}function Ae(o,l){1&o&&(e.j41(0,"div",44),e.EFF(1," Cat\xe1logo "),e.k0s())}function xe(o,l){1&o&&(e.j41(0,"div",45),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.required")," "))}function Ee(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",50),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.onRemoveLanguage(n))}),e.nrm(1,"i",51),e.k0s()}}function De(o,l){if(1&o&&(e.j41(0,"div",16)(1,"div",46)(2,"div",47),e.nrm(3,"span"),e.k0s(),e.j41(4,"div",48),e.EFF(5),e.k0s()(),e.DNE(6,Ee,2,0,"div",49),e.k0s()),2&o){let i,t;const n=l.$implicit,a=e.XpG();e.Y8G("ngClass",e.eq3(5,Me,!a.disabled)),e.R7$(3),e.HbH(null==(i=a.getLanguageInfo(n))?null:i.flagClass),e.R7$(2),e.SpI(" ",null==(t=a.getLanguageInfo(n))?null:t.name," "),e.R7$(),e.vxM(a.disabled?-1:6)}}function $e(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",52),e.bIt("click",function(n){e.eBV(i);const a=e.XpG();return e.Njj(a.onAddLanguage(n))}),e.nrm(1,"i",53),e.EFF(2),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.i5U(4,3,"text.add_item",e.eq3(6,G,e.bMT(3,1,"text.language")))," "))}function Te(o,l){if(1&o&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI(" ",i.agencyForm.controls.aboutUs.value," ")}}function Ge(o,l){if(1&o&&(e.j41(0,"div",20),e.nrm(1,"textarea",54),e.k0s()),2&o){const i=e.XpG();e.Y8G("appInputViewMode",i.disabled)}}function Pe(o,l){if(1&o&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.SpI(" ",i.agencyForm.controls.storyAboutUs.value," ")}}function Ue(o,l){if(1&o&&(e.j41(0,"div",20),e.nrm(1,"textarea",55),e.k0s()),2&o){const i=e.XpG();e.Y8G("appInputViewMode",i.disabled)}}function Ne(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",56)(1,"div",46)(2,"div",47),e.nrm(3,"span"),e.k0s(),e.j41(4,"div",48),e.EFF(5),e.k0s()(),e.j41(6,"div",50),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.onRemoveNationality())}),e.nrm(7,"i",51),e.k0s()()}if(2&o){let i,t;const n=e.XpG(2);e.R7$(3),e.HbH(null==(i=n.getCountryInfo(null==(i=n.agencyForm.get("country"))?null:i.value))?null:i.flagClass),e.R7$(2),e.SpI(" ",null==(t=n.getCountryInfo(null==(t=n.agencyForm.get("country"))?null:t.value))?null:t.name," ")}}function Oe(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",52),e.bIt("click",function(n){e.eBV(i);const a=e.XpG(2);return e.Njj(a.onAddNationality(n))}),e.nrm(1,"i",53),e.EFF(2," Seleccionar pa\xeds "),e.k0s()}}function we(o,l){if(1&o&&e.DNE(0,Ne,8,3,"div",56)(1,Oe,3,0,"button",17),2&o){let i;const t=e.XpG();e.vxM(null!=(i=t.agencyForm.get("country"))&&i.value?0:1)}}function Se(o,l){if(1&o&&(e.j41(0,"div",57)(1,"div",46)(2,"div",47),e.nrm(3,"span"),e.k0s(),e.j41(4,"div",48),e.EFF(5),e.k0s()()()),2&o){let i,t;const n=e.XpG(2);e.R7$(3),e.HbH(null==(i=n.getCountryInfo(null==(i=n.agencyForm.get("country"))?null:i.value))?null:i.flagClass),e.R7$(2),e.SpI(" ",null==(t=n.getCountryInfo(null==(t=n.agencyForm.get("country"))?null:t.value))?null:t.name," ")}}function Ye(o,l){if(1&o&&e.DNE(0,Se,6,3,"div",57),2&o){let i;const t=e.XpG();e.vxM(null!=(i=t.agencyForm.get("country"))&&i.value?0:-1)}}function Ve(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",64),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$index,a=e.XpG();return e.Njj(a.onRemovePhone(n))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.delete")," "))}function Xe(o,l){1&o&&(e.j41(0,"div",45),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.required")," "))}function Be(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",33)(1,"div",9)(2,"div",10),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",58)(6,"div",59)(7,"app-flag-country-selector",60),e.bIt("emitCountrySelected",function(n){const a=e.eBV(i).$index,r=e.XpG();return e.Njj(r.onSelectCountry(n,a))}),e.k0s(),e.nrm(8,"input",61),e.nI1(9,"translate"),e.nI1(10,"translate"),e.k0s(),e.j41(11,"div",62),e.DNE(12,Ve,3,3,"div",63),e.k0s()(),e.DNE(13,Xe,3,3,"div",13),e.k0s()()}if(2&o){const i=l.$implicit,t=l.$index,n=e.XpG();e.Y8G("formGroup",i),e.R7$(3),e.SpI(" ",e.i5U(4,7,"text.phone_loop_label",e.eq3(15,J,t+1))," "),e.R7$(3),e.Y8G("appInputViewMode",n.disabled)("ngClass",e.eq3(17,$,n.isPhoneControlInvalid(t))),e.R7$(2),e.Y8G("placeholder",e.i5U(10,12,"text.input_placeholder",e.eq3(19,T,e.bMT(9,10,"text.phone")))),e.R7$(4),e.vxM(t>0?12:-1),e.R7$(),e.Y8G("ngIf",n.isPhoneControlInvalid(t))}}function Le(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",34)(1,"div",65)(2,"button",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onAddPhone())}),e.nrm(3,"i",53),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s()()()}2&o&&(e.R7$(4),e.SpI(" ",e.i5U(6,3,"text.add_item",e.eq3(6,G,e.bMT(5,1,"text.phone")))," "))}function He(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",64),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$index,a=e.XpG();return e.Njj(a.onRemoveEmail(n))}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"text.delete")," "))}function ze(o,l){1&o&&(e.j41(0,"div",45),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"errors.required")," "))}function Je(o,l){if(1&o&&(e.j41(0,"div",33)(1,"div",9)(2,"div",10),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",66)(6,"div",67),e.nrm(7,"input",68),e.nI1(8,"translate"),e.nI1(9,"translate"),e.k0s(),e.j41(10,"div",62),e.DNE(11,He,3,3,"div",63),e.k0s()(),e.DNE(12,ze,3,3,"div",13),e.k0s()()),2&o){const i=l.$implicit,t=l.$index,n=e.XpG();e.Y8G("formGroup",i),e.R7$(3),e.SpI(" ",e.i5U(4,7,"text.email_loop_label",e.eq3(15,J,t+1))," "),e.R7$(2),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("ngClass",e.eq3(17,$,n.isEmailControlInvalid(t))),e.R7$(),e.Y8G("placeholder",e.i5U(9,12,"text.input_placeholder",e.eq3(19,T,e.bMT(8,10,"text.email")))),e.R7$(4),e.vxM(t>0?11:-1),e.R7$(),e.Y8G("ngIf",n.isEmailControlInvalid(t))}}function Qe(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",34)(1,"div",65)(2,"button",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onAddEmail())}),e.nrm(3,"i",53),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s()()()}2&o&&(e.R7$(4),e.SpI(" ",e.i5U(6,3,"text.add_item",e.eq3(6,G,e.bMT(5,1,"text.email")))," "))}function Ze(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",78),e.bIt("click",function(){e.eBV(i);const n=e.XpG().$index,a=e.XpG();return e.Njj(a.onRemoveOffice(n))}),e.nrm(1,"i",51),e.k0s()}}function Ke(o,l){if(1&o){const i=e.RV6();e.j41(0,"app-flag-country-selector",60),e.bIt("emitCountrySelected",function(n){e.eBV(i);const a=e.XpG().$index,r=e.XpG();return e.Njj(r.onSelectCountry(n,null,a))}),e.k0s()}}function We(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",42)(1,"div",69)(2,"div",70),e.EFF(3),e.k0s(),e.j41(4,"div",71),e.DNE(5,Ze,2,0,"button",72),e.k0s()(),e.j41(6,"div",73)(7,"div",74)(8,"div",18)(9,"div",10),e.EFF(10," Nombre "),e.k0s(),e.j41(11,"div",21)(12,"input",75),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.name,n)||(a.name=n),e.Njj(n)}),e.k0s()()(),e.j41(13,"div",18)(14,"div",10),e.EFF(15," Direcci\xf3n "),e.k0s(),e.j41(16,"div",21)(17,"input",75),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.address,n)||(a.address=n),e.Njj(n)}),e.k0s()()(),e.j41(18,"div",18)(19,"div",10),e.EFF(20," Ciudad "),e.k0s(),e.j41(21,"div",21)(22,"input",75),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.city,n)||(a.city=n),e.Njj(n)}),e.k0s()()(),e.j41(23,"div",18)(24,"div",10),e.EFF(25," C\xf3digo Postal "),e.k0s(),e.j41(26,"div",21)(27,"input",75),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.postalCode,n)||(a.postalCode=n),e.Njj(n)}),e.k0s()()(),e.j41(28,"div",18)(29,"div",10),e.EFF(30," Email "),e.k0s(),e.j41(31,"div",21)(32,"input",76),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.email,n)||(a.email=n),e.Njj(n)}),e.k0s()()(),e.j41(33,"div",18)(34,"div",10),e.EFF(35," Tel\xe9fono "),e.k0s(),e.j41(36,"div",21),e.DNE(37,Ke,1,0,"app-flag-country-selector",77),e.j41(38,"input",75),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.phoneNumber,n)||(a.phoneNumber=n),e.Njj(n)}),e.k0s()()(),e.j41(39,"div",18)(40,"div",10),e.EFF(41," Web "),e.k0s(),e.j41(42,"div",21)(43,"input",75),e.mxI("ngModelChange",function(n){const a=e.eBV(i).$implicit;return e.DH7(a.web,n)||(a.web=n),e.Njj(n)}),e.k0s()()()()()()}if(2&o){const i=l.$implicit,t=l.$index,n=e.XpG();e.R7$(3),e.SpI(" Oficina ",t+1," "),e.R7$(2),e.Y8G("ngIf",!n.disabled),e.R7$(3),e.Y8G("appHideIfNoData",i.name)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.name),e.Y8G("ngModelOptions",e.lJ4(38,k)),e.R7$(),e.Y8G("appHideIfNoData",i.address)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.address),e.Y8G("ngModelOptions",e.lJ4(39,k)),e.R7$(),e.Y8G("appHideIfNoData",i.city)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.city),e.Y8G("ngModelOptions",e.lJ4(40,k)),e.R7$(),e.Y8G("appHideIfNoData",i.postalCode)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.postalCode),e.Y8G("ngModelOptions",e.lJ4(41,k)),e.R7$(),e.Y8G("appHideIfNoData",i.email)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.email),e.Y8G("ngModelOptions",e.lJ4(42,k)),e.R7$(),e.Y8G("appHideIfNoData",i.phoneNumber)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("ngIf",!n.disabled),e.R7$(),e.R50("ngModel",i.phoneNumber),e.Y8G("ngModelOptions",e.lJ4(43,k)),e.R7$(),e.Y8G("appHideIfNoData",i.web)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.R50("ngModel",i.web),e.Y8G("ngModelOptions",e.lJ4(44,k))}}function qe(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",34)(1,"div",65)(2,"button",52),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.onAddOffice())}),e.nrm(3,"i",53),e.EFF(4," A\xf1adir oficina "),e.k0s()()()}}let en=(()=>{var o;class l{constructor(t,n,a,r){this.fb=t,this.agencyFormService=n,this.popoverService=a,this.utils=r,this.agency=null,this.disabled=!1,this.files=[],this.agencyOffices=[{name:"Oficina Central",address:"Calle 123, Madrid",web:"www.oficinacentral.com",email:"as@gmail.com",phoneNumber:"123456789"}]}ngOnInit(){this.agency&&(this.agencyFormService.populateForm(this.agency),this.agency.languages=this.agency.languages||[],this.agencyOffices=p.cloneDeep(this.agency.agencyOffices)||[],this.disabled?setTimeout(()=>{this.disabled=!1,setTimeout(()=>{this.disabled=!0,this.syncFiles()})}):this.syncFiles())}syncFiles(){setTimeout(()=>{var t;const n={multiple:!1,size:"medium",showRemove:!this.disabled,showName:!1,rounded:!1,allowUpload:!this.disabled,accept:"image/*",files:[]};this.fileUploaderManager.config=p.cloneDeep(n),this.bannerFileUploaderManagerComponent.config=p.cloneDeep({...n,rounded:!1}),this.fileUploaderManager.createProfileFilePic(this.agency),this.bannerFileUploaderManagerComponent.createAgencyBanner(this.agency),this.fileUploaderOfficeManagers.forEach((a,r)=>{a.config=p.cloneDeep(n),a.config.rounded=!1,a.createOfficeImage(this.agencyOffices[r])}),this.catalogFileUploaderManagerComponent.config=p.cloneDeep({...n,filesCategory:"catalog",files:null===(t=this.agency)||void 0===t||null===(t=t.agencyFiles)||void 0===t?void 0:t.filter(a=>"catalog"===a.category),accept:"image/*,application/pdf"})})}get agencyForm(){return this.agencyFormService.agencyForm}get phonesControls(){return this.agencyFormService.phones.controls}get emailsControls(){return this.agencyFormService.emails.controls}getLanguageInfo(t){return this.utils.getLanguageInfo(t)}onAddLanguage(t){var n=this;return(0,b.A)(function*(){var a,r;const d={languageSelector:!0,showCountryCode:!1,selectedCodes:null===(a=n.agency)||void 0===a?void 0:a.languages},g=yield n.popoverService.onShowCountrySelectorPopover(t,d);var f;null!=g&&null!==(r=g.data)&&void 0!==r&&r.country&&n.agency.languages.push(null===(f=g.data)||void 0===f||null===(f=f.country)||void 0===f?void 0:f.code)})()}onRemoveLanguage(t){this.agency.languages=this.agency.languages.filter(n=>n!==t)}onAddPhone(){this.agencyFormService.addPhone()}onRemovePhone(t){this.agencyFormService.removePhone(t)}onAddEmail(){this.agencyFormService.addEmail()}onRemoveEmail(t){this.agencyFormService.removeEmail(t)}onSelectCountry(t,n,a){0===a||a?(console.log("OFFICE INDEX",t),this.agencyOffices[a].phoneNumber=(null==t?void 0:t.phoneCode)+" "):this.agencyFormService.onSelectCountry(t,n)}onAddOffice(){this.agencyOffices.push({name:"",address:"",web:"",email:"",phoneNumber:""}),setTimeout(()=>{this.fileUploaderOfficeManagers.last.config=p.cloneDeep({multiple:!1,size:"medium",showRemove:!this.disabled,showName:!1,rounded:!0,allowUpload:!this.disabled,accept:"image/*",files:[]})})}isControlInvalid(t){const n=this.agencyForm.get(t);return!(!n||!n.invalid||!n.dirty&&!n.touched)}isPhoneControlInvalid(t){var n;const a=null===(n=this.phonesControls[t])||void 0===n?void 0:n.get("phoneNumber");return!(!a||!a.invalid||!a.dirty&&!a.touched)}isEmailControlInvalid(t){var n;const a=null===(n=this.emailsControls[t])||void 0===n?void 0:n.get("emailAddress");return!(!a||!a.invalid||!a.dirty&&!a.touched)}getPhoneErrorMessage(t){const n=this.phonesControls[t].get("phoneNumber");if(null!=n&&n.errors){if(n.errors.required)return"El n\xfamero de tel\xe9fono es requerido";if(n.errors.pattern)return"El n\xfamero de tel\xe9fono debe contener solo d\xedgitos"}return""}getEmailErrorMessage(t){const n=this.emailsControls[t].get("emailAddress");if(null!=n&&n.errors){if(n.errors.required)return"El correo electr\xf3nico es requerido";if(n.errors.email)return"Introduce un correo electr\xf3nico v\xe1lido"}return""}onRemoveOffice(t){this.agencyOffices.splice(t,1)}onAddNationality(t){var n=this;return(0,b.A)(function*(){var a,r;const d={languageSelector:!1,showCountryCode:!1,selectedCodes:[null===(a=n.agencyFormService.agencyForm.get("country"))||void 0===a?void 0:a.value]},g=yield n.popoverService.onShowCountrySelectorPopover(t,d);var f,y;null!=g&&null!==(r=g.data)&&void 0!==r&&r.country&&(null===(f=n.agencyFormService.agencyForm.get("country"))||void 0===f||f.setValue(null===(y=g.data)||void 0===y||null===(y=y.country)||void 0===y?void 0:y.code))})()}onRemoveNationality(){var t;null===(t=this.agencyFormService.agencyForm.get("country"))||void 0===t||t.setValue("")}getCountryInfo(t){return this.utils.getCountryInfo(t)}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(m.ok),e.rXU(ye),e.rXU(ve.m),e.rXU(H.T))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-form"]],viewQuery:function(t,n){if(1&t&&(e.GBs(Fe,5),e.GBs(Ce,5),e.GBs(ke,5),e.GBs(Ie,5)),2&t){let a;e.mGM(a=e.lsd())&&(n.fileUploaderManager=a.first),e.mGM(a=e.lsd())&&(n.bannerFileUploaderManagerComponent=a.first),e.mGM(a=e.lsd())&&(n.catalogFileUploaderManagerComponent=a.first),e.mGM(a=e.lsd())&&(n.fileUploaderOfficeManagers=a)}},inputs:{agency:"agency",disabled:"disabled"},decls:151,vars:86,consts:[["fileUploaderManagerComponent",""],["bannerFileUploaderManagerComponent",""],["catalogFileUploaderManagerComponent",""],[1,"crm-boxes-user-create",3,"formGroup"],[1,"crm-box"],[1,"crm-section","size-medium-small"],["class","crm-section-smaller-title",4,"ngIf"],[1,"crm-section-title"],[1,"crm-section-inputs",3,"ngClass"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass","appInputViewMode"],["type","text","formControlName","name",3,"placeholder"],["class","crm-input-error",4,"ngIf"],[1,"crm-input","crm-input-medium"],[1,"crm-section-items"],[1,"crm-item-option","crm-item-option-lang",3,"ngClass"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary"],[1,"crm-input",3,"appHideIfNoData","disabled"],[1,"crm-text",2,"font-style","normal","color","black"],[1,"crm-input-input","crm-input-input-textarea",3,"appInputViewMode"],[1,"crm-input-input",3,"appInputViewMode"],["type","text","formControlName","legalName","placeholder","Introduce el nombre legal"],["type","number","formControlName","foundationYear","placeholder","Introduce el a\xf1o de fundaci\xf3n"],["type","text","formControlName","nifCif","placeholder","Introduce el NIF/CIF"],["type","number","formControlName","annualSales","placeholder","Introduce las ventas anuales (ej. '42+')"],["type","number","formControlName","annualRevenue","placeholder","Introduce los ingresos anuales (ej. '\u20ac1.8M+')"],["type","number","formControlName","portfolioSize","placeholder","Introduce el tama\xf1o del portfolio"],["type","text","formControlName","city","placeholder","Introduce el c\xf3digo postal"],["type","text","formControlName","address","placeholder","Introduce el c\xf3digo postal"],["type","text","formControlName","postalCode","placeholder","Introduce el c\xf3digo postal"],["type","text","formControlName","province","placeholder","Introduce la prov\xedncia"],[1,"crm-box","crm-section"],[3,"formGroup"],[1,"crm-section-buttons-right"],[1,"crm-section-inputs-double-input"],["type","text","formControlName","webUrl",3,"placeholder"],["type","text","formControlName","facebookUrl",3,"placeholder"],["type","text","formControlName","instagramUrl",3,"placeholder"],["type","text","formControlName","linkedinUrl",3,"placeholder"],["type","text","formControlName","twitterUrl",3,"placeholder"],[1,"crm-section-inline-cards"],[1,"crm-card"],["class","crm-section-buttons-right",4,"ngIf"],[1,"crm-section-smaller-title"],[1,"crm-input-error"],[1,"crm-item-option-left"],[1,"crm-item-option-flag"],[1,"crm-item-option-label"],[1,"crm-item-option-remove"],[1,"crm-item-option-remove",3,"click"],[1,"fas","fa-trash"],["type","button",1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fas","fa-add"],["rows","5","placeholder","Introduce la descripci\xf3n","formControlName","aboutUs"],["rows","5","placeholder","Introduce la descripci\xf3n","formControlName","storyAboutUs"],[1,"crm-item-option","crm-item-option-lang","edit"],[1,"crm-item-option","crm-item-option-lang"],[1,"crm-input-input-and-icon"],[1,"crm-input-input",3,"appInputViewMode","ngClass"],[3,"emitCountrySelected"],["type","text","formControlName","phoneNumber",3,"placeholder"],[1,"crm-input-input-and-icon-right"],[1,"crm-text","crm-text-underline","crm-text-underline-red"],[1,"crm-text","crm-text-underline","crm-text-underline-red",3,"click"],[1,"crm-section-buttons-group"],[1,"crm-input-input-and-icon",3,"appInputViewMode"],[1,"crm-input-input",3,"ngClass"],["type","email","formControlName","emailAddress",3,"placeholder"],[1,"crm-header-modal","crm-header-modal-no-padding",2,"margin-bottom","12px"],[1,"crm-card-title"],[1,"crm-buttons-group"],["class","crm-button-icon-solo red small",3,"click",4,"ngIf"],[1,"crm-card-content"],[1,"crm-section-inputs"],["type","text",3,"ngModelChange","ngModel","ngModelOptions"],["type","email",3,"ngModelChange","ngModel","ngModelOptions"],[3,"emitCountrySelected",4,"ngIf"],[1,"crm-button-icon-solo","red","small",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"form",3)(1,"div",4)(2,"div",5),e.DNE(3,je,2,0,"div",6),e.nrm(4,"app-file-uploader-manager",null,0),e.DNE(6,Re,2,0,"div",6),e.nrm(7,"app-file-uploader-manager",null,1),e.DNE(9,Ae,2,0,"div",6),e.nrm(10,"app-file-uploader-manager",null,2),e.j41(12,"div",7),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"div",8)(16,"div",9)(17,"div",10),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"div",11),e.nrm(21,"input",12),e.nI1(22,"translate"),e.nI1(23,"translate"),e.k0s(),e.DNE(24,xe,3,3,"div",13),e.k0s(),e.j41(25,"div",14)(26,"div",10),e.EFF(27," Idiomas "),e.k0s(),e.j41(28,"div",15),e.Z7z(29,De,7,7,"div",16,e.fX1),e.DNE(31,$e,5,8,"button",17),e.k0s()(),e.j41(32,"div",18)(33,"div",10),e.EFF(34," Texto sobre nosotros "),e.k0s(),e.DNE(35,Te,2,1,"div",19)(36,Ge,2,1,"div",20),e.k0s(),e.j41(37,"div",18)(38,"div",10),e.EFF(39," Texto nuestra historia "),e.k0s(),e.DNE(40,Pe,2,1,"div",19)(41,Ue,2,1,"div",20),e.k0s()(),e.j41(42,"div",7),e.EFF(43," Informaci\xf3n adicional "),e.k0s(),e.j41(44,"div",8)(45,"div",9)(46,"div",10),e.EFF(47,"Nombre Legal"),e.k0s(),e.j41(48,"div",21),e.nrm(49,"input",22),e.k0s()(),e.j41(50,"div",9)(51,"div",10),e.EFF(52,"A\xf1o de Fundaci\xf3n"),e.k0s(),e.j41(53,"div",21),e.nrm(54,"input",23),e.k0s()(),e.j41(55,"div",9)(56,"div",10),e.EFF(57,"NIF/CIF"),e.k0s(),e.j41(58,"div",21),e.nrm(59,"input",24),e.k0s()(),e.j41(60,"div",9)(61,"div",10),e.EFF(62,"Ventas Anuales"),e.k0s(),e.j41(63,"div",21),e.nrm(64,"input",25),e.k0s()(),e.j41(65,"div",9)(66,"div",10),e.EFF(67,"Ingresos Anuales"),e.k0s(),e.j41(68,"div",21),e.nrm(69,"input",26),e.k0s()(),e.j41(70,"div",9)(71,"div",10),e.EFF(72,"Portfolio"),e.k0s(),e.j41(73,"div",21),e.nrm(74,"input",27),e.k0s()(),e.j41(75,"div",9)(76,"div",10),e.EFF(77," Pa\xeds "),e.k0s(),e.j41(78,"div",15),e.DNE(79,we,2,1)(80,Ye,1,1),e.k0s()(),e.j41(81,"div",9)(82,"div",10),e.EFF(83,"Ciudad"),e.k0s(),e.j41(84,"div",21),e.nrm(85,"input",28),e.k0s()(),e.j41(86,"div",9)(87,"div",10),e.EFF(88,"Direcci\xf3n"),e.k0s(),e.j41(89,"div",21),e.nrm(90,"input",29),e.k0s()(),e.j41(91,"div",9)(92,"div",10),e.EFF(93,"C\xf3digo Postal"),e.k0s(),e.j41(94,"div",21),e.nrm(95,"input",30),e.k0s()(),e.j41(96,"div",9)(97,"div",10),e.EFF(98,"Prov\xedncia"),e.k0s(),e.j41(99,"div",21),e.nrm(100,"input",31),e.k0s()()()()(),e.j41(101,"div",32)(102,"div",7),e.EFF(103),e.nI1(104,"translate"),e.k0s(),e.j41(105,"div",8),e.Z7z(106,Be,14,21,"div",33,e.fX1),e.DNE(108,Le,7,8,"div",34),e.Z7z(109,Je,13,21,"div",33,e.fX1),e.DNE(111,Qe,7,8,"div",34),e.j41(112,"div",35)(113,"div",18)(114,"div",10),e.EFF(115," Web URL "),e.k0s(),e.j41(116,"div",21),e.nrm(117,"input",36),e.nI1(118,"translate"),e.k0s()()(),e.j41(119,"div",35)(120,"div",18)(121,"div",10),e.EFF(122," Facebook URL "),e.k0s(),e.j41(123,"div",21),e.nrm(124,"input",37),e.nI1(125,"translate"),e.k0s()(),e.j41(126,"div",18)(127,"div",10),e.EFF(128," Instagram URL "),e.k0s(),e.j41(129,"div",21),e.nrm(130,"input",38),e.nI1(131,"translate"),e.k0s()()(),e.j41(132,"div",35)(133,"div",18)(134,"div",10),e.EFF(135," LinkedIn URL "),e.k0s(),e.j41(136,"div",21),e.nrm(137,"input",39),e.nI1(138,"translate"),e.k0s()(),e.j41(139,"div",18)(140,"div",10),e.EFF(141," Twitter URL "),e.k0s(),e.j41(142,"div",21),e.nrm(143,"input",40),e.nI1(144,"translate"),e.k0s()()(),e.j41(145,"div",7),e.EFF(146," Oficinas "),e.k0s(),e.j41(147,"div",41),e.Z7z(148,We,44,45,"div",42,e.fX1),e.k0s(),e.DNE(150,qe,5,0,"div",43),e.k0s()()()),2&t&&(e.Y8G("formGroup",n.agencyForm),e.R7$(3),e.Y8G("ngIf",(null==n.agency?null:n.agency.photoUrl)||!n.disabled),e.R7$(3),e.Y8G("ngIf",(null==n.agency?null:n.agency.bannerUrl)||!n.disabled),e.R7$(3),e.Y8G("ngIf",(null==n.agency||null==n.agency.agencyFiles?null:n.agency.agencyFiles.length)>0||!n.disabled),e.R7$(4),e.SpI(" ",e.bMT(14,55,"text.general_info")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(76,D,n.disabled)),e.R7$(3),e.SpI(" ",e.bMT(19,57,"text.name")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(78,$,n.isControlInvalid("name")))("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.i5U(23,61,"text.input_placeholder",e.eq3(80,T,e.bMT(22,59,"text.name")))),e.R7$(3),e.Y8G("ngIf",n.isControlInvalid("name")),e.R7$(5),e.Dyx(null==n.agency?null:n.agency.languages),e.R7$(2),e.vxM(n.disabled?-1:31),e.R7$(),e.Y8G("appHideIfNoData",n.agencyForm.controls.aboutUs.value)("disabled",n.disabled),e.R7$(3),e.vxM(n.disabled?35:36),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.storyAboutUs.value)("disabled",n.disabled),e.R7$(3),e.vxM(n.disabled?40:41),e.R7$(4),e.Y8G("ngClass",e.eq3(82,D,n.disabled)),e.R7$(4),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(6),e.vxM(n.disabled?80:79),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(5),e.Y8G("appInputViewMode",n.disabled),e.R7$(4),e.SpI(" ",e.bMT(104,64,"text.contact_info")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(84,D,n.disabled)),e.R7$(),e.Dyx(n.phonesControls),e.R7$(2),e.vxM(n.disabled?-1:108),e.R7$(),e.Dyx(n.emailsControls),e.R7$(2),e.vxM(n.disabled?-1:111),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.webUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(118,66,"CONTACT_FORM.CONTACT_DATA.URL_FACEBOOK_PLACEHOLDER")),e.R7$(3),e.Y8G("appHideIfNoData",n.agencyForm.controls.facebookUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(125,68,"CONTACT_FORM.CONTACT_DATA.URL_FACEBOOK_PLACEHOLDER")),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.instagramUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(131,70,"CONTACT_FORM.CONTACT_DATA.URL_INSTAGRAM_PLACEHOLDER")),e.R7$(3),e.Y8G("appHideIfNoData",n.agencyForm.controls.linkedinUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(138,72,"CONTACT_FORM.CONTACT_DATA.URL_LINKEDIN_PLACEHOLDER")),e.R7$(2),e.Y8G("appHideIfNoData",n.agencyForm.controls.twitterUrl.value)("disabled",n.disabled),e.R7$(3),e.Y8G("appInputViewMode",n.disabled),e.R7$(),e.Y8G("placeholder",e.bMT(144,74,"CONTACT_FORM.CONTACT_DATA.URL_LINKEDIN_PLACEHOLDER")),e.R7$(5),e.Dyx(n.agencyOffices),e.R7$(2),e.Y8G("ngIf",!n.disabled))},dependencies:[v.YU,v.bT,m.qT,m.me,m.Q0,m.BC,m.cb,m.j4,m.JD,m.vS,_e.Z,be.M,z.F,he.S,R.D9]}),l})();const nn=["agencyForm"];function tn(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",6),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.onSaveUser())}),e.nrm(1,"i",7),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"text.save")," "))}function on(o,l){if(1&o){const i=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.onEditUser())}),e.nrm(1,"i",9),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&o&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"text.edit")," "))}function an(o,l){if(1&o&&e.DNE(0,tn,4,3,"button",4)(1,on,4,3,"button",5),2&o){const i=e.XpG();e.vxM(i.editing?0:1)}}let ln=(()=>{var o;class l{constructor(t,n,a){this.api=t,this.toastService=n,this.state=a,this.agency=null,this.reloadData=new e.bkB,this.files=[],this.editing=!1}ngOnInit(){this.getState(),console.log("LA AGENCIA EN EL INFO",this.agency)}getState(){this.state.getState().subscribe(t=>{this.currentUser=t.user})}onSaveUser(){var t=this;return(0,b.A)(function*(){var n,a,r;let d={...t.agency,...t.agencyForm.agencyForm.value};d=yield t.agencyForm.fileUploaderManager.processProfilePic(d),d=yield t.agencyForm.bannerFileUploaderManagerComponent.processAgencyBanner(d),d.phones=d.phones.map(c=>c.phoneNumber),d.emails=d.emails.map(c=>c.emailAddress),d.agencyOffices=yield t.updateAgencyOffices(p.cloneDeep(t.agencyForm.agencyOffices)),null===(n=d)||void 0===n||delete n.promotions,null===(a=d)||void 0===a||delete a.agencyFiles;const g=yield t.api.updateAgencyById(d.id,d);let f=p.cloneDeep(null===(r=t.agencyForm)||void 0===r||null===(r=r.catalogFileUploaderManagerComponent)||void 0===r||null===(r=r.config)||void 0===r?void 0:r.files)||[];for(let c of f){if(null!=c&&c.new){var y,_;const u={agencyId:null===(y=t.agency)||void 0===y?void 0:y.id,name:"",category:c.category,label:c.label,orderIndex:null==c?void 0:c.orderIndex},F=yield t.api.uploadFile(c.fileBlob),M=null==F||null===(_=F.success)||void 0===_||null===(_=_.data)||void 0===_?void 0:_.fileName;u.name=M,yield t.api.createAgencyFiles(u)}if(null!=c&&c.deleted&&(yield t.api.deleteAgencyFilesById(null==c?void 0:c.id)),null!=c&&c.moved&&(null==c||!c.deleted)&&(null==c||!c.new)){let u=p.cloneDeep(c);delete u.moved,delete u.fileBase64,delete u.fileBlob,delete u.new,delete u.deleted,delete u.size,delete u.type,yield t.api.updateAgencyFilesById(null==u?void 0:u.id,u)}}null!=g&&g.success?t.toastService.showSuccessToast("La agencia ha sido actualizada correctamente"):t.toastService.showErrorToast("Ha ocurrido un error al actualizar la agencia"),t.editing=!1,t.agencyForm.fileUploaderManager.setEditingMode(!1),t.agencyForm.bannerFileUploaderManagerComponent.setEditingMode(!1),t.agencyForm.fileUploaderOfficeManagers.forEach((c,u)=>{c.setEditingMode(!1)}),t.agencyForm.catalogFileUploaderManagerComponent.setEditingMode(!1),t.reloadData.emit()})()}updateAgencyOffices(t){return(0,b.A)(function*(){return t})()}onEditUser(){this.editing=!0,this.agencyForm.fileUploaderManager.setEditingMode(!0),this.agencyForm.bannerFileUploaderManagerComponent.setEditingMode(!0),this.agencyForm.fileUploaderOfficeManagers.forEach((t,n)=>{t.setEditingMode(!0)}),this.agencyForm.catalogFileUploaderManagerComponent.setEditingMode(!0)}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(x.i),e.rXU(B.f),e.rXU(E.c))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-details-info"]],viewQuery:function(t,n){if(1&t&&e.GBs(nn,5),2&t){let a;e.mGM(a=e.lsd())&&(n.agencyForm=a.first)}},inputs:{agency:"agency"},outputs:{reloadData:"reloadData"},decls:6,vars:3,consts:[["agencyForm",""],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[3,"agency","disabled"],[1,"crm-button"],[1,"crm-button-secondary","crm-button-secondary-primary"],[1,"crm-button",3,"click"],[1,"fa","fa-check"],[1,"crm-button-secondary","crm-button-secondary-primary",3,"click"],[1,"fa","fa-edit"]],template:function(t,n){1&t&&(e.j41(0,"div",1),e.nrm(1,"div"),e.j41(2,"div",2),e.DNE(3,an,2,1),e.k0s()(),e.nrm(4,"app-agency-form",3,0)),2&t&&(e.R7$(3),e.vxM("agency"===(null==n.currentUser?null:n.currentUser.accountType)?3:-1),e.R7$(),e.Y8G("agency",n.agency)("disabled",!n.editing))},dependencies:[en,R.D9]}),l})();const rn=o=>({"crm-block-body-blue-content-no-padding":o}),P=o=>({fatherObj:o,type:"agency"}),sn=()=>({type:"agencyFolder"});function cn(o,l){if(1&o){const i=e.RV6();e.j41(0,"div",5)(1,"app-agency-details-presentation",7),e.bIt("reloadData",function(){e.eBV(i);const n=e.XpG(2);return e.Njj(n.ngOnInit())}),e.k0s()()}if(2&o){const i=e.XpG(2);e.R7$(),e.Y8G("agency",i.agency)}}function dn(o,l){if(1&o){const i=e.RV6();e.j41(0,"app-agency-details-info",7),e.bIt("reloadData",function(){e.eBV(i);const n=e.XpG(3);return e.Njj(n.ngOnInit())}),e.k0s()}if(2&o){const i=e.XpG(3);e.Y8G("agency",i.agency)}}function pn(o,l){if(1&o&&e.nrm(0,"app-users-list",9),2&o){const i=e.XpG(3);e.Y8G("options",e.eq3(1,P,i.agency))}}function gn(o,l){if(1&o&&e.nrm(0,"app-operations-list",9),2&o){const i=e.XpG(3);e.Y8G("options",e.eq3(1,P,i.agency))}}function un(o,l){if(1&o&&e.nrm(0,"app-file-explorer",10),2&o){const i=e.XpG(3);e.Y8G("options",e.lJ4(2,sn))("directoryBaseElement",i.agencyFolder)}}function mn(o,l){if(1&o&&e.nrm(0,"app-registers-list",9),2&o){const i=e.XpG(3);e.Y8G("options",e.eq3(1,P,i.agency))}}function fn(o,l){if(1&o&&(e.j41(0,"div",6),e.DNE(1,dn,1,1,"app-agency-details-info",8)(2,pn,1,3,"app-users-list",9)(3,gn,1,3,"app-operations-list",9)(4,un,1,3,"app-file-explorer",10)(5,mn,1,3,"app-registers-list",9),e.k0s()),2&o){const i=e.XpG(2);e.Y8G("ngClass",e.eq3(6,rn,"users"===i.activeTab||"operations"===i.activeTab||"registers"===i.activeTab)),e.R7$(),e.vxM("info"===i.activeTab?1:-1),e.R7$(),e.vxM("users"===i.activeTab?2:-1),e.R7$(),e.vxM("operations"===i.activeTab?3:-1),e.R7$(),e.vxM("files"===i.activeTab?4:-1),e.R7$(),e.vxM("registers"===i.activeTab?5:-1)}}function yn(o,l){if(1&o&&e.DNE(0,cn,2,1,"div",5)(1,fn,6,8,"div",6),2&o){const i=e.XpG();e.vxM("presentation"===i.activeTab?0:1)}}const vn=[{path:"",component:(()=>{var o;class l{constructor(t,n,a,r,d,g){this.activatedRoute=t,this.toastService=n,this.headerService=a,this.router=r,this.api=d,this.byvaroState=g,this.agencyParameterId=null,this.agency=null,this.activeTab="info",this.agencyTabs=[],this.baseTabs=[{id:"3",title:"presentation",active:!0},{id:"1",title:"info",active:!1},{id:"2",title:"users",active:!1},{id:"4",title:"operations",active:!1},{id:"5",title:"files",active:!1},{id:"6",title:"registers",active:!1}],this.currentUser=null,this.agencyFolder=null}ngOnInit(){var t=this;return(0,b.A)(function*(){if(t.agencyParameterId=t.activatedRoute.snapshot.paramMap.get("id"),t.byvaroState.getState().subscribe(r=>{t.currentUser=r.user}),"mine"===t.agencyParameterId){var n;t.agencyTabs=t.baseTabs;const r=yield t.api.getCurrentAgency();if(null!=r&&null!==(n=r.success)&&void 0!==n&&n.data){var a;t.agency=r.success.data;let g={},f=null,y={page:0,itemsPerPage:50};const _=yield t.api.getUser(g,f,y);null!=_&&null!==(a=_.success)&&void 0!==a&&a.data&&(t.agency.users=_.success.data)}}else t.agencyTabs=t.baseTabs.filter(r=>"1"!==r.id),yield t.getData();t.agencyFolder={type:"agency_folder",name:"Agencia",parent:t.agency}})()}ionViewWillEnter(){this.headerService.setConfig({title:"agency_details"})}getData(){var t=this;return(0,b.A)(function*(){if(t.agency=yield t.getAgencyById(),console.log("agency",t.agency),!t.agency)return t.toastService.showToast({text:"No existe ninguna agencia con ese ID",icon:"fas fa-exclamation-triangle",theme:"red",time:3e3}),void t.router.navigate(["/promoters"])})()}getAgencyById(){var t=this;return(0,b.A)(function*(){var n,a;if(!t.agencyParameterId)return null;const r=yield t.api.getAgency({id:{equals:t.agencyParameterId}},null,null,{promotions:{apply:!0}});r.error&&t.toastService.showToast({text:"Error al leer esta Agencia",icon:"fas fa-exclamation-triangle",theme:"red",time:3e3});const[d]=null==r||null===(n=r.success)||void 0===n?void 0:n.data,g=yield t.api.getUsersOfAccount(d.id);return d.users=(null===(a=g.success)||void 0===a?void 0:a.data)||[],d})()}onEditAgency(){var t=this;return(0,b.A)(function*(){const n=p.cloneDeep(t.agency);null==n||delete n.promotions,console.log("agencyToEdit",n),(yield t.api.updateAgencyById(t.agencyParameterId,n)).success?t.toastService.showToast({text:"Agencia actualizada correctamente",theme:"success",time:2e3}):t.toastService.showToast({text:"Error al actualizar la agencia",icon:"fas fa-exclamation-triangle",theme:"red",time:3e3})})()}onTabClicked(t){this.activeTab=t}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(C.nX),e.rXU(B.f),e.rXU(K.d),e.rXU(C.Ix),e.rXU(x.i),e.rXU(E.c))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-agency-details"]],decls:6,vars:2,consts:[[1,"crm-block-body"],[1,"crm-block-body-fixed"],[1,"crm-block-details-header"],[1,"crm-block-details-bottom"],[3,"tabClicked","tabs"],[1,"crm-block-body-blue-content",2,"padding","0"],[1,"crm-block-body-blue-content",3,"ngClass"],[3,"reloadData","agency"],[3,"agency"],[3,"options"],[3,"options","directoryBaseElement"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-tabs",4),e.bIt("tabClicked",function(r){return n.onTabClicked(r)}),e.k0s()()()(),e.DNE(5,yn,2,1),e.k0s()),2&t&&(e.R7$(4),e.Y8G("tabs",n.agencyTabs),e.R7$(),e.vxM(null!=n.agency&&n.agency.id?5:-1))},dependencies:[v.YU,L.O,W.s,ge,ue.Q,me.b,fe.c,ln]}),l})()}];let _n=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[C.iI.forChild(vn),C.iI]}),l})();var Q=s(2652),bn=s(6812);let hn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.MD,m.X1,m.YN,R.h,bn.u,h.bv,Q.T,z.F]}),l})();var Fn=s(4831),Cn=s(3263),kn=s(9662),In=s(7991);let Mn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.MD,h.bv,m.X1,Cn.l,kn.Y,In.S]}),l})();var jn=s(5166),Rn=s(8284),An=s(1362);let xn=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[v.MD,m.YN,h.bv,_n,L.O,Q.T,R.h,hn,Fn.UsersListPageModule,Mn,jn.OperationsListPageModule,Rn.o,An.RegistersListPageModule]}),l})()}}]);