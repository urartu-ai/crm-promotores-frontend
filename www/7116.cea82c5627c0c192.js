"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7116],{904:(h,g,a)=>{a.d(g,{X:()=>S});var o=a(3953),_=a(5188),C=a(6552),c=a(1213),m=a(177),s=a(9417),p=a(9465),d=a(4821),u=a(8147),v=a(4558);const x=(n,l,t,i)=>({"crm-card-user-active":n,"opacity-0-4 border-secondary":l,"border-error":t,"border-secondary":i}),f=n=>({"crm-card-user-active":n}),k=n=>({"crm-card-promotion-left-img-small":n});function M(n,l){1&n&&(o.j41(0,"div",24),o.nrm(1,"img",26),o.j41(2,"div",27),o.EFF(3,"Incomplete"),o.k0s()()),2&n&&(o.R7$(),o.Y8G("src","assets/icon/incomplete-icon.svg",o.B4B))}function O(n,l){1&n&&(o.j41(0,"div",24),o.nrm(1,"img",26),o.j41(2,"div",28),o.EFF(3,"Inactive"),o.k0s()()),2&n&&(o.R7$(),o.Y8G("src","assets/icon/inactive-icon.svg",o.B4B))}function R(n,l){if(1&n&&(o.j41(0,"span",31),o.EFF(1),o.k0s()),2&n){const t=o.XpG(5);o.R7$(),o.SpI("Seleccionados: ",null==t.promotion?null:t.promotion.selectedPropertyCount,"")}}function b(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",25)(1,"div",29)(2,"ion-checkbox",30),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG(4);return o.DH7(r.promotion.checked,e)||(r.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(t);const r=o.XpG(4);return o.Njj(r.onTogglePromotionCheckbox(e))}),o.k0s()(),o.DNE(3,R,2,1,"span",31),o.k0s()}if(2&n){const t=o.XpG(4);o.R7$(2),o.R50("ngModel",t.promotion.checked),o.Y8G("disabled",t.promotion.invitedApproved||t.promotion.invitedPending),o.R7$(),o.vxM("modal"===t.context?3:-1)}}function E(n,l){if(1&n&&(o.j41(0,"div",4),o.DNE(1,M,4,1,"div",24)(2,O,4,1,"div",24)(3,b,4,3,"div",25),o.k0s()),2&n){const t=o.XpG(3);o.R7$(),o.vxM(null!=t.promotion&&t.promotion.promotionPaymentInfoIsCompleted?null!=t.promotion&&t.promotion.promotionPaymentInfoIsCompleted&&!t.getCheckHasAvailableProperty()?2:3:1)}}function j(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",25)(1,"div",29)(2,"ion-checkbox",30),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG(4);return o.DH7(r.promotion.checked,e)||(r.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(t);const r=o.XpG(4);return o.Njj(r.onTogglePromotionCheckbox(e))}),o.k0s()()()}if(2&n){const t=o.XpG(4);o.R7$(2),o.R50("ngModel",t.promotion.checked),o.Y8G("disabled",t.promotion.invitedApproved||t.promotion.invitedPending)}}function T(n,l){1&n&&(o.j41(0,"div",24)(1,"div",33),o.nrm(2,"img",8),o.k0s(),o.j41(3,"div",34)(4,"div",35),o.EFF(5,"Pendiente"),o.k0s(),o.j41(6,"div",36),o.nrm(7,"img",8),o.k0s()()()),2&n&&(o.R7$(2),o.Y8G("src","assets/icon/x-close-grey-icon.svg",o.B4B),o.R7$(5),o.Y8G("src","assets/icon/loading-icon-warn-1.svg",o.B4B))}function I(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",32)(1,"div",37),o.bIt("click",function(){o.eBV(t);const e=o.XpG(4);return o.Njj(e.onRemoveAgencyAccessToPromotion(e.promotion))}),o.nrm(2,"img",8),o.k0s(),o.j41(3,"div",38),o.EFF(4,"Dejar de compartir"),o.k0s()()}2&n&&(o.R7$(2),o.Y8G("src","assets/icon/x-close-red-icon.svg",o.B4B))}function y(n,l){if(1&n&&(o.j41(0,"div",4),o.DNE(1,j,3,2,"div",25)(2,T,8,2,"div",24)(3,I,5,1,"div",32),o.k0s()),2&n){const t=o.XpG(3);o.R7$(),o.vxM(t.promotion.invitedApproved?t.promotion.invitedPending?2:null!=t.promotion&&t.promotion.invitedApproved?3:-1:1)}}function D(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",3),o.bIt("click",function(e){o.eBV(t);const r=o.XpG(2);return o.Njj(r.onItemClick(e))}),o.DNE(1,E,4,1,"div",4)(2,y,4,1,"div",4),o.j41(3,"div",5)(4,"div",6)(5,"div",7),o.EFF(6),o.k0s(),o.nrm(7,"img",8),o.k0s(),o.j41(8,"h3",9),o.nrm(9,"app-tooltip-text",10),o.k0s(),o.j41(10,"p",11),o.EFF(11),o.nI1(12,"thousandSeparator"),o.nI1(13,"thousandSeparator"),o.k0s(),o.j41(14,"div",12)(15,"p",13),o.EFF(16),o.k0s(),o.j41(17,"p",14),o.EFF(18),o.nI1(19,"translate"),o.k0s(),o.j41(20,"p",15),o.EFF(21),o.k0s()(),o.j41(22,"div",16)(23,"div",17)(24,"span")(25,"span",18),o.EFF(26),o.k0s(),o.EFF(27),o.k0s()(),o.j41(28,"div",19)(29,"div",20),o.nrm(30,"img",21),o.j41(31,"span",22),o.EFF(32),o.k0s()(),o.j41(33,"div",23),o.nrm(34,"img",21),o.j41(35,"span",22),o.EFF(36),o.nI1(37,"date"),o.k0s()()()()()()}if(2&n){const t=o.XpG(2);o.Y8G("ngClass",o.ziG(27,x,null==t.promotion?null:t.promotion.checked,t.promotion.promotionPaymentInfoIsCompleted&&!t.getCheckHasAvailableProperty()&&"page"===t.context,!t.promotion.promotionPaymentInfoIsCompleted&&"page"===t.context,"invite-agency"===t.context)),o.R7$(),o.vxM(t.hideCheckbox||"invite-agency"===t.context?"invite-agency"===t.context?2:-1:1),o.R7$(5),o.SpI("",(null==t.promotion?null:t.promotion.sellCommissionPercentage)||0,"%"),o.R7$(),o.Y8G("src",(null==t.promotion||null==t.promotion.promotionFiles?null:t.promotion.promotionFiles.length)>0?null==t.promotion?null:t.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B),o.R7$(2),o.Y8G("text",null==t.promotion?null:t.promotion.projectName)("maxLength",35),o.R7$(2),o.Lme("",o.bMT(12,18,null==t.rangeOfPropertiesPrices?null:t.rangeOfPropertiesPrices.min)," \u20ac - ",o.bMT(13,20,null==t.rangeOfPropertiesPrices?null:t.rangeOfPropertiesPrices.max)," \u20ac"),o.R7$(5),o.Lme("",null==t.promotion?null:t.promotion.city," / ",null==t.promotion?null:t.promotion.province,""),o.R7$(2),o.JRh(null!=t.promotion&&t.promotion.constructionType?o.bMT(19,22,"promotion_constructionType_texts."+(null==t.promotion?null:t.promotion.constructionType)):""),o.R7$(3),o.JRh(null==t.promotion||null==t.promotion.promoter?null:t.promotion.promoter.name),o.R7$(5),o.JRh(null==t.availableProperties?null:t.availableProperties.length),o.R7$(),o.SpI(" / ",null==t.promotion||null==t.promotion.properties?null:t.promotion.properties.length,""),o.R7$(3),o.Y8G("src","assets/icon/inactive-icon.svg",o.B4B),o.R7$(2),o.SpI(" ",null==t.promotion?null:t.promotion.constructionStatus,""),o.R7$(2),o.Y8G("src","assets/icon/target-icon.svg",o.B4B),o.R7$(2),o.SpI(" ",o.i5U(37,24,null==t.promotion?null:t.promotion.keyDeliveryDate,"dd/MM/yy"),"")}}function B(n,l){1&n&&(o.j41(0,"div",39)(1,"div",5)(2,"div",6),o.nrm(3,"ion-skeleton-text",40),o.k0s(),o.j41(4,"h3",9),o.nrm(5,"ion-skeleton-text",41),o.k0s(),o.j41(6,"p",11),o.nrm(7,"ion-skeleton-text",42),o.k0s(),o.j41(8,"div",12)(9,"p",13),o.nrm(10,"ion-skeleton-text",43),o.k0s(),o.j41(11,"p",14),o.nrm(12,"ion-skeleton-text",44),o.k0s(),o.j41(13,"p",15),o.nrm(14,"ion-skeleton-text",45),o.k0s()(),o.j41(15,"div",16)(16,"div",17),o.nrm(17,"ion-skeleton-text",46),o.k0s(),o.j41(18,"div",19)(19,"div",20),o.nrm(20,"ion-skeleton-text",47),o.k0s(),o.j41(21,"div",23),o.nrm(22,"ion-skeleton-text",48),o.k0s()()()()()),2&n&&(o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(3),o.Y8G("animated",!0),o.R7$(2),o.Y8G("animated",!0))}function F(n,l){if(1&n&&o.DNE(0,D,38,32,"div",1)(1,B,23,9,"div",2),2&n){const t=o.XpG();o.Y8G("ngIf",!t.isSkeleton),o.R7$(),o.Y8G("ngIf",t.isSkeleton)}}function G(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",25)(1,"div",29)(2,"ion-checkbox",30),o.mxI("ngModelChange",function(e){o.eBV(t);const r=o.XpG(2);return o.DH7(r.promotion.checked,e)||(r.promotion.checked=e),o.Njj(e)}),o.bIt("click",function(e){o.eBV(t);const r=o.XpG(2);return o.Njj(r.onTogglePromotionCheckbox(e))}),o.k0s()()()}if(2&n){const t=o.XpG(2);o.R7$(2),o.R50("ngModel",t.promotion.checked),o.Y8G("disabled",t.promotion.invitedApproved||t.promotion.invitedPending)}}function A(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",57),o.EFF(1," La agencia tiene acceso a esta promoci\xf3n "),o.k0s(),o.j41(2,"button",58),o.bIt("click",function(){o.eBV(t);const e=o.XpG(2);return o.Njj(e.onRemoveAgencyAccessToPromotion(e.promotion))}),o.nrm(3,"i",59),o.EFF(4," Dejar de compartir "),o.k0s()}}function $(n,l){1&n&&(o.j41(0,"div",56),o.EFF(1," Invitaci\xf3n enviada, pendiente de aprobaci\xf3n "),o.k0s())}function Y(n,l){if(1&n){const t=o.RV6();o.j41(0,"div",49),o.bIt("click",function(e){o.eBV(t);const r=o.XpG();return o.Njj(r.onItemClick(e))}),o.DNE(1,G,3,2,"div",25),o.j41(2,"div",50)(3,"div",51),o.nrm(4,"img",8),o.k0s(),o.j41(5,"div",52)(6,"div",53),o.EFF(7),o.k0s(),o.j41(8,"div",54),o.EFF(9),o.k0s()()(),o.j41(10,"div",55),o.DNE(11,A,5,0)(12,$,2,0,"div",56),o.k0s()()}if(2&n){const t=o.XpG();o.Y8G("ngClass",o.eq3(8,f,null==t.promotion?null:t.promotion.checked)),o.R7$(),o.vxM(t.hideCheckbox?-1:1),o.R7$(2),o.Y8G("ngClass",o.eq3(10,k,t.isSmall)),o.R7$(),o.Y8G("src",(null==t.promotion||null==t.promotion.promotionFiles?null:t.promotion.promotionFiles.length)>0?null==t.promotion?null:t.promotion.promotionFiles[0].url:"assets/images/building.png",o.B4B),o.R7$(3),o.SpI(" ",null==t.promotion?null:t.promotion.projectName," "),o.R7$(2),o.Lme(" ",null==t.promotion?null:t.promotion.city,", ",null==t.promotion?null:t.promotion.province," "),o.R7$(2),o.vxM(null!=t.promotion&&t.promotion.invitedApproved?11:null!=t.promotion&&t.promotion.invitedPending?12:-1)}}let S=(()=>{var n;class l{constructor(i,e,r){this.router=i,this.utils=e,this.state=r,this.isSmall=!1,this.hideCheckbox=!1,this.context="page",this.togglePromotionCheckbox=new o.bkB,this.itemClicked=new o.bkB,this.availableProperties=[],this.rangeOfPropertiesPrices={min:0,max:0},this.rangeOfPropertiesRooms={min:0,max:0}}ngOnInit(){var i,e,r;this.getState(),this.promotion&&(this.availableProperties=null===(i=this.promotion)||void 0===i||null===(i=i.properties)||void 0===i?void 0:i.filter(P=>"available"===(null==P?void 0:P.availabilityStatus)),this.rangeOfPropertiesPrices=this.utils.calculateRangeOfPropertiesPrices(null===(e=this.promotion)||void 0===e?void 0:e.properties),this.rangeOfPropertiesRooms=this.utils.calculateRangeOfPropertiesRooms(null===(r=this.promotion)||void 0===r?void 0:r.properties)),this.getCheckHasAvailableProperty()}getCheckHasAvailableProperty(){var i;let e=!1;return null===(i=this.promotion)||void 0===i||null===(i=i.properties)||void 0===i||i.forEach(r=>{"available"===r.availabilityStatus&&(e=!0)}),e}getState(){this.state.getState().subscribe(i=>{this.currentUser=i.user})}onTogglePromotionCheckbox(i){i.stopPropagation(),this.togglePromotionCheckbox.emit()}onNavigateToPromotion(i){this.isSmall||this.router.navigate([`/promotions/${this.promotion.id}`])}onItemClick(i){"modal"===this.context?this.itemClicked.emit({from:"modal",promotion:this.promotion}):!this.isSmall&&"invite-agency"!==this.context&&this.router.navigate([`/promotions/${this.promotion.id}`])}onRemoveAgencyAccessToPromotion(i){console.log("onRemoveAgencyAccessToPromotion",i)}onRedirectPromoter(i,e){var r;i.stopPropagation(),"agency"===(null===(r=this.currentUser)||void 0===r?void 0:r.accountType)?this.utils.redirectToPromoter(e):this.router.navigate(["/promoters/mine"])}}return(n=l).\u0275fac=function(i){return new(i||n)(o.rXU(_.Ix),o.rXU(C.T),o.rXU(c.c))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-card-promotion"]],inputs:{promotion:"promotion",isSkeleton:"isSkeleton",isSmall:"isSmall",hideCheckbox:"hideCheckbox",context:"context"},outputs:{togglePromotionCheckbox:"togglePromotionCheckbox",itemClicked:"itemClicked"},decls:2,vars:2,consts:[[1,"crm-card-promotion",3,"ngClass"],["class","promotion-card",3,"ngClass","click",4,"ngIf"],["class","promotion-card promotion-card--skeleton",4,"ngIf"],[1,"promotion-card",3,"click","ngClass"],[1,"promotion-card__content",2,"padding-bottom","0"],[1,"promotion-card__content"],[1,"promotion-card__image"],[1,"absolute","promotion-card__image_percent"],["alt","",3,"src"],[1,"promotion-card__title"],[3,"text","maxLength"],[1,"promotion-card__price"],[1,"promotion-card__details"],[1,"promotion-card__location"],[1,"promotion-card__type"],[1,"promotion-card__agent"],[1,"promotion-card__footer"],[1,"promotion-card__stats"],[2,"color","black"],[1,"promotion-card__status"],[1,"promotion-card__status-item"],["width","14","height","14","alt","",3,"src"],[1,"text-12","ml-5"],[1,"promotion-card__date"],[1,"d-flex","align-center"],[1,"crm-card-promotion-checkbox"],["width","22","height","22","alt","",3,"src"],[1,"ml-10","text-error","text-16"],[1,"ml-10","text-secondary","text-16"],[1,"crm-input-checkbox"],[3,"ngModelChange","click","ngModel","disabled"],[1,"ml-10","text-16","text-available"],[1,"d-flex","align-start"],[1,"cursor-pointer"],[1,"d-flex","align-start","text-12","text-reserved","ml-5","px-16","py-5","bg-olive-green","border-radius-100"],[1,"font-weight-500"],[1,"ml-5"],[1,"cursor-pointer",3,"click"],[1,"text-14","text-error","ml-5"],[1,"promotion-card","promotion-card--skeleton"],[3,"animated"],[2,"width","70%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","50%",3,"animated"],[2,"width","65%",3,"animated"],[2,"width","55%",3,"animated"],[2,"width","40px",3,"animated"],[2,"width","100px",3,"animated"],[2,"width","60px",3,"animated"],[1,"crm-card-promotion",3,"click","ngClass"],[1,"crm-card-promotion-left"],[1,"crm-card-promotion-left-img",3,"ngClass"],[1,"crm-card-promotion-left-texts"],[1,"crm-card-promotion-left-title"],[1,"crm-card-promotion-left-subtitle"],[1,"crm-block-info-horizontal"],[1,"crm-text","small","crm-text-red"],[1,"crm-text","small","crm-text-success"],[1,"crm-button-secondary","crm-button-secondary-red",3,"click"],[1,"fas","fa-times"]],template:function(i,e){1&i&&o.DNE(0,F,2,2)(1,Y,13,12,"div",0),2&i&&(o.vxM(e.isSmall?-1:0),o.R7$(),o.vxM(e.isSmall?1:-1))},dependencies:[m.YU,m.bT,s.BC,s.vS,p.eY,p.ds,p.hB,d.e,m.vh,u.D9,v.w],styles:[".promotion-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;border-radius:8px;overflow:hidden;height:100%;width:370px;max-width:370px;cursor:pointer}.promotion-card__image[_ngcontent-%COMP%]{position:relative;width:100%;height:190px;border-radius:12px;margin-bottom:16px;overflow:hidden}.promotion-card__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-height:190px;object-fit:cover;transition:transform .2s}.promotion-card__image_percent[_ngcontent-%COMP%]{bottom:10px;left:10px;color:var(--crm-white-color);width:40px;height:40px;background:#0006;border:1px solid var(--crm-white-color);text-align:center;vertical-align:baseline;padding-top:10px;font-size:14px;border-radius:100%}.promotion-card__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:16px 24px;flex-grow:1}.promotion-card__title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--crm-black-color);margin:0 0 4px;line-height:1.3}.promotion-card__price[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--crm-black-color);margin:0 0 16px;padding:0}.promotion-card__details[_ngcontent-%COMP%]{margin-bottom:16px}.promotion-card__details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:4px 0;font-size:12px;color:#686868}.promotion-card__location[_ngcontent-%COMP%]{font-weight:500}.promotion-card__footer[_ngcontent-%COMP%]{margin-top:auto;padding-top:12px;border-top:1px solid #eaeaea}.promotion-card__stats[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#686868;margin-bottom:8px}.promotion-card__status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px}.promotion-card__status-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:13px;color:#000}.promotion-card__status-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.promotion-card__date[_ngcontent-%COMP%]{font-size:13px;display:flex;align-items:center;gap:4px;color:#000}.promotion-card--skeleton[_ngcontent-%COMP%]{pointer-events:none}.promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__image[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:100%;width:100%}.promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__title[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__price[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__details[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%], .promotion-card--skeleton[_ngcontent-%COMP%]   .promotion-card__footer[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{height:16px;margin-bottom:8px}.promotion-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px}.promotion-grid__title[_ngcontent-%COMP%]{grid-column:1/-1;font-size:24px;font-weight:600;margin-bottom:24px;color:#333}@media (max-width: 1200px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 992px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 576px){.promotion-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.promotion-card__footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.promotion-card__status[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]}),l})()},7991:(h,g,a)=>{a.d(g,{S:()=>p});var o=a(177),_=a(9417),C=a(9465),c=a(8147),m=a(9662),s=a(3953);let p=(()=>{var d;class u{}return(d=u).\u0275fac=function(x){return new(x||d)},d.\u0275mod=s.$C({type:d}),d.\u0275inj=s.G2t({imports:[o.MD,_.YN,_.X1,C.bv,c.h,m.Y]}),u})()},9662:(h,g,a)=>{a.d(g,{Y:()=>C});var o=a(177),_=a(3953);let C=(()=>{var c;class m{}return(c=m).\u0275fac=function(p){return new(p||c)},c.\u0275mod=_.$C({type:c}),c.\u0275inj=_.G2t({imports:[o.MD]}),m})()}}]);