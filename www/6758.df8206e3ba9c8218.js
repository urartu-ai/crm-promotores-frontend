"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6758],{1296:(M,y,d)=>{d.d(y,{a:()=>u});var p=d(3953);let u=(()=>{var f;class h{constructor(){}convertDataToTableRows(e,v){const C=[];let _=0;for(let k of e){const s={rowIndex:_,rawObject:k,checked:!1,rowId:(null==k?void 0:k.id)||(null==k?void 0:k._id)||_,cells:{}};for(let l of v.columns)s.cells[null==l?void 0:l.key]=null!=l&&l.fn?{value:l.fn(k),type:(null==l?void 0:l.type)||"text"}:{value:this.getNestedValue(k,null==l?void 0:l.key)||"",type:(null==l?void 0:l.type)||"text"},null!=l&&l.extraString&&(s.cells[null==l?void 0:l.key].value=s.cells[null==l?void 0:l.key].value+(null==l?void 0:l.extraString),s.cells[null==l?void 0:l.key].extraString=null==l?void 0:l.extraString);C.push(s),_++}return C}getNestedValue(e,v){return v.split(".").reduce((C,_)=>C?C[_]:void 0,e)}setRowsChipsFromOperations(e){return e.map(v=>{var C;return v.cells["currentPipelineStep.text"].chipColor=(null===(C=v.rawObject.currentPipelineStep)||void 0===C?void 0:C.color)||"",v.cells["currentPipelineStep.text"].type="chip",v})}setRowsChipsFromRegistersList(e){return e.map(v=>(v.cells.status.type="chip","rejected"===v.cells.status.value&&(v.cells.status.chipColor="#D92D20"),"accepted"===v.cells.status.value&&(v.cells.status.chipColor="#00C36A"),v))}}return(f=h).\u0275fac=function(e){return new(e||f)},f.\u0275prov=p.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),h})()},1129:(M,y,d)=>{d.d(y,{Z:()=>b});var p=d(3953),u=d(6069),f=d(1982);function h(e,v){if(1&e){const C=p.RV6();p.j41(0,"app-country-selector-popover",4),p.bIt("countrySelected",function(F){p.eBV(C);const k=p.XpG();return p.Njj(k.selectCountry(F))})("closePopover",function(){p.eBV(C);const F=p.XpG();return p.Njj(F.dropdownOpen=!1)}),p.k0s()}2&e&&p.Y8G("showCountryCode",!0)}let b=(()=>{var e;class v{constructor(){this.emitCountrySelected=new p.bkB,this.countries=u.X,this.selectedCountry=u.X[0],this.dropdownOpen=!1}ngOnChanges(){const _=this.extractCountryPhoneCodeFromPhoneNumber(this.selectedPhoneNumber);_!==this.extractCountryPhoneCodeFromPhoneNumber(this.selectedCountry.phoneCode)&&this.selectCountryByPhoneCode(_)}toggleDropdown(_){_.stopPropagation(),this.dropdownOpen=!this.dropdownOpen}selectCountry(_){_.event.stopPropagation(),this.selectedCountry=_.country,this.emitCountrySelected.emit(_.country),this.dropdownOpen=!1}selectCountryByPhoneCode(_){const F=this.countries.find(k=>k.phoneCode===_);F&&(this.selectedCountry=F,this.emitCountrySelected.emit(F))}extractCountryPhoneCodeFromPhoneNumber(_){return null==_?void 0:_.split(" ")[0]}}return(e=v).\u0275fac=function(_){return new(_||e)},e.\u0275cmp=p.VBU({type:e,selectors:[["app-flag-country-selector"]],inputs:{selectedPhoneNumber:"selectedPhoneNumber"},outputs:{emitCountrySelected:"emitCountrySelected"},features:[p.OA$],decls:5,vars:3,consts:[["tabindex","0",1,"flag-country-selector-container",3,"click"],[1,"selected-country"],[1,"fas","fa-caret-down","dropdown-arrow"],[3,"showCountryCode"],[3,"countrySelected","closePopover","showCountryCode"]],template:function(_,F){1&_&&(p.j41(0,"div",0),p.bIt("click",function(s){return F.toggleDropdown(s)}),p.j41(1,"div",1),p.nrm(2,"span")(3,"i",2),p.k0s(),p.DNE(4,h,1,1,"app-country-selector-popover",3),p.k0s()),2&_&&(p.R7$(2),p.HbH(null==F.selectedCountry?null:F.selectedCountry.flagClass),p.R7$(2),p.vxM(F.dropdownOpen?4:-1))},dependencies:[f.u],styles:[".flag-country-selector-container[_ngcontent-%COMP%]{position:relative;width:50px;cursor:pointer;color:#000}.selected-country[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px;width:50px}.dropdown-arrow[_ngcontent-%COMP%]{margin-left:8px}.dropdown-options[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:200px;z-index:9999;background-color:#fff;border:1px solid #ccc;padding:8px 0;border-radius:12px;border:1px solid var(--crm-border-light-color);color:#000;max-height:150px;overflow-y:auto}.option[_ngcontent-%COMP%]{padding:8px;display:flex;align-items:center;cursor:pointer;font-size:14px}.option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;display:inline-block;margin-right:8px}.option[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.flag-country-selector-container[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{color:#000}.selected-country[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;width:18px;height:18px}"]}),v})()},6812:(M,y,d)=>{d.d(y,{u:()=>b});var p=d(177),u=d(9417),f=d(7754),h=d(3953);let b=(()=>{var e;class v{}return(e=v).\u0275fac=function(_){return new(_||e)},e.\u0275mod=h.$C({type:e}),e.\u0275inj=h.G2t({imports:[p.MD,u.YN,f.X]}),v})()},7754:(M,y,d)=>{d.d(y,{X:()=>b});var p=d(177),u=d(9417),f=d(9465),h=d(3953);let b=(()=>{var e;class v{}return(e=v).\u0275fac=function(_){return new(_||e)},e.\u0275mod=h.$C({type:e}),e.\u0275inj=h.G2t({imports:[p.MD,u.YN,f.bv]}),v})()},4821:(M,y,d)=>{d.d(y,{e:()=>u});var p=d(3953);let u=(()=>{var f;class h{constructor(e){this.renderer=e,this.text="",this.maxLength=20,this.tooltipClass="",this.tooltipElement=null}ngOnInit(){}get trimmedText(){return this.text?this.text.length>this.maxLength?this.text.slice(0,this.maxLength)+"...":this.text:""}showTooltip(e){this.text.length<=this.maxLength||(this.tooltipElement=this.renderer.createElement("div"),this.tooltipElement.innerText=this.text,this.renderer.addClass(this.tooltipElement,"custom-tooltip"),this.tooltipClass&&this.tooltipClass.split(" ").forEach(C=>{C.trim()&&this.renderer.addClass(this.tooltipElement,C.trim())}),this.renderer.setStyle(this.tooltipElement,"position","fixed"),this.renderer.setStyle(this.tooltipElement,"top",e.clientY-30+"px"),this.renderer.setStyle(this.tooltipElement,"left",`${e.clientX}px`),this.renderer.setStyle(this.tooltipElement,"z-index","9999"),this.renderer.appendChild(document.body,this.tooltipElement))}hideTooltip(){this.tooltipElement&&(this.renderer.removeChild(document.body,this.tooltipElement),this.tooltipElement=null)}}return(f=h).\u0275fac=function(e){return new(e||f)(p.rXU(p.sFG))},f.\u0275cmp=p.VBU({type:f,selectors:[["app-tooltip-text"]],inputs:{text:"text",maxLength:"maxLength",tooltipClass:"tooltipClass"},standalone:!0,features:[p.aNF],decls:2,vars:1,consts:[[1,"text",3,"mouseenter","mouseleave"]],template:function(e,v){1&e&&(p.j41(0,"span",0),p.bIt("mouseenter",function(_){return v.showTooltip(_)})("mouseleave",function(){return v.hideTooltip()}),p.EFF(1),p.k0s()),2&e&&(p.R7$(),p.SpI(" ",v.trimmedText,"\n"))}}),h})()},2098:(M,y,d)=>{d.r(y),d.d(y,{VentaOperationProcessPageModule:()=>je});var p=d(177),u=d(9417),f=d(9465),h=d(5188),b=d(467),e=d(3953),v=d(6039),C=d(8397);function _(o,c){if(1&o){const r=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(r);const n=e.XpG().$implicit,i=e.XpG();return e.Njj(i.onSelectPromotion(n))}),e.EFF(1," Seleccionada "),e.k0s()}}function F(o,c){if(1&o){const r=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(r);const n=e.XpG().$implicit,i=e.XpG();return e.Njj(i.onSelectPromotion(n))}),e.EFF(1," Seleccionar "),e.k0s()}}function k(o,c){if(1&o&&(e.j41(0,"div",14)(1,"div",15),e.EFF(2),e.k0s(),e.j41(3,"div",16),e.EFF(4),e.k0s(),e.j41(5,"div",17),e.DNE(6,_,2,0,"button",18)(7,F,2,0,"button",19),e.k0s()()),2&o){const r=c.$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",r.projectName," "),e.R7$(2),e.Lme(" ",r.availableProperties.length," / ",r.properties.length," "),e.R7$(2),e.vxM((null==t.selectedPromotion?null:t.selectedPromotion.id)===r.id?6:7)}}let s=(()=>{var o;class c{constructor(t){this.api=t,this.selectPromotion=new e.bkB,this.promotions=[],this.selectedPromotion=null,this.searchTerm=""}ngOnInit(){this.getAllPromotions()}getAllPromotions(){var t=this;return(0,b.A)(function*(){try{const n={page:0,itemsPerPage:500},i=yield t.api.getPromotions({},null,n,{properties:{apply:!0,filter:null,onlyCount:!1},promotionFiles:{apply:!0,filter:null,onlyCount:!1},promoter:{apply:!0,filter:null,onlyCount:!1}});null!=i&&i.success?(t.promotions=i.success.data,t.promotions.forEach(a=>{var P;a.availableProperties=null===(P=a.properties)||void 0===P?void 0:P.filter(S=>"available"===S.availabilityStatus)}),console.log("All Promotions:",t.promotions)):console.error("Error fetching promotions:",null==i?void 0:i.error)}catch(n){console.error("Error in getAllPromotions:",n)}})()}get filteredPromotions(){return this.searchTerm?this.promotions.filter(t=>{var n;return null===(n=t.projectName)||void 0===n?void 0:n.toLowerCase().includes(this.searchTerm.toLowerCase())}):this.promotions}onSelectPromotion(t){this.selectPromotion.emit(t),this.selectedPromotion=t}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(v.i))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venta-select-promotion"]],outputs:{selectPromotion:"selectPromotion"},decls:19,vars:3,consts:[[1,"venta-component"],[1,"title"],[1,"content"],[1,"crm-input",2,"max-width","300px","margin-bottom","16px"],[1,"crm-input-input","crm-input-input-searchbar"],[1,"fas","fa-search"],["type","text","placeholder","Buscar promoci\xf3n...",3,"ngModelChange","ngModel"],[1,"promotions-table"],[1,"promotions-table-header"],[1,"promotions-table-header-title"],[1,"promotions-table-header-availability"],[1,"promotions-table-header-actions"],["class","promotions-table-row",4,"ngFor","ngForOf"],[1,"promotions-table-footer"],[1,"promotions-table-row"],[1,"promotions-table-row-title"],[1,"promotions-table-row-availability"],[1,"promotions-table-row-actions"],["disabled","",1,"crm-button"],[1,"crm-button"],["disabled","",1,"crm-button",3,"click"],[1,"crm-button",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," 1. Promoci\xf3n "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4),e.nrm(6,"i",5),e.j41(7,"input",6),e.mxI("ngModelChange",function(a){return e.DH7(n.searchTerm,a)||(n.searchTerm=a),a}),e.k0s()()(),e.j41(8,"div",7)(9,"div",8)(10,"div",9),e.EFF(11,"Promoci\xf3n"),e.k0s(),e.j41(12,"div",10),e.EFF(13,"Viviendas disponibles"),e.k0s(),e.j41(14,"div",11),e.EFF(15,"Acciones"),e.k0s()(),e.DNE(16,k,8,4,"div",12),e.k0s(),e.j41(17,"div",13),e.EFF(18),e.k0s()()()),2&t&&(e.R7$(7),e.R50("ngModel",n.searchTerm),e.R7$(9),e.Y8G("ngForOf",n.filteredPromotions),e.R7$(2),e.SpI(" Total promociones: ",n.filteredPromotions.length," "))},dependencies:[p.Sq,u.me,u.BC,u.vS]}),c})();var l=d(7376),m=d(1296),g=d(6552),x=d(1880);function O(o,c){if(1&o){const r=e.RV6();e.qex(0),e.j41(1,"div",4),e.EFF(2),e.k0s(),e.j41(3,"app-table",5),e.bIt("rowClicked",function(n){e.eBV(r);const i=e.XpG();return e.Njj(i.onRowClicked(n))}),e.k0s(),e.nrm(4,"div",6),e.bVm()}if(2&o){const r=c.$implicit,t=c.index;e.R7$(2),e.SpI(" ",r.name||"Bloque "+(r.index||t+1)," "),e.R7$(),e.Y8G("table",r.tableConfig)}}let R=(()=>{var o;class c{constructor(t,n,i){this.tableService=t,this.utils=n,this.toastService=i,this.selectProperty=new e.bkB,this.blocks=[],this.allColumnsKeysSelected=["externalReference","reference","m2useful","m2total","terrace","plot","bedrooms","bathrooms","pool","storage","parking","price"],this.tableConfig={uniqueId:"table-1",showSelectors:!1,editCellsMode:!1,columns:[{key:"externalReference",label:"Ref. externa",size:"medium",editMode:{inputType:"text"}},{key:"reference",label:"Identificador",size:"medium",editMode:{inputType:"text"}},{key:"m2useful",label:"M2 \xfatiles",size:"small",extraString:" m\xb2",fn:a=>null!=a&&a.totalMeasures_squareMetersUseful?a.totalMeasures_squareMetersUseful+" m\xb2":""},{key:"m2total",label:"M2 total",size:"small",extraString:" m\xb2",fn:a=>null!=a&&a.totalMeasures_squareMetersBuilt?a.totalMeasures_squareMetersBuilt+" m\xb2":""},{key:"terrace",label:"Terraza",size:"small",fn:a=>{const D=(a.totalMeasures_squareMetersCoveredTerraces||0)+(a.totalMeasures_squareMetersUncoveredTerraces||0);return D?D+" m\xb2":""}},{key:"plot",label:"Parcela",size:"small",extraString:" m\xb2",fn:a=>null!=a&&a.totalMeasures_squareMetersPatch?a.totalMeasures_squareMetersPatch+" m\xb2":""},{key:"bedrooms",label:"Dorm.",size:"small"},{key:"bathrooms",label:"Ba\xf1os",size:"small"},{key:"pool",label:"Piscina",size:"small",fn:a=>a.f_pool_comunitaria?"Comunitaria":a.f_pool_privada?"Privada":"No"},{key:"storage",label:"Trastero",size:"small",fn:a=>a.fcustom_trastero?a.fcustom_trasteroPrice?this.utils.transformThousandSeparator(a.fcustom_trasteroPrice)+" \u20ac":a.fcustom_trasteroIncludedInPrice?"Incluido":"S\xed":"No"},{key:"parking",label:"Parking",size:"small",fn:a=>{let P=a.fcustom_parking?"S\xed":"No";return a.fcustom_parkingPrice&&(P=this.utils.transformThousandSeparator(a.fcustom_parkingPrice)+" \u20ac"),a.fcustom_parkingIncludedInPrice&&(P="Incluido"),a.fcustom_parkingComunitario&&(P+=" (Comunitario)"),P}},{key:"price",label:"Precio",size:"small",fn:a=>null!=a&&a.price?this.utils.transformThousandSeparator(a.price)+" \u20ac":""}],rows:[]}}ngOnInit(){}set selectedPromotion(t){this.promotion=t,this.getData()}getData(){var t;if(this.promotion){this.allColumnsKeysSelected=(null===(t=this.promotion)||void 0===t?void 0:t.tableColumnsKeysSelected)||this.allColumnsKeysSelected,this.blocks=this.promotion.promotionBlocks||[];for(let n=0;n<this.blocks.length;n++){const i=this.blocks[n];!i.properties||0===i.properties.length||(i.tableConfig=l.cloneDeep(this.tableConfig),i.tableConfig.rows=this.tableService.convertDataToTableRows(l.cloneDeep(i.properties),l.cloneDeep(i.tableConfig)),i.tableConfig.rows=this.addBackgroundColorsToTableRows(i.tableConfig.rows))}}}addBackgroundColorsToTableRows(t){for(let n=0;n<t.length;n++)switch(t[n].rawObject.availabilityStatus){case"available":t[n].style={backgroundColor:"success"};break;case"sold":t[n].style={backgroundColor:"red"};break;case"reserved":t[n].style={backgroundColor:"warning"};break;default:t[n].style={backgroundColor:"blocked"}}return t}onRowClicked(t){const n=t.rawObject;console.log("Row clicked, property:",n),this.selectProperty.emit(n)}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(m.a),e.rXU(g.T),e.rXU(C.f))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venta-select-property"]],outputs:{selectProperty:"selectProperty"},decls:5,vars:1,consts:[[1,"venta-component"],[1,"title"],[1,"content"],[4,"ngFor","ngForOf"],[1,"block-title"],[2,"margin-bottom","16px",3,"rowClicked","table"],[2,"margin-bottom","16px"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," 2. Vivienda principal "),e.k0s(),e.j41(3,"div",2),e.DNE(4,O,5,2,"ng-container",3),e.k0s()()),2&t&&(e.R7$(4),e.Y8G("ngForOf",n.blocks))},dependencies:[p.Sq,x.O],styles:[".block-title[_ngcontent-%COMP%]{margin-bottom:16px;font-size:14px;font-weight:500}"]}),c})();var E=d(4558);function V(o,c){if(1&o&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&o){const r=c.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r)}}function w(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.editingPrice=!0)}),e.EFF(1),e.nI1(2,"thousandSeparator"),e.nrm(3,"i",23),e.k0s()}if(2&o){const r=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,r.priceSelected.priceWithoutIva)," \u20ac ")}}function B(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",24)(1,"input",25),e.mxI("ngModelChange",function(n){e.eBV(r);const i=e.XpG();return e.DH7(i.priceSelected.priceWithoutIva,n)||(i.priceSelected.priceWithoutIva=n),e.Njj(n)}),e.k0s(),e.j41(2,"i",26),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.onPriceConfirm())}),e.k0s()()}if(2&o){const r=e.XpG();e.R7$(),e.R50("ngModel",r.priceSelected.priceWithoutIva)}}let A=(()=>{var o;class c{constructor(){this.selectPrice=new e.bkB,this.priceSelected={priceWithoutIva:0,priceWithIva:0,finalPrice:0,iva:10},this.taxRates=["0%","10%","21%"],this.selectedTaxRate="10%",this.editingPrice=!1}set selectedProperty(t){this.property=t,this.priceSelected.priceWithoutIva=(null==t?void 0:t.price)||0,this.updateCalculations()}ngOnInit(){this.updateCalculations()}onTaxRateChange(){this.updateCalculations()}onPriceConfirm(){this.updateCalculations(),this.editingPrice=!1}updateCalculations(){const t=parseFloat(this.selectedTaxRate);this.priceSelected.iva=isNaN(t)?0:t,this.priceSelected.priceWithIva=this.priceSelected.priceWithoutIva*(this.priceSelected.iva/100),this.priceSelected.finalPrice=this.priceSelected.priceWithoutIva+this.priceSelected.priceWithIva}goNextSection(){this.selectPrice.emit(this.priceSelected),console.log("Go to the next section...")}}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venta-select-price"]],outputs:{selectPrice:"selectPrice"},decls:48,vars:17,consts:[[1,"venta-component"],[1,"title"],[1,"content"],[1,"crm-input",2,"max-width","200px","margin-bottom","24px"],[1,"crm-input-label"],[1,"crm-input-input","crm-input-input-searchbar-square"],[3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"title",2,"margin-bottom","8px"],[1,"price-table-header",2,"padding","0px 16px"],[1,"price-table-header-cell"],[1,"price-table"],[1,"price-table-row"],[1,"price-table-cell"],[1,"price-table-cell","editable-cell"],["class","editable-price-display",3,"click",4,"ngIf"],["class","editable-price-edit",4,"ngIf"],[1,"price-table-footer"],[1,"price-table-footer-cell"],[1,"crm-block-buttons-right",2,"margin-top","16px"],[1,"crm-button",3,"click"],[3,"value"],[1,"editable-price-display",3,"click"],[1,"fas","fa-pencil",2,"color","rgb(130, 130, 130)"],[1,"editable-price-edit"],["type","number",3,"ngModelChange","ngModel"],[1,"fas","fa-check",2,"color","rgb(11, 169, 11)",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," 3. Por precio "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4),e.EFF(6," Impuestos IVA/IT "),e.k0s(),e.j41(7,"div",5)(8,"select",6),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedTaxRate,a)||(n.selectedTaxRate=a),a}),e.bIt("change",function(){return n.onTaxRateChange()}),e.DNE(9,V,2,2,"option",7),e.k0s()()(),e.j41(10,"div",8),e.EFF(11," Tabla de precios "),e.k0s(),e.j41(12,"div",9)(13,"div",10),e.EFF(14,"Vivienda"),e.k0s(),e.j41(15,"div",10),e.EFF(16,"Precio"),e.k0s(),e.j41(17,"div",10),e.EFF(18,"IVA/ITP"),e.k0s(),e.j41(19,"div",10),e.EFF(20,"PVP"),e.k0s()(),e.j41(21,"div",11)(22,"div",12)(23,"div",13),e.EFF(24," 1A "),e.k0s(),e.j41(25,"div",14),e.DNE(26,w,4,3,"div",15)(27,B,3,1,"div",16),e.k0s(),e.j41(28,"div",13),e.EFF(29),e.k0s(),e.j41(30,"div",13),e.EFF(31),e.nI1(32,"thousandSeparator"),e.k0s()(),e.j41(33,"div",17)(34,"div",18),e.EFF(35," Total "),e.k0s(),e.j41(36,"div",18),e.EFF(37),e.nI1(38,"thousandSeparator"),e.k0s(),e.j41(39,"div",18),e.EFF(40),e.nI1(41,"thousandSeparator"),e.k0s(),e.j41(42,"div",18),e.EFF(43),e.nI1(44,"thousandSeparator"),e.k0s()()(),e.j41(45,"div",19)(46,"button",20),e.bIt("click",function(){return n.goNextSection()}),e.EFF(47," Ir a la siguiente secci\xf3n "),e.k0s()()()()),2&t&&(e.R7$(8),e.R50("ngModel",n.selectedTaxRate),e.R7$(),e.Y8G("ngForOf",n.taxRates),e.R7$(17),e.Y8G("ngIf",!n.editingPrice),e.R7$(),e.Y8G("ngIf",n.editingPrice),e.R7$(2),e.SpI(" ",n.selectedTaxRate," "),e.R7$(2),e.SpI(" ",e.bMT(32,9,n.priceSelected.finalPrice)," \u20ac "),e.R7$(6),e.SpI(" ",e.bMT(38,11,n.priceSelected.priceWithoutIva)," \u20ac "),e.R7$(3),e.SpI(" ",e.bMT(41,13,n.priceSelected.priceWithIva)," \u20ac "),e.R7$(3),e.SpI(" ",e.bMT(44,15,n.priceSelected.finalPrice)," \u20ac "))},dependencies:[p.Sq,p.bT,u.xH,u.y7,u.me,u.Q0,u.wz,u.BC,u.vS,E.w],styles:[".venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .crm-input[_ngcontent-%COMP%]{margin-bottom:16px}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table-header[_ngcontent-%COMP%]{display:flex;align-items:center}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table-header[_ngcontent-%COMP%]   .price-table-header-cell[_ngcontent-%COMP%]{flex:1;font-size:14px;padding:8px}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]{border-radius:12px;padding:0 16px;background:#f9f9f9}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%], .venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-footer[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 0;border-bottom:1px solid var(--crm-border-light-color)}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-footer[_ngcontent-%COMP%]{font-weight:500;border:none}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-cell[_ngcontent-%COMP%], .venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-footer-cell[_ngcontent-%COMP%]{flex:1;font-size:14px;padding:8px}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]   .editable-cell[_ngcontent-%COMP%]{display:flex;align-items:center}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]   .editable-price-display[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;gap:8px;align-items:center}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]   .editable-price-display[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:13px;color:var(--crm-text-color)}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]   .editable-price-edit[_ngcontent-%COMP%]{display:inline-flex;gap:8px;align-items:center}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]   .editable-price-edit[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:120px;background:#fff;outline:none;border:1px solid var(--crm-border-light-color);border-radius:8px;padding:4px 8px}.venta-component[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .price-table[_ngcontent-%COMP%]   .price-table-row[_ngcontent-%COMP%]   .editable-price-edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--crm-text-color);cursor:pointer}"]}),c})();const N=o=>({"text-error":o}),Y=o=>({"border-error":o});let X=(()=>{var o;class c{constructor(){this.selectDocumentData=new e.bkB,this.reservationAmountError=!1,this.formData={contractType:"propio",signatureType:"papel",reservationAmount:null}}ngOnInit(){}onContinue(){console.log("Form data:",this.formData),this.reservationAmountError=!1,this.formData.reservationAmount?this.selectDocumentData.emit(this.formData):this.reservationAmountError=!0}}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venta-select-document"]],outputs:{selectDocumentData:"selectDocumentData"},decls:44,vars:9,consts:[[1,"venta-component"],[1,"title"],[1,"content"],[1,"crm-input",2,"margin-bottom","16px"],[1,"crm-text"],[3,"ngModelChange","ngModel"],[1,"crm-input-radio"],["value","byvaro"],[1,"crm-input-radio-label"],["value","propio"],[2,"border","none","border-bottom","1px solid #e5e5e5","margin","24px 0"],["value","electronica"],["value","papel"],[1,"title","mb8"],[1,"crm-text","small","light","mb16"],[1,"crm-input",2,"margin-bottom","24px","max-width","300px"],[1,"crm-input-label",3,"ngClass"],[1,"crm-input-input",3,"ngClass"],["type","number","placeholder","Por ejemplo 3000\u20ac",3,"ngModelChange","ngModel"],[1,"crm-block-buttons-right"],[1,"crm-button",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2," 4. Documento de reserva "),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"div",4),e.EFF(6," Redacci\xf3n del contrato: "),e.k0s(),e.j41(7,"ion-radio-group",5),e.mxI("ngModelChange",function(a){return e.DH7(n.formData.contractType,a)||(n.formData.contractType=a),a}),e.j41(8,"div",6),e.nrm(9,"ion-radio",7),e.j41(10,"div",8),e.EFF(11," Contrato redactado en Byvaro "),e.k0s()(),e.j41(12,"div",6),e.nrm(13,"ion-radio",9),e.j41(14,"div",8),e.EFF(15," Contrato propio "),e.k0s()()()(),e.nrm(16,"hr",10),e.j41(17,"div",3)(18,"div",4),e.EFF(19," T\xe9rminos y condiciones de la firma: "),e.k0s(),e.j41(20,"ion-radio-group",5),e.mxI("ngModelChange",function(a){return e.DH7(n.formData.signatureType,a)||(n.formData.signatureType=a),a}),e.j41(21,"div",6),e.nrm(22,"ion-radio",11),e.j41(23,"div",8),e.EFF(24," Firma electr\xf3nica "),e.k0s()(),e.j41(25,"div",6),e.nrm(26,"ion-radio",12),e.j41(27,"div",8),e.EFF(28," Firma en papel "),e.k0s()()()(),e.nrm(29,"hr",10),e.j41(30,"div",13),e.EFF(31," Cantidad que debe pagar el cliente para reservar: "),e.k0s(),e.j41(32,"div",14),e.EFF(33," Este campo puede heredar autom\xe1ticamente el valor definido en la configuraci\xf3n de la promoci\xf3n."),e.nrm(34,"br"),e.EFF(35," Por favor, rev\xedsalo antes de continuar. "),e.k0s(),e.j41(36,"div",15)(37,"div",16),e.EFF(38," Cantidad de reserva (\u20ac) "),e.k0s(),e.j41(39,"div",17)(40,"input",18),e.mxI("ngModelChange",function(a){return e.DH7(n.formData.reservationAmount,a)||(n.formData.reservationAmount=a),a}),e.k0s()()(),e.j41(41,"div",19)(42,"button",20),e.bIt("click",function(){return n.onContinue()}),e.EFF(43," Continuar la reserva "),e.k0s()()()()),2&t&&(e.R7$(7),e.R50("ngModel",n.formData.contractType),e.R7$(13),e.R50("ngModel",n.formData.signatureType),e.R7$(17),e.Y8G("ngClass",e.eq3(5,N,n.reservationAmountError)),e.R7$(2),e.Y8G("ngClass",e.eq3(7,Y,n.reservationAmountError)),e.R7$(),e.R50("ngModel",n.formData.reservationAmount))},dependencies:[p.YU,u.me,u.Q0,u.BC,u.vS,f.KO,f.f0,f.Je],styles:[".crm-text[_ngcontent-%COMP%]{font-style:normal;margin-bottom:8px}.crm-input-radio[_ngcontent-%COMP%]{margin-bottom:8px}ion-radio-group[_ngcontent-%COMP%]{display:flex;gap:16px}.mb8[_ngcontent-%COMP%]{margin-bottom:8px}.mb16[_ngcontent-%COMP%]{margin-bottom:16px}"]}),c})();var U=d(8392),L=d(1129);const I=o=>({"crm-input-input-error":o});function W(o,c){1&o&&(e.j41(0,"div",24),e.EFF(1," Por favor, introduce un correo electr\xf3nico v\xe1lido "),e.k0s())}function z(o,c){1&o&&(e.j41(0,"div",24),e.EFF(1," El nombre es requerido "),e.k0s())}function K(o,c){1&o&&(e.j41(0,"div",24),e.EFF(1," La fecha de nacimiento es requerida "),e.k0s())}function H(o,c){1&o&&(e.j41(0,"div",24),e.EFF(1," El n\xfamero de tel\xe9fono es requerido "),e.k0s())}function J(o,c){1&o&&(e.j41(0,"div",24),e.EFF(1," El DNI o Pasaporte es requerido "),e.k0s())}let Z=(()=>{var o;class c{constructor(){}ngOnInit(){}isControlInvalid(t){const n=this.form.get(t);return!(!n||!n.invalid||!n.dirty&&!n.touched)}onSelectCountry(t){}onNextStep(){}}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.VBU({type:o,selectors:[["app-person-form"]],inputs:{form:"form"},decls:67,vars:19,consts:[["addressInput",""],[3,"ngSubmit","formGroup"],[1,"crm-input",2,"margin-bottom","8px"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Field","formControlName","email"],["class","crm-input-error",4,"ngIf"],[1,"crm-text","small","light",2,"margin-bottom","16px"],[1,"crm-input",2,"margin-bottom","16px"],[1,"d-flex","gap-16"],[1,"crm-input-radio"],["value","electronica"],[1,"crm-input-radio-label"],["value","papel"],["type","text","placeholder","ex: Juan","formControlName","name"],[1,"crm-input-input"],["type","date","formControlName","birthDate"],[1,"crm-input"],[1,"crm-input-input-and-icon"],[3,"emitCountrySelected","selectedPhoneNumber"],["type","text","placeholder","N\xfamero de tel\xe9fono","formControlName","phoneNumber"],[1,"crm-text","small","light",2,"margin-bottom","8px"],["type","text","placeholder","ex: 48500285A","formControlName","dni"],["type","text","formControlName","address","placeholder","Escribe la direcci\xf3n"],[1,"crm-input-error"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.onNextStep())}),e.j41(1,"div",2)(2,"div",3),e.EFF(3," Correo electr\xf3nico "),e.k0s(),e.j41(4,"div",4),e.nrm(5,"input",5),e.k0s(),e.DNE(6,W,2,0,"div",6),e.k0s(),e.j41(7,"div",7),e.EFF(8," Por favor, compruebe que la direcci\xf3n de correo electr\xf3nico ingresada es correcta. "),e.k0s(),e.j41(9,"div",8)(10,"ion-radio-group",9)(11,"div",10),e.nrm(12,"ion-radio",11),e.j41(13,"div",12),e.EFF(14," Do\xf1a "),e.k0s()(),e.j41(15,"div",10),e.nrm(16,"ion-radio",13),e.j41(17,"div",12),e.EFF(18," Don "),e.k0s()()()(),e.j41(19,"div",8)(20,"div",3),e.EFF(21," Nombre y apellidos "),e.k0s(),e.j41(22,"div",4),e.nrm(23,"input",14),e.k0s(),e.DNE(24,z,2,0,"div",6),e.k0s(),e.j41(25,"div",8)(26,"div",3),e.EFF(27," Fecha de nacimiento "),e.k0s(),e.j41(28,"div",15),e.nrm(29,"input",16),e.k0s(),e.DNE(30,K,2,0,"div",6),e.k0s(),e.j41(31,"div",17)(32,"div",3),e.EFF(33," Phone number "),e.k0s(),e.j41(34,"div",18)(35,"div",4)(36,"app-flag-country-selector",19),e.bIt("emitCountrySelected",function(P){return e.eBV(i),e.Njj(n.onSelectCountry(P))}),e.k0s(),e.nrm(37,"input",20),e.k0s()(),e.DNE(38,H,2,0,"div",6),e.j41(39,"div",21),e.EFF(40," Por favor, compruebe que el n\xfamero de tel\xe9fono m\xf3vil ingresado es correcto. Ser\xe1 utilizado para la firma electr\xf3nica."),e.nrm(41,"br")(42,"br"),e.k0s()(),e.j41(43,"div",8)(44,"div",3),e.EFF(45," Dni / Pasaporte "),e.k0s(),e.j41(46,"div",4),e.nrm(47,"input",22),e.k0s(),e.DNE(48,J,2,0,"div",6),e.k0s(),e.j41(49,"div",8)(50,"div",3),e.EFF(51," Direcci\xf3n "),e.k0s(),e.j41(52,"div",15),e.nrm(53,"input",23,0),e.k0s()(),e.j41(55,"div",8)(56,"div",3),e.EFF(57," Identificaci\xf3n "),e.k0s(),e.j41(58,"ion-radio-group",9)(59,"div",10),e.nrm(60,"ion-radio",11),e.j41(61,"div",12),e.EFF(62," Casada "),e.k0s()(),e.j41(63,"div",10),e.nrm(64,"ion-radio",13),e.j41(65,"div",12),e.EFF(66," Otro "),e.k0s()()()()()}if(2&t){let i;e.Y8G("formGroup",n.form),e.R7$(4),e.Y8G("ngClass",e.eq3(11,I,n.isControlInvalid("email"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("email")),e.R7$(16),e.Y8G("ngClass",e.eq3(13,I,n.isControlInvalid("name"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("name")),e.R7$(6),e.Y8G("ngIf",n.isControlInvalid("birthDate")),e.R7$(5),e.Y8G("ngClass",e.eq3(15,I,n.isControlInvalid("phoneNumber"))),e.R7$(),e.Y8G("selectedPhoneNumber",null==(i=n.form.get("phoneNumber"))?null:i.value),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("phoneNumber")),e.R7$(8),e.Y8G("ngClass",e.eq3(17,I,n.isControlInvalid("dni"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("dni"))}},dependencies:[p.YU,p.bT,u.qT,u.me,u.BC,u.cb,f.KO,f.f0,f.Je,u.j4,u.JD,L.Z]}),c})();var G=d(8147);const q=["addressInput"],$=o=>({"background-color":o}),j=o=>({"crm-input-input-error":o});function Q(o,c){1&o&&e.nrm(0,"img",8),2&o&&e.Y8G("src","assets/icon/chevron-down-icon.svg",e.B4B)}function ee(o,c){1&o&&e.nrm(0,"img",8),2&o&&e.Y8G("src","assets/icon/chevron-up-icon.svg",e.B4B)}function te(o,c){if(1&o&&(e.j41(0,"div"),e.nrm(1,"app-person-form",17),e.k0s()),2&o){const r=e.XpG().index,t=e.XpG(2);e.R7$(),e.Y8G("form",t.getPersonForm(r))}}function ne(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",5)(1,"div",13)(2,"div",14),e.EFF(3),e.k0s(),e.j41(4,"div",15),e.bIt("click",function(){const n=e.eBV(r).index,i=e.XpG(2);return e.Njj(i.togglePersonForm(n))}),e.DNE(5,Q,1,1,"img",8)(6,ee,1,1,"img",8),e.k0s()(),e.DNE(7,te,2,1,"div",16),e.k0s()}if(2&o){const r=c.index,t=e.XpG(2);e.R7$(3),e.SpI("Comprador ",r+1,""),e.R7$(2),e.vxM(t.showForms[r]?5:6),e.R7$(2),e.Y8G("ngIf",t.showForms[r])}}function oe(o,c){if(1&o&&e.DNE(0,ne,8,3,"div",12),2&o){const r=e.XpG();e.Y8G("ngForOf",r.contactFormArray.controls)}}function re(o,c){1&o&&e.nrm(0,"img",8),2&o&&e.Y8G("src","assets/icon/chevron-down-icon.svg",e.B4B)}function ie(o,c){1&o&&e.nrm(0,"img",8),2&o&&e.Y8G("src","assets/icon/chevron-up-icon.svg",e.B4B)}function ae(o,c){if(1&o&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&o){const r=c.$implicit;e.FS9("value",r.key),e.R7$(),e.JRh(r.label)}}function se(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",20),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",30)(6,"select",31)(7,"option",32),e.EFF(8,"Selecciona un origen"),e.k0s(),e.Z7z(9,ae,2,2,"option",33,e.fX1),e.k0s()()(),e.j41(11,"div")(12,"img",34),e.bIt("click",function(){e.eBV(r);const n=e.XpG().index,i=e.XpG(2).index,a=e.XpG(2);return e.Njj(a.removePersonFromCompany(i,n))}),e.k0s()()()}if(2&o){const r=e.XpG().index,t=e.XpG(2).index,n=e.XpG(2);e.Y8G("formGroup",n.getCompanyPersonForm(t,r)),e.R7$(3),e.SpI(" ",e.bMT(4,4,"CONTACT_FORM.GENERAL_DATA.CONTACT_TYPE_LABEL")," "),e.R7$(4),e.Y8G("value",null),e.R7$(2),e.Dyx(n.responsibilityOptions),e.R7$(3),e.Y8G("src","assets/icon/trash-icon.svg",e.B4B)}}function le(o,c){if(1&o){const r=e.RV6();e.j41(0,"div")(1,"div",35)(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"div",36)(5,"img",34),e.bIt("click",function(){e.eBV(r);const n=e.XpG().index,i=e.XpG(2).index,a=e.XpG(2);return e.Njj(a.removePersonFromCompany(i,n))}),e.k0s(),e.nrm(6,"img",37),e.k0s()(),e.nrm(7,"app-person-form",17),e.k0s()}if(2&o){let r;const t=e.XpG().index,n=e.XpG(2).index,i=e.XpG(2);e.R7$(3),e.JRh(null==(r=i.getCompanyPersonForm(n,t).get("role"))?null:r.value),e.R7$(2),e.Y8G("src","assets/icon/trash-icon.svg",e.B4B),e.R7$(),e.Y8G("src","assets/icon/chevron-up-icon.svg",e.B4B),e.R7$(),e.Y8G("form",i.getCompanyPersonForm(n,t))}}function ce(o,c){if(1&o&&(e.j41(0,"div")(1,"div",26),e.DNE(2,se,13,6,"div",27)(3,le,8,4,"div",16),e.k0s()()),2&o){let r,t;const n=c.index,i=e.XpG(2).index,a=e.XpG(2);e.R7$(2),e.Y8G("ngIf",!(null!=(r=a.getCompanyPersonForm(i,n).get("role"))&&r.value)),e.R7$(),e.Y8G("ngIf",null==(t=a.getCompanyPersonForm(i,n).get("role"))?null:t.value)}}function pe(o,c){if(1&o){const r=e.RV6();e.j41(0,"div")(1,"form",18),e.bIt("ngSubmit",function(){e.eBV(r);const n=e.XpG(3);return e.Njj(n.onNextStep())}),e.j41(2,"div",13)(3,"div",19)(4,"div",20),e.EFF(5," Nombre de la empresa "),e.k0s(),e.j41(6,"div",21),e.nrm(7,"input",22),e.k0s()(),e.j41(8,"div",23)(9,"div",20),e.EFF(10," Direcci\xf3n "),e.k0s(),e.j41(11,"div",21),e.nrm(12,"input",22),e.k0s()()(),e.j41(13,"div",13)(14,"div",19)(15,"div",20),e.EFF(16," CIF "),e.k0s(),e.j41(17,"div",21),e.nrm(18,"input",22),e.k0s()(),e.j41(19,"div",23)(20,"div",20),e.EFF(21," Porcentaje de participaci\xf3n "),e.k0s(),e.j41(22,"div",21),e.nrm(23,"input",22),e.k0s()()(),e.DNE(24,ce,4,2,"div",24),e.j41(25,"div",25)(26,"button",7),e.bIt("click",function(){e.eBV(r);const n=e.XpG().index,i=e.XpG(2);return e.Njj(i.addPersonToCompany(n))}),e.nrm(27,"img",8),e.EFF(28," A\xf1adir persona responsable "),e.k0s()()()()}if(2&o){let r;const t=e.XpG().index,n=e.XpG(2);e.R7$(),e.Y8G("formGroup",n.getCompanyForm(t)),e.R7$(5),e.Y8G("ngClass",e.eq3(7,j,n.isControlInvalid(n.getPersonForm(t),"email"))),e.R7$(5),e.Y8G("ngClass",e.eq3(9,j,n.isControlInvalid(n.getPersonForm(t),"email"))),e.R7$(6),e.Y8G("ngClass",e.eq3(11,j,n.isControlInvalid(n.getPersonForm(t),"email"))),e.R7$(5),e.Y8G("ngClass",e.eq3(13,j,n.isControlInvalid(n.getPersonForm(t),"email"))),e.R7$(2),e.Y8G("ngForOf",null==(r=n.getPersons(t))?null:r.controls),e.R7$(3),e.Y8G("src","assets/icon/plus-icon.svg",e.B4B)}}function de(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",5)(1,"div",13)(2,"div",14),e.EFF(3),e.k0s(),e.j41(4,"div",15),e.bIt("click",function(){const n=e.eBV(r).index,i=e.XpG(2);return e.Njj(i.togglePersonForm(n))}),e.DNE(5,re,1,1,"img",8)(6,ie,1,1,"img",8),e.k0s()(),e.DNE(7,pe,29,15,"div",16),e.k0s()}if(2&o){const r=c.index,t=e.XpG(2);e.R7$(3),e.SpI("Comprador ",r+1,""),e.R7$(2),e.vxM(t.showForms[r]?5:6),e.R7$(2),e.Y8G("ngIf",t.showForms[r])}}function ue(o,c){if(1&o&&e.DNE(0,de,8,3,"div",12),2&o){const r=e.XpG();e.Y8G("ngForOf",r.contactFormArray.controls)}}let me=(()=>{var o;class c{constructor(t,n,i,a){this.fb=t,this.ngZone=n,this.api=i,this.utils=a,this.selectContactData=new e.bkB,this.mapCenter={lat:40.416775,lng:-3.70379},this.mapZoom=6,this.markerPosition=this.mapCenter,this.mapOptions={disableDefaultUI:!1,styles:[{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]}]},this.markerOptions={draggable:!0},this.personType="person",this.persons=[1],this.showForms=[],this.responsibilityOptions=[{key:"sole_administrator",label:"Administrador \xfanico"},{key:"joint_and_several_administrator",label:"Administrador solidario"},{key:"joint_administrator",label:"Administrador mancomunado"},{key:"delegated_director",label:"Consejero delegado"},{key:"general_attorney",label:"Apoderado general"},{key:"special_attorney",label:"Apoderado especial"},{key:"chairman_of_board",label:"Presidente del Consejo"}],this.FormGroup=u.gE,this.contactFormOptions=U.R,this.contactFormArray=this.fb.array([this.createPersonForm()]),this.showForms=[!0]}ngOnInit(){this.contact&&this.patchContactData()}createCompanyForm(){return this.fb.group({email:["",[u.k0.required,u.k0.email]],address:[""],cif:[""],participation:[""],persons:this.fb.array([])})}addCompany(){this.contactFormArray.push(this.createCompanyForm()),this.showForms.push(!0)}removeCompany(t){this.contactFormArray.removeAt(t),this.showForms.splice(t,1)}getCompanyForm(t){return this.contactFormArray.at(t)}getPersons(t){return this.getCompanyForm(t).get("persons")}getCompanyPersonForm(t,n){return this.getPersons(t).at(n)}addPersonToCompany(t){this.getPersons(t).push(this.createPersonForm())}removePersonFromCompany(t,n){this.getPersons(t).removeAt(n)}createPersonForm(){return this.fb.group({email:["",[u.k0.required,u.k0.email]],name:["",u.k0.required],birthDate:["",u.k0.required],phoneNumber:["+34 ",u.k0.required],dni:["",u.k0.required],address:["",u.k0.required],role:[""]})}addNewPerson(){"person"===this.personType?this.contactFormArray.push(this.createPersonForm()):this.addCompany(),this.showForms.push(!0)}ngAfterViewInit(){this.addressInput&&(this.autocomplete=new google.maps.places.Autocomplete(this.addressInput.nativeElement,{types:["geocode"],componentRestrictions:{country:"es"}}),this.autocomplete.addListener("place_changed",()=>{this.ngZone.run(()=>{const n=this.autocomplete.getPlace();if(!n.geometry)return;this.mapCenter={lat:n.geometry.location.lat(),lng:n.geometry.location.lng()},this.markerPosition=this.mapCenter,this.mapZoom=17;const i=n.formatted_address||n.name||"";this.contactForm.patchValue({address:i}),this.addressInput.nativeElement.value=i})}))}set contactData(t){this.contact=t,this.contact&&this.patchContactData()}patchContactData(){var t,n,i;let a=this.utils.parseBackendDateToFrontendDateInput(null===(t=this.contact)||void 0===t?void 0:t.birthdate);this.contactForm.patchValue({email:(null===(n=this.contact.emails)||void 0===n?void 0:n[0])||"",name:this.contact.name||"",birthDate:a||"",phoneNumber:(null===(i=this.contact.phones)||void 0===i?void 0:i[0])||"+34 ",dni:this.contact.dniPassport||"",address:this.contact.address||""})}isControlInvalid(t,n){const i=t.get(n);return!(!i||!i.invalid||!i.dirty&&!i.touched)}onSelectCountry(t){console.log("Selected country prefix:",t);const n=null==t?void 0:t.phoneCode,i=this.contactForm.get("phoneNumber");if(!i)return;const P=(i.value||"").split(" ");P.shift();const S=P.join(" ");i.setValue(`${n} ${S}`)}onAddressSelected(t){console.log("Address selected:",t),this.contactForm.patchValue({address:(null==t?void 0:t.formatted_address)||(null==t?void 0:t.address)||""})}getAddressFromCoordinates(t,n){(new google.maps.Geocoder).geocode({location:{lat:t,lng:n}},(a,P)=>{"OK"===P&&a&&a[0]&&this.ngZone.run(()=>{const S=a[0].formatted_address;this.contactForm.patchValue({address:S}),this.addressInput&&(this.addressInput.nativeElement.value=S),this.markerPosition={lat:t,lng:n}})})}onPrevStep(){console.log("Going to previous step...")}onNextStep(){var t=this;return(0,b.A)(function*(){var n,i,a;if(console.log(234432423,t.contactFormArray.invalid),t.contactFormArray.invalid)return void t.contactFormArray.markAllAsTouched();if(t.contactForm.invalid)return void t.contactForm.markAllAsTouched();let P=(null===(n=t.contact)||void 0===n?void 0:n.phones)||[];P.includes(t.contactForm.value.phoneNumber)||P.unshift(t.contactForm.value.phoneNumber);let S=(null===(i=t.contact)||void 0===i?void 0:i.emails)||[];S.includes(t.contactForm.value.email)||S.unshift(t.contactForm.value.email);const D={name:t.contactForm.value.name,birthdate:new Date(t.contactForm.value.birthDate),phones:P,emails:S,dniPassport:t.contactForm.value.dni,address:t.contactForm.value.address};(yield t.api.updateContactById(null===(a=t.contact)||void 0===a?void 0:a.id,D))&&(console.log("Form data:",t.contactForm.value),t.selectContactData.emit())})()}onChangePersonType(t){this.personType=t,this.contactFormArray=this.fb.array("person"===this.personType?[this.createPersonForm()]:[this.createCompanyForm()])}getPersonForm(t){return this.contactFormArray.at(t)}togglePersonForm(t){this.showForms[t]=!this.showForms[t]}onResponsibilitySelected(t){}removePerson(t){this.contactFormArray.removeAt(t),this.showForms.splice(t,1)}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(u.ok),e.rXU(e.SKi),e.rXU(v.i),e.rXU(g.T))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venta-select-contact-data"]],viewQuery:function(t,n){if(1&t&&e.GBs(q,5),2&t){let i;e.mGM(i=e.lsd())&&(n.addressInput=i.first)}},inputs:{contact:"contact",contactData:"contactData"},outputs:{selectContactData:"selectContactData"},decls:19,vars:8,consts:[[1,"venta-component"],[1,"venta-component-body"],[1,"",2,"border","1px solid #E0E0E0","width","100%","padding","6px","border-radius","20px"],[1,"d-flex","text-14"],[1,"cursor-pointer",2,"padding","6px 10px","border-radius","20px",3,"click","ngStyle"],[1,"content"],[1,"w-full"],["type","button",1,"crm-button-secondary","w-full","d-flex","justify-center","align-center",3,"click"],["alt","",1,"cursor-pointer",3,"src"],[1,"mt-10",2,"display","flex","gap","16px","justify-content","space-between"],["type","button",1,"crm-button-secondary","w-50p","d-block","text-center","border-primary",3,"click"],["type","submit",1,"crm-button","w-50p","d-block","text-center",3,"click"],["class","content",4,"ngFor","ngForOf"],[1,"d-flex","justify-between"],[1,"title"],[1,"cursor-pointer",3,"click"],[4,"ngIf"],[3,"form"],[3,"ngSubmit","formGroup"],[1,"crm-input","w-50p",2,"margin-bottom","8px"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Field","formControlName","email"],[1,"crm-input","w-50p","ml-10",2,"margin-bottom","8px"],[4,"ngFor","ngForOf"],[1,"w-full","mt-20"],[1,"p-16","mt-10",2,"border","1px solid #EBEBEB","border-radius","12px"],["class","w-full  d-flex justify-between align-end",3,"formGroup",4,"ngIf"],[1,"w-full","d-flex","justify-between","align-end",3,"formGroup"],[1,"crm-input"],[1,"crm-input-input"],["formControlName","role",1,"w-full"],["disabled","","selected","",3,"value"],[3,"value"],["alt","",1,"cursor-pointer",3,"click","src"],[1,"d-flex","justify-between","mb-15"],[1,"d-flex","align-center"],["alt","",1,"cursor-pointer","ml-10",3,"src"]],template:function(t,n){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.bIt("click",function(){return n.onChangePersonType("person")}),e.EFF(5," Personas f\xedsicas "),e.k0s(),e.j41(6,"div",4),e.bIt("click",function(){return n.onChangePersonType("company")}),e.EFF(7," Persona jur\xeddica "),e.k0s()()(),e.DNE(8,oe,1,1,"div",5)(9,ue,1,1,"div",5),e.j41(10,"div",6)(11,"button",7),e.bIt("click",function(){return n.addNewPerson()}),e.nrm(12,"img",8),e.EFF(13," A\xf1adir otro comprador "),e.k0s()()(),e.j41(14,"div",9)(15,"button",10),e.bIt("click",function(){return n.onPrevStep()}),e.EFF(16," Anterior "),e.k0s(),e.j41(17,"button",11),e.bIt("click",function(){return n.onNextStep()}),e.EFF(18," Siguiente "),e.k0s()()()),2&t&&(e.R7$(4),e.Y8G("ngStyle",e.eq3(4,$,"person"===n.personType?"#ECF2FF":"")),e.R7$(2),e.Y8G("ngStyle",e.eq3(6,$,"company"===n.personType?"#ECF2FF":"")),e.R7$(2),e.vxM("person"===n.personType?8:9),e.R7$(4),e.Y8G("src","assets/icon/user-plus-icon.svg",e.B4B))},dependencies:[p.YU,p.Sq,p.bT,p.B3,u.qT,u.xH,u.y7,u.me,u.wz,u.BC,u.cb,u.j4,u.JD,Z,G.D9],styles:[".venta-component[_ngcontent-%COMP%]{max-width:500px}"]}),c})();const _e=["selectPropertyComponent"],ve=["selectPriceComponent"],T=o=>({"hidden-step":o}),ge=(o,c)=>({"crm-steps-container-step-current":o,"crm-steps-container-step-inactive":c});function fe(o,c){1&o&&e.nrm(0,"i",24)}function Ce(o,c){if(1&o&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&o){const r=e.XpG().index;e.R7$(),e.JRh(r+1)}}function he(o,c){1&o&&e.nrm(0,"div",25)}function Pe(o,c){if(1&o&&(e.j41(0,"div",18)(1,"div",19),e.DNE(2,fe,1,0,"i",20)(3,Ce,2,1,"span",21),e.k0s(),e.j41(4,"div",22),e.EFF(5),e.k0s(),e.DNE(6,he,1,0,"div",23),e.k0s()),2&o){const r=c.$implicit,t=c.index,n=e.XpG();e.Y8G("ngClass",e.l_i(5,ge,t==n.activeIndex,t>n.activeIndex)),e.R7$(2),e.Y8G("ngIf",t<n.activeIndex),e.R7$(),e.Y8G("ngIf",t>=n.activeIndex),e.R7$(2),e.SpI(" ",r," "),e.R7$(),e.Y8G("ngIf",t<n.steps.length-1)}}function be(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.EFF(3," 1. Promoci\xf3n "),e.k0s(),e.j41(4,"div",31),e.bIt("click",function(){e.eBV(r);const n=e.XpG(2);return e.Njj(n.changeStep(0))}),e.nrm(5,"i",32),e.k0s()(),e.j41(6,"div",33),e.EFF(7),e.k0s()()}if(2&o){const r=e.XpG(2);e.R7$(7),e.SpI(" ",null==r.data||null==r.data.promotion?null:r.data.promotion.projectName," ")}}function ye(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.EFF(3," 2. Vivienda principal "),e.k0s(),e.j41(4,"div",31),e.bIt("click",function(){e.eBV(r);const n=e.XpG(2);return e.Njj(n.changeStep(1))}),e.nrm(5,"i",32),e.k0s()(),e.j41(6,"div",33),e.EFF(7),e.k0s()()}if(2&o){const r=e.XpG(2);e.R7$(7),e.SpI(" ",null==r.data||null==r.data.property?null:r.data.property.reference," ")}}function Fe(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.EFF(3," 3. Por precio "),e.k0s(),e.j41(4,"div",31),e.bIt("click",function(){e.eBV(r);const n=e.XpG(2);return e.Njj(n.changeStep(2))}),e.nrm(5,"i",32),e.k0s()(),e.j41(6,"div",33),e.EFF(7),e.nI1(8,"thousandSeparator"),e.k0s()()}if(2&o){const r=e.XpG(2);e.R7$(7),e.SpI(" ",e.bMT(8,1,null==r.data||null==r.data.priceSelected?null:r.data.priceSelected.finalPrice)," \u20ac ")}}function ke(o,c){if(1&o){const r=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.EFF(3," 4. Documento de reserva "),e.k0s(),e.j41(4,"div",31),e.bIt("click",function(){e.eBV(r);const n=e.XpG(2);return e.Njj(n.changeStep(3))}),e.nrm(5,"i",32),e.k0s()(),e.j41(6,"div",33),e.EFF(7),e.k0s()()}if(2&o){const r=e.XpG(2);e.R7$(7),e.SpI(" ",null==r.data||null==r.data.documentData?null:r.data.documentData.contractType," ")}}function xe(o,c){if(1&o&&(e.j41(0,"div",26),e.DNE(1,be,8,1,"div",27)(2,ye,8,1,"div",27)(3,Fe,9,3,"div",27)(4,ke,8,1,"div",27),e.k0s()),2&o){const r=e.XpG();e.R7$(),e.Y8G("ngIf",null==r.data?null:r.data.promotion),e.R7$(),e.Y8G("ngIf",null==r.data?null:r.data.property),e.R7$(),e.Y8G("ngIf",null==r.data||null==r.data.priceSelected?null:r.data.priceSelected.finalPrice),e.R7$(),e.Y8G("ngIf",null==r.data?null:r.data.documentData)}}const Se=[{path:"",component:(()=>{var o;class c{constructor(t,n,i,a){this.api=t,this.route=n,this.toast=i,this.router=a,this.data={promotion:null,property:null,priceSelected:{priceWithoutIva:null,priceWithIva:null,finalPrice:null,iva:10},documentData:null},this.steps=["Promoci\xf3n","Vivienda principal","Por precio","Documento de reserva","Datos del cliente"],this.activeIndex=0}ngOnInit(){const t=this.route.snapshot.paramMap.get("operationId");t?this.api.getOperation({id:{equals:t}},null,null,{contact:{apply:!0,filter:null,onlyCount:!1},createdBy:{apply:!0,filter:null,onlyCount:!1},responsible:{apply:!0,filter:null,onlyCount:!1},mainProperty:{apply:!0,filter:null,onlyCount:!1},currentPipeline:{apply:!0,filter:null,onlyCount:!1},currentPipelineStep:{apply:!0,filter:null,onlyCount:!1},promotions:{apply:!0,filter:null,onlyCount:!1},selectedProperties:{apply:!0,filter:null,onlyCount:!1},notes:{apply:!0,filter:null,onlyCount:!1},operations:{apply:!0,filter:null,onlyCount:!1},operationRegisters:{apply:!0,filter:null,onlyCount:!1}}).then(n=>{n.success&&n.success.data&&n.success.data.length&&(this.operation=n.success.data[0],console.log("Retrieved operation:",this.operation))}).catch(n=>{console.error("Error retrieving operation:",n)}):console.warn("No operationId parameter found in the URL.")}onSelectPromotion(t){var n=this;return(0,b.A)(function*(){var i;n.data.promotion=t,n.activeIndex=1;const a=yield n.api.getPromotionFullDataById(n.data.promotion.id);n.data.promotion=null==a||null===(i=a.success)||void 0===i?void 0:i.data,n.selectPropertyComponent.selectedPromotion=n.data.promotion})()}onSelectProperty(t){var n=this;return(0,b.A)(function*(){n.data.property=t,n.selectPriceComponent.selectedProperty=t,n.activeIndex=2})()}onSelectPrice(t){this.data.priceSelected=t,this.activeIndex=3}onSelectDocumentData(t){this.data.documentData=t,this.activeIndex=4}onSelectContactData(){console.log("Contact data selected:",this.data.documentData),this.finishFlow()}finishFlow(){var t=this;return(0,b.A)(function*(){const n={propertyId:t.data.property.id,operationId:t.operation.id,priceSelected:t.data.priceSelected,documentData:t.data.documentData};(yield t.api.reserveProperty(n)).success?(t.toast.showSuccessToast("Reserva realizada correctamente"),t.router.navigate(["/contacts",t.operation.contactId,"operations",t.operation.id])):t.toast.showErrorToast("Error al realizar la reserva")})()}changeStep(t){this.activeIndex=t,0===t&&(this.data.property=null,this.data.priceSelected=null,this.data.documentData=null,this.selectPropertyComponent.selectedPromotion=null),1===t&&(this.data.priceSelected=null,this.data.documentData=null,this.selectPriceComponent.selectedProperty=null),console.log("DATAAAA",this.data)}}return(o=c).\u0275fac=function(t){return new(t||o)(e.rXU(v.i),e.rXU(h.nX),e.rXU(C.f),e.rXU(h.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venta-operation-process"]],viewQuery:function(t,n){if(1&t&&(e.GBs(_e,7),e.GBs(ve,7)),2&t){let i;e.mGM(i=e.lsd())&&(n.selectPropertyComponent=i.first),e.mGM(i=e.lsd())&&(n.selectPriceComponent=i.first)}},decls:22,vars:19,consts:[["selectPropertyComponent",""],["selectPriceComponent",""],["selectClientComponent",""],[3,"fullscreen"],[1,"crm-block-content"],[1,"crm-block-body"],[1,"crm-block-body-blue-content"],[1,"crm-steps-container"],["class","crm-steps-container-step",3,"ngClass",4,"ngFor","ngForOf"],[1,"venta-body"],[1,"venta-body-component"],[3,"ngClass"],[3,"selectPromotion"],[3,"selectProperty"],[3,"selectPrice"],[3,"selectDocumentData"],[3,"selectContactData","contactData"],["class","steps-cards-body",4,"ngIf"],[1,"crm-steps-container-step",3,"ngClass"],[1,"crm-steps-container-step-circle"],["class","fa fa-check",4,"ngIf"],[4,"ngIf"],[1,"crm-steps-container-step-label"],["class","crm-steps-container-step-separator",4,"ngIf"],[1,"fa","fa-check"],[1,"crm-steps-container-step-separator"],[1,"steps-cards-body"],["class","steps-cards-body-card",4,"ngIf"],[1,"steps-cards-body-card"],[1,"steps-cards-body-card-header"],[1,"steps-cards-body-card-header-title"],[1,"steps-cards-body-card-header-icon",3,"click"],[1,"fa-solid","fa-pencil"],[1,"steps-cards-body-card-text"]],template:function(t,n){if(1&t){const i=e.RV6();e.j41(0,"ion-content",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7),e.DNE(5,Pe,7,8,"div",8),e.k0s(),e.j41(6,"div",9)(7,"div",10)(8,"div",11)(9,"app-venta-select-promotion",12),e.bIt("selectPromotion",function(P){return e.eBV(i),e.Njj(n.onSelectPromotion(P))}),e.k0s()(),e.j41(10,"div",11)(11,"app-venta-select-property",13,0),e.bIt("selectProperty",function(P){return e.eBV(i),e.Njj(n.onSelectProperty(P))}),e.k0s()(),e.j41(13,"div",11)(14,"app-venta-select-price",14,1),e.bIt("selectPrice",function(P){return e.eBV(i),e.Njj(n.onSelectPrice(P))}),e.k0s()(),e.j41(16,"div",11)(17,"app-venta-select-document",15,2),e.bIt("selectDocumentData",function(P){return e.eBV(i),e.Njj(n.onSelectDocumentData(P))}),e.k0s()(),e.j41(19,"div",11)(20,"app-venta-select-contact-data",16),e.bIt("selectContactData",function(){return e.eBV(i),e.Njj(n.onSelectContactData())}),e.k0s()()(),e.DNE(21,xe,5,4,"div",17),e.k0s()()()()()}2&t&&(e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("ngForOf",n.steps),e.R7$(3),e.Y8G("ngClass",e.eq3(9,T,0!==n.activeIndex)),e.R7$(2),e.Y8G("ngClass",e.eq3(11,T,1!==n.activeIndex)),e.R7$(3),e.Y8G("ngClass",e.eq3(13,T,2!==n.activeIndex)),e.R7$(3),e.Y8G("ngClass",e.eq3(15,T,3!==n.activeIndex)),e.R7$(3),e.Y8G("ngClass",e.eq3(17,T,4!==n.activeIndex)),e.R7$(),e.Y8G("contactData",null==n.operation?null:n.operation.contact),e.R7$(),e.Y8G("ngIf",null==n.data?null:n.data.promotion))},dependencies:[p.YU,p.Sq,p.bT,f.W9,s,R,A,X,me,E.w],styles:[".crm-steps-container[_ngcontent-%COMP%], .crm-steps-container-step[_ngcontent-%COMP%]{display:flex;align-items:center}.crm-steps-container-step-current[_ngcontent-%COMP%]   .crm-steps-container-step-circle[_ngcontent-%COMP%]{background:#fff;color:#3a50e4;border:1px solid #3A50E4}.crm-steps-container-step-current[_ngcontent-%COMP%]   .crm-steps-container-step-label[_ngcontent-%COMP%]{color:#3a50e4}.crm-steps-container-step-current[_ngcontent-%COMP%]   .crm-steps-container-step-separator[_ngcontent-%COMP%]{background:#3a50e4}.crm-steps-container-step-inactive[_ngcontent-%COMP%]   .crm-steps-container-step-circle[_ngcontent-%COMP%]{background:#fff;color:#a8a8a8;border:1px solid rgb(168,168,168)}.crm-steps-container-step-inactive[_ngcontent-%COMP%]   .crm-steps-container-step-label[_ngcontent-%COMP%]{color:#a8a8a8}.crm-steps-container-step-inactive[_ngcontent-%COMP%]   .crm-steps-container-step-separator[_ngcontent-%COMP%]{background:#a8a8a8}.crm-steps-container-step-circle[_ngcontent-%COMP%]{width:21px;min-width:21px;height:21px;min-height:21px;border-radius:50%;background:#3a50e4;color:#fff;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:12px;margin-right:8px}.crm-steps-container-step-label[_ngcontent-%COMP%]{color:#3a50e4;font-weight:500;margin-right:16px;font-size:13px}.crm-steps-container-step-separator[_ngcontent-%COMP%]{width:20px;height:1px;background:#3a50e4;margin-right:16px}.hidden-step[_ngcontent-%COMP%]{height:0;overflow:hidden;opacity:0;position:absolute;width:0;visibility:hidden}.steps-cards-body[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:16px}.steps-cards-body-card[_ngcontent-%COMP%]{border:1px solid var(--crm-border-light-color);border-radius:6px;padding:12px}.steps-cards-body-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--crm-border-light-color);padding-bottom:16px}.steps-cards-body-card-header-title[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--crm-text-color)}.steps-cards-body-card-header-icon[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;color:var(--crm-text-color)}.steps-cards-body-card-text[_ngcontent-%COMP%]{font-size:13px;color:var(--crm-text-color);padding-top:16px}.venta-body[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px}.venta-body[_ngcontent-%COMP%]   .steps-cards-body[_ngcontent-%COMP%]{min-width:300px;width:300px;flex-shrink:0}.venta-body-component[_ngcontent-%COMP%]{flex:1 1 0;min-width:0;overflow-y:auto}"]}),c})()}];let Me=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.iI.forChild(Se),h.iI]}),c})();var Oe=d(3895),Te=d(9662),Ee=d(6812),Ie=d(969);let je=(()=>{var o;class c{}return(o=c).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,u.YN,f.bv,u.X1,Me,Oe.b,Te.Y,Ee.u,Ie.rJ,G.h]}),c})()},9662:(M,y,d)=>{d.d(y,{Y:()=>f});var p=d(177),u=d(3953);let f=(()=>{var h;class b{}return(h=b).\u0275fac=function(v){return new(v||h)},h.\u0275mod=u.$C({type:h}),h.\u0275inj=u.G2t({imports:[p.MD]}),b})()},4558:(M,y,d)=>{d.d(y,{w:()=>u});var p=d(3953);let u=(()=>{var f;class h{transform(e,...v){if(null==e||""===e)return"";let C;return C="string"==typeof e?parseFloat(e):e,isNaN(C)?"":C.toString().replace(/\.(?=\d+$)/,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return(f=h).\u0275fac=function(e){return new(e||f)},f.\u0275pipe=p.EJ8({name:"thousandSeparator",type:f,pure:!0}),h})()},6552:(M,y,d)=>{d.d(y,{T:()=>C});var p=d(467),u=d(7376),h=d(6069),b=d(3953),e=d(5188),v=d(6039);let C=(()=>{var _;class F{constructor(s,l){this.router=s,this.api=l}parseBackendDateToFrontendDateInput(s){if(!s)return null;try{const l=new Date(s),m=l.getFullYear();return`${m}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`}catch(l){return console.error("Invalid date format",l),null}}parseProperties(s){for(let m in s)s[m]instanceof Date?s[m]=s[m].toISOString():"string"==typeof s[m]&&s[m].match(/^\d{4}-\d{2}-\d{2}$/)&&(s[m]=new Date(s[m]).toISOString()),"true"===s[m]?s[m]=!0:"false"===s[m]&&(s[m]=!1);const l=u.cloneDeep(s);return delete l.id,l}parseNameToValue(s){return s.toLowerCase().replace(/ /g,"_")}groupPropertiesByPromotion(s,l){return s.map(g=>{const x=l.filter(O=>O.promotionId===g.id);return{...g,properties:x}})}setStepsCompleted(s,l){return s.steps=u.orderBy(s.steps,["order"],["asc"]),s.steps=s.steps.map(m=>(m.order<l.order&&(m.isCompleted=!0),m)),s}hexToRgba(s,l){if(!s)return"";let m,g,x;if(3===(s=s.replace("#","")).length)m=parseInt(s[0]+s[0],16),g=parseInt(s[1]+s[1],16),x=parseInt(s[2]+s[2],16);else{if(6!==s.length)return"";m=parseInt(s.substring(0,2),16),g=parseInt(s.substring(2,4),16),x=parseInt(s.substring(4,6),16)}return`rgba(${m}, ${g}, ${x}, ${l})`}getLanguageInfo(s){return h.e.find(m=>m.code===s)||{}}getCountryInfo(s){return h.X.find(m=>m.code===s)||{}}countAvailableProperties(s){return s&&0!==s.length?s.filter(l=>"available"===l.availabilityStatus).length:0}calculateRangeOfPropertiesPrices(s){if(!s||0===s.length)return{min:0,max:0};const l=s.map(m=>m.price);return{min:Math.min(...l),max:Math.max(...l)}}calculateRangeOfPropertiesRooms(s){if(!s||0===s.length)return{min:0,max:0};const l=s.map(m=>m.bedrooms);return{min:Math.min(...l),max:Math.max(...l)}}onRemoveAgencyAccessToPromotion(s){console.log("onRemoveAgencyAccessToPromotion",s)}redirectToPromoter(s){this.router.navigate([`/promoters/${s.id}`])}filterFilesByCategoryAndSort(s,l){return s&&0!==s.length?s.filter(m=>m.category===l).sort((m,g)=>{var x,O;return(null!==(x=null==m?void 0:m.orderIndex)&&void 0!==x?x:0)-(null!==(O=null==g?void 0:g.orderIndex)&&void 0!==O?O:0)}):[]}transformThousandSeparator(s){if(null==s||""===s)return"";let l;return l="string"==typeof s?parseFloat(s):s,isNaN(l)?"":l.toString().replace(/\.(?=\d+$)/,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}detectIfPromotionIsCompleted(s){var l=this;return(0,p.A)(function*(){var m;if(!s)return!1;const g=null===(m=yield l.api.getPromotionById(s.id))||void 0===m||null===(m=m.success)||void 0===m?void 0:m.data;return((null==g?void 0:g.deliveryDateModalityByStatus)||(null==g?void 0:g.deliveryDateModalityByMonths))&&!(null==g||!g.sellCommissionPercentage)&&!(null==g||!g.methodToPayCommissions)&&!(null==g||!g.reservePayment)&&((null==g?void 0:g.registersWithPreRegister)||(null==g?void 0:g.registersWithoutPreRegister))})()}isImageFile(s){var l;const g=null===(l=s.split(".").pop())||void 0===l?void 0:l.toLowerCase();return!!g&&["png","jpg","jpeg","gif","bmp","webp","svg","tiff","tif","ico","heic","jfif"].includes(g)}}return(_=F).\u0275fac=function(s){return new(s||_)(b.KVO(e.Ix),b.KVO(v.i))},_.\u0275prov=b.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),F})()},8392:(M,y,d)=>{d.d(y,{R:()=>p});const p={contactType:[{value:"client",label:"Cliente"},{value:"potential_client",label:"Cliente potencial"},{value:"owner",label:"Propietario"},{value:"external_broker",label:"Broker externo"},{value:"referred",label:"Referido"},{value:"investor",label:"Inversor"}],origin:[{value:"",label:""},{value:"a_place_in_the_sun",label:"A Place in the Sun"},{value:"facebook_ads",label:"Facebook Ads"},{value:"fotocasa",label:"Fotocasa"},{value:"google_ads",label:"Google Ads"},{value:"green_acres",label:"Green-Acres"},{value:"habitaclia",label:"Habitaclia"},{value:"james_edition",label:"JamesEdition"},{value:"immobilienscout24",label:"ImmobilienScout24"},{value:"immonet",label:"Immonet"},{value:"immowelt",label:"ImmoWelt"},{value:"idealista",label:"Idealista"},{value:"instagram_ads",label:"Instagram Ads"},{value:"kyero",label:"Kyero"},{value:"linkedin_ads",label:"LinkedIn Ads"},{value:"list_globally",label:"ListGlobally"},{value:"luxury_estate",label:"LuxuryEstate"},{value:"newsletter",label:"Newsletter"},{value:"network_de_agentes_o_brokers",label:"Network de agentes o brokers"},{value:"networking_en_eventos",label:"Networking en eventos"},{value:"pisos_com",label:"Pisos.com"},{value:"prop_go_luxury",label:"PropGoLuxury"},{value:"referido_por_redes_sociales",label:"Referido por redes sociales"},{value:"recomendacion_de_cliente",label:"Recomendaci\xf3n de cliente"},{value:"recomendacion_interna",label:"Recomendaci\xf3n interna (de otros departamentos o contactos)"},{value:"rightmove",label:"Rightmove"},{value:"think_spain",label:"ThinkSpain"},{value:"visitas_presenciales_en_ferias_internacionales",label:"Visitas presenciales en ferias internacionales"},{value:"web_propio",label:"Web propio"},{value:"yaencontre",label:"Yaencontre"},{value:"youtube_ads",label:"YouTube Ads"},{value:"zoopla",label:"Zoopla"},{value:"",label:""}]}}}]);