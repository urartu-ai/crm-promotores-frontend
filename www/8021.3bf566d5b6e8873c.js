"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8021],{8021:(L,v,c)=>{c.r(v),c.d(v,{RegisterPageModule:()=>U});var d=c(177),a=c(9417),u=c(9465),g=c(517),p=c(467),e=c(3953),F=c(6039),R=c(8397);const m=r=>({"crm-input-input-error":r}),_=()=>["/auth/login"];function h(r,t){if(1&r&&(e.j41(0,"div",25)(1,"div",26),e.nrm(2,"img",27),e.k0s(),e.j41(3,"div",28)(4,"div")(5,"div",29),e.EFF(6),e.k0s(),e.j41(7,"div",30),e.EFF(8," la promoci\xf3n contiene 12 propiedades "),e.k0s()(),e.j41(9,"div")(10,"div",31),e.EFF(11),e.nI1(12,"date"),e.k0s()()()(),e.nrm(13,"div",32)(14,"div",33)),2&r){const i=t.$implicit;e.R7$(2),e.Y8G("src",(null==i||null==i.promotionFiles?null:i.promotionFiles.length)>0?null==i?null:i.promotionFiles[0].url:"assets/images/building.png",e.B4B),e.R7$(4),e.SpI(" Promoci\xf3n ",null==i?null:i.projectName," "),e.R7$(5),e.SpI(" Creado el ",e.i5U(12,3,null==i?null:i.createdAt,"dd/MM/yyyy")," ")}}function E(r,t){if(1&r&&(e.j41(0,"div",5),e.EFF(1," Reg\xedstrate para poder acceder a las siguientes promociones:"),e.k0s(),e.j41(2,"div",24),e.Z7z(3,h,15,6,null,null,e.fX1),e.k0s(),e.nrm(5,"br")),2&r){const i=e.XpG();e.R7$(3),e.Dyx(i.promotionsInvited)}}function I(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function k(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,I,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("companyName").hasError("required"))}}function y(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function b(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,y,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("name").hasError("required"))}}function P(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function G(r,t){1&r&&(e.qex(0),e.EFF(1,"Correo electr\xf3nico no v\xe1lido"),e.bVm())}function T(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,P,2,0,"ng-container",35)(2,G,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("email").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("email").hasError("email"))}}function j(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function C(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,j,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("phoneNumber").hasError("required"))}}function N(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function $(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,N,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",i.registerForm.get("accountType").hasError("required"))}}function q(r,t){if(1&r&&(e.j41(0,"div",8)(1,"div",9),e.EFF(2,"\xbfEres una agencia o una promotora?"),e.k0s(),e.j41(3,"div",10)(4,"select",36)(5,"option",37),e.EFF(6,"Promotora"),e.k0s(),e.j41(7,"option",38),e.EFF(8,"Agencia"),e.k0s()()(),e.DNE(9,$,2,1,"div",12),e.k0s()),2&r){const i=e.XpG();e.R7$(3),e.Y8G("ngClass",e.eq3(2,m,i.isControlInvalid("accountType"))),e.R7$(6),e.Y8G("ngIf",i.isControlInvalid("accountType"))}}function x(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function Y(r,t){1&r&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function w(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,x,2,0,"ng-container",35)(2,Y,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("password").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("password").hasError("minlength"))}}function M(r,t){1&r&&(e.qex(0),e.EFF(1,"Este campo es requerido"),e.bVm())}function D(r,t){1&r&&(e.qex(0),e.EFF(1,"La contrase\xf1a debe tener al menos 8 caracteres"),e.bVm())}function S(r,t){1&r&&(e.qex(0),e.EFF(1,"Las contrase\xf1as no coinciden"),e.bVm())}function X(r,t){if(1&r&&(e.j41(0,"div",34),e.DNE(1,M,2,0,"ng-container",35)(2,D,2,0,"ng-container",35)(3,S,2,0,"ng-container",35),e.k0s()),2&r){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.registerForm.get("confirmPassword").hasError("required")),e.R7$(),e.Y8G("ngIf",i.registerForm.get("confirmPassword").hasError("minlength")),e.R7$(),e.Y8G("ngIf",i.registerForm.hasError("passwordMismatch"))}}function V(r,t){if(1&r&&(e.j41(0,"div",34),e.qex(1),e.EFF(2),e.bVm(),e.k0s()),2&r){const i=e.XpG();e.R7$(2),e.JRh(i.globalErrorString)}}const J=[{path:"",component:(()=>{var r;class t{constructor(o,n,s,l){this.router=o,this.activeRouter=n,this.api=s,this.toastService=l,this.agencyInvitationRegister=null,this.globalErrorString=""}ngOnInit(){var o=this;return(0,p.A)(function*(){o.initializeForm(),o.activeRouter.queryParams.subscribe(function(){var n=(0,p.A)(function*(s){if(s.agencyInvitationToPromotionsId&&s.email&&!o.agencyInvitationRegister){o.agencyInvitationRegister={agencyInvitationToPromotionsId:s.agencyInvitationToPromotionsId,agencyEmail:s.email};const l=yield o.api.getPromotionsFromAgencyRegister(o.agencyInvitationRegister.agencyInvitationToPromotionsId,o.agencyInvitationRegister.agencyEmail);o.promotionsInvited=l.success.data,localStorage.setItem("agencyInvitationToPromotionsId",o.agencyInvitationRegister.agencyInvitationToPromotionsId),o.registerForm.patchValue({email:o.agencyInvitationRegister.agencyEmail,accountType:"agency"})}});return function(s){return n.apply(this,arguments)}}())})()}initializeForm(){this.registerForm=new a.gE({companyName:new a.MJ("",[a.k0.required]),name:new a.MJ("",[a.k0.required]),email:new a.MJ("",[a.k0.required,a.k0.email]),phoneNumber:new a.MJ("",[a.k0.required]),accountType:new a.MJ("",[a.k0.required]),password:new a.MJ("",[a.k0.required,a.k0.minLength(8)]),confirmPassword:new a.MJ("",[a.k0.required,a.k0.minLength(8)])},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(o){var n,s;const l=null===(n=o.get("password"))||void 0===n?void 0:n.value,f=null===(s=o.get("confirmPassword"))||void 0===s?void 0:s.value;return l&&f&&l!==f?{passwordMismatch:!0}:null}isControlInvalid(o){const n=this.registerForm.get(o);return n&&n.invalid&&(n.touched||n.dirty)}onSubmit(){var o=this;return(0,p.A)(function*(){if(o.registerForm.valid){const n=o.registerForm.value;console.log("Form submitted successfully:",n);const s=yield o.api.register(n.email,n);null!=s&&s.success?(localStorage.setItem("tempUserRegister",JSON.stringify(n)),o.router.navigate(["/auth/confirm-email"])):(o.globalErrorString=s.error.errorMessage,o.toastService.showToast({text:"Ha ocurrido un error",theme:"red",time:2e3}))}else console.log("Form is invalid"),o.registerForm.markAllAsTouched(),o.toastService.showToast({text:"El formulario no es v\xe1lido",theme:"red",time:2e3})})()}}return(r=t).\u0275fac=function(o){return new(o||r)(e.rXU(g.Ix),e.rXU(g.nX),e.rXU(F.i),e.rXU(R.f))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register"]],decls:59,vars:30,consts:[[1,"crm-box","crm-section","crm-section-center-content","crm-section-margin-top",2,"margin-top","80px"],[1,"crm-header-icon","no-padding","no-line","bottom-margin"],[1,"crm-header-icon-left"],[1,"crm-square-icon"],[1,"fas","fa-user-plus"],[1,"crm-header-icon-title"],[1,"crm-header-icon-right"],[1,"crm-section-inputs",3,"ngSubmit","formGroup"],[1,"crm-input"],[1,"crm-input-label"],[1,"crm-input-input",3,"ngClass"],["type","text","placeholder","Introduce el nombre comercial de la empresa","formControlName","companyName"],["class","crm-input-error",4,"ngIf"],[1,"crm-section-title"],["type","text","placeholder","Introduce el nombre del responsable","formControlName","name"],["type","email","placeholder","Introduce el email del responsable","formControlName","email"],["type","tel","placeholder","Introduce el tel\xe9fono del responsable","formControlName","phoneNumber"],["class","crm-input",4,"ngIf"],["type","password","placeholder","Introduce la contrase\xf1a","formControlName","password"],["type","password","placeholder","Repite la contrase\xf1a","formControlName","confirmPassword"],[1,"crm-header-modal","crm-header-modal-empty"],[1,"crm-buttons-group"],[1,"crm-button","crm-button-secondary",3,"routerLink"],["type","submit",1,"crm-button","crm-button-primary"],[1,"crm-block-details-header-left"],[1,"crm-block-photo-and-info"],[1,"crm-block-photo-and-info-img","crm-block-photo-and-info-img-promotion"],["alt","",3,"src"],[1,"crm-block-photo-and-info-info"],[1,"crm-block-photo-and-info-info-title"],[1,"crm-block-photo-and-info-info-subtitle"],[1,"crm-block-photo-and-info-info-footer"],[1,"crm-vertical-separator"],[1,"crm-block-info-horizontal"],[1,"crm-input-error"],[4,"ngIf"],["formControlName","accountType"],["value","promoter"],["value","agency"]],template:function(o,n){1&o&&(e.j41(0,"ion-content")(1,"div",0),e.DNE(2,E,6,0),e.j41(3,"div",1)(4,"div",2)(5,"div",3),e.nrm(6,"i",4),e.k0s(),e.j41(7,"div",5),e.EFF(8," Registro para promotor/agencia "),e.k0s()(),e.nrm(9,"div",6),e.k0s(),e.j41(10,"form",7),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(11,"div",8)(12,"div",9),e.EFF(13,"Nombre comercial empresa"),e.k0s(),e.j41(14,"div",10),e.nrm(15,"input",11),e.k0s(),e.DNE(16,k,2,1,"div",12),e.k0s(),e.j41(17,"div",13),e.EFF(18," Datos responsable "),e.k0s(),e.j41(19,"div",8)(20,"div",9),e.EFF(21,"Nombre"),e.k0s(),e.j41(22,"div",10),e.nrm(23,"input",14),e.k0s(),e.DNE(24,b,2,1,"div",12),e.k0s(),e.j41(25,"div",8)(26,"div",9),e.EFF(27,"Email"),e.k0s(),e.j41(28,"div",10),e.nrm(29,"input",15),e.k0s(),e.DNE(30,T,3,2,"div",12),e.k0s(),e.j41(31,"div",8)(32,"div",9),e.EFF(33,"N\xfamero de tel\xe9fono"),e.k0s(),e.j41(34,"div",10),e.nrm(35,"input",16),e.k0s(),e.DNE(36,C,2,1,"div",12),e.k0s(),e.DNE(37,q,10,4,"div",17),e.j41(38,"div",8)(39,"div",9),e.EFF(40,"Contrase\xf1a"),e.k0s(),e.j41(41,"div",10),e.nrm(42,"input",18),e.k0s(),e.DNE(43,w,3,2,"div",12),e.k0s(),e.j41(44,"div",8)(45,"div",9),e.EFF(46,"Repetir contrase\xf1a"),e.k0s(),e.j41(47,"div",10),e.nrm(48,"input",19),e.k0s(),e.DNE(49,X,4,3,"div",12),e.k0s(),e.j41(50,"div",20),e.nrm(51,"div"),e.j41(52,"div",21)(53,"button",22),e.EFF(54,"Iniciar sesi\xf3n"),e.k0s(),e.j41(55,"button",23),e.EFF(56,"Registrarse"),e.k0s()()(),e.nrm(57,"br"),e.DNE(58,V,3,1,"div",12),e.k0s()()()),2&o&&(e.R7$(2),e.vxM(n.agencyInvitationRegister&&(null==n.promotionsInvited?null:n.promotionsInvited.length)>0?2:-1),e.R7$(8),e.Y8G("formGroup",n.registerForm),e.R7$(4),e.Y8G("ngClass",e.eq3(17,m,n.isControlInvalid("companyName"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("companyName")),e.R7$(6),e.Y8G("ngClass",e.eq3(19,m,n.isControlInvalid("name"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("name")),e.R7$(4),e.Y8G("ngClass",e.eq3(21,m,n.isControlInvalid("email"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("email")),e.R7$(4),e.Y8G("ngClass",e.eq3(23,m,n.isControlInvalid("phoneNumber"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("phoneNumber")),e.R7$(),e.Y8G("ngIf",!n.agencyInvitationRegister),e.R7$(4),e.Y8G("ngClass",e.eq3(25,m,n.isControlInvalid("password"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("password")),e.R7$(4),e.Y8G("ngClass",e.eq3(27,m,n.isControlInvalid("confirmPassword")||n.registerForm.hasError("passwordMismatch"))),e.R7$(2),e.Y8G("ngIf",n.isControlInvalid("confirmPassword")||n.registerForm.hasError("passwordMismatch")),e.R7$(4),e.Y8G("routerLink",e.lJ4(29,_)),e.R7$(5),e.Y8G("ngIf",n.globalErrorString))},dependencies:[d.YU,d.bT,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,u.W9,u.N7,g.Wk,a.j4,a.JD,d.vh]}),t})()}];let A=(()=>{var r;class t{}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[g.iI.forChild(J),g.iI]}),t})(),U=(()=>{var r;class t{}return(r=t).\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[d.MD,a.YN,u.bv,A,a.X1]}),t})()}}]);